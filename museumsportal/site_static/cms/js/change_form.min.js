(function(e){e(document).ready(function(){var t=!0;e("#id_slug")[0].value&&(t=!1);window.location.href.split("history").length==1&&window.location.href.split("recover").length==1&&e.each(["template"],function(t,n){var r=e("select#id_"+n);r.change(function(){var t=e("#id_slug")[0]._changed;e("#id_title")[0]._changed&&(t=!0);var i=e("#id_published");i.length&&i[0]._changed&&(t=!0);e("iframe").length&&(t=!0);var s="",o=window.location.href.split("?"),u=e.query.set(n,this.options[this.selectedIndex].value).toString();if(t){var a=gettext("Are you sure you want to change the %(field_name)s without saving the page first?");s=confirm(interpolate(a,{field_name:r.prev().text().slice(0,-1)},!0))}else s=!0;s&&(window.location.href=o[0]+u)})});e("#id_title").focus();var n=e.query.get("template");n&&e("#id_template").find("option").each(function(){this.selected=n==this.value});e("#id_slug").change(function(){this._changed=!0});e("#id_title").change(function(){this._changed=!0});e("#id_published").change(function(){this._changed=!0});e("#id_title").keyup(function(){var n=e("#id_slug")[0];if(!n._changed&&t){var r=this.value;window.UNIHANDECODER&&(r=UNIHANDECODER.decode(r));n.value=URLify(r,64)}});e("#page_form").submit(function(){if(e("iframe").length){var t=gettext("Not all plugins are saved. Are you sure you want to save the page?\nYou may lose your changes. To prevent that, press 'Cancel' and save every unsaved plugin first."),n=confirm(t,!0);if(n){e("iframe").contents().find("#content-main>form").each(function(){try{this.submit()}catch(e){return!1}});return!0}return!1}});e("h2 a").click(function(){var t=e(this).parent().parent(),n=e(t).find("div.load");if(n.length){var r=n.text();n.remove();e(t).find("div.loading").load(r)}return!1})});trigger_lang_button=function(t,n){var r=!1,i="",s="";e("#id_slug")[0]._changed&&(r=!0);e("#id_title")[0]._changed&&(r=!0);var o=e("#id_published");o.length&&o[0]._changed&&(r=!0);e("iframe").length&&(r=!0);if(r){i=gettext("Are you sure you want to change tabs without saving the page first?");s=confirm(i)}else s=!0;if(!s)return!1;window.location=n}})(jQuery);