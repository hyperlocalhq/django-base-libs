/*
 * WYMeditor : what you see is What You Mean web-based editor
 * Copyright (c) 2005 - 2009 Jean-Francois Hovinne, http://www.wymeditor.org/
 * Dual licensed under the MIT (MIT-license.txt)
 * and GPL (GPL-license.txt) licenses.
 *
 * For further information visit:
 *        http://www.wymeditor.org/
 *
 * File Name:
 *        jquery.wymeditor.fullscreen.js
 *        Fullscreen plugin for WYMeditor
 *
 * File Authors:
 *        Luis Santos (luis.santos a-t openquest dotpt)
 *        Jonatan Lundin (jonatan.lundin a-t gmail dotcom)
 *        Gerd Riesselmann (gerd a-t gyro-php dot org) : Fixed issue with new skin layout
 *///Extend WYMeditor
WYMeditor.editor.prototype.fullscreen=function(){function u(){var e=t.outerHeight(!0)-n.outerHeight(!0),o=t.outerWidth()-t.width(),u=i.height(),a=u-e-s*2+"px",f=i.width(),l=f-o-s*2+"px";t.css("width",l);n.css("height",a);r.css({height:u+"px",width:f+"px"})}var e=this,t=jQuery(this._box),n=jQuery(this._iframe),r=null,i=jQuery(window),s=15,o="<li class='wym_tools_fullscreen'><a name='Fullscreen' href='#' style='background-image: url("+e._options.basePath+"plugins/fullscreen/icon_fullscreen.gif)'>"+"Fullscreen"+"</a>"+"</li>";t.find(e._options.toolsSelector+e._options.toolsListSelector).append(o);t.find("li.wym_tools_fullscreen a").click(function(){if(t.css("position")!="fixed"){t.data("wym-inline-css",t.attr("style"));n.data("wym-inline-css",n.attr("style"));r=jQuery('<div id="wym-fullscreen-overlay"></div>').appendTo("body").css({position:"fixed","background-color":"rgb(0, 0, 0)",opacity:"0.75","z-index":"98",top:"0px",left:"0px"});t.css({position:"fixed","z-index":"99",top:s+"px",left:s+"px"});i.bind("resize",u);t.find("li.wym_tools_html a").bind("click",u);u()}else{i.unbind("resize",u);t.find("li.wym_tools_html a").unbind("click",u);t.css({position:"static","z-index":"",width:"",top:"",left:""});n.css("height","");r.remove();r=null;t.attr("style",t.data("wym-inline-css"));n.attr("style",n.data("wym-inline-css"))}return!1})};