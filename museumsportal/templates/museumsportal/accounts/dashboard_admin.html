{% extends "base.html" %}{% load url from future %}{% load base_tags i18n crispy_forms_tags tagging_tags image_modifications infoblocks auth_extended %}{% block bodyclass %}dashboard{% endblock %}{% block title %}{% trans "Input Mask" %}{% endblock %}{% block js %}<script src="{{ STATIC_URL }}site/js/jquery.selectbox-0.2.min.js"></script><script src="{{ STATIC_URL }}site/js/jquery.autosize.min.js"></script><script>  $(document).ready(function(){    $('textarea').autosize();  });</script>{% endblock %}{% block header %}  {% include "utils/dashboard_navigation.html" %}    {% block form_steps %}    {% block dashboard_title %}{% endblock %}  {% endblock %}{% endblock %}{% block content %}<div id="dashboard">  <div class="container">    {% infoblock "dashboard" %}  </div>  {% if request.user|in_group:"Museum Owners" or request.user.is_superuser %}    <div id="exhibitions" class="content">      <div class="container">        <a class="btn  btn-primary pull-right" href="{% url "add_exhibition" %}">{% trans "Add exhibition" %}</a>        <h4><a href="{% url "dashboard_exhibitions" %}">{% trans "Exhibitions" %}</a></h4>        <table class="dashboard-table">          <thead>            <tr>              <th> <small>{% trans "Title" %}</small> </th>              <th> <small>{% trans "Last Change" %}</small> </th>              <th> <small>{% trans "Status" %}</small> </th>              <th> <small>{% trans "Actions" %}</small> </th>            </tr>          </thead>          <tbody>            {% if owned_exhibitions %}            {% for exhibition in owned_exhibitions %}            {% tags_for_object exhibition as tags %}            <tr>              <td class="item">                <a  href="{{ exhibition.get_url_path }}change/"> <b>{{ exhibition.title }}</b> </a>              </td>              <td class="date">{{ exhibition.modified_date|date:"d.m.Y H:i" }}              </td>              <td>                <div class="status">                  <select class="status-switch" data-url="{{ exhibition.get_url_path }}status/">                    <option value="draft"{% if exhibition.status == "draft" %} selected="selected"{% endif %}>{% trans "Draft" %}</option>                    <option value="published"{% if exhibition.status == "published" %} selected="selected"{% endif %}>{% trans "Published" %}</option>                    <option value="expired"{% if exhibition.status == "expired" %} selected="selected"{% endif %}>{% trans "Expired" %}</option>                  </select>                </div>              </td>              <td>                <a href="{{ exhibition.get_url_path }}?preview" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Preview" %}" class="btn btn-sm btn-icon btn-link" target="_blank">                  <span class="icon icon-eye-open"></span>                  <span class="sr-only">{% trans "Preview" %}</span>                </a>                {% if_has_perm "exhibitions.delete_exhibition" exhibition %}                <a href="{{ exhibition.get_url_path }}delete/" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Delete" %}" class="btn btn-sm btn-icon btn-link delete" data-object-title="{{ exhibition.title }}" data-object-type="{% trans "Exhibition" %}">                  <span class="icon icon-remove"></span>                  <span class="sr-only">{% trans "Remove" %}</span>                </a>                {% end_if_has_perm %}                {% if exhibition.status == "published" %} {% endif %}              </td>            </tr>            {% endfor %}            {% else %}            <tr>              <td colspan="4">                <span class="pull-left">                  {% if status == "published" %} {% trans "There are no published items." %} {% endif %}                  {% if status == "draft" %} {% trans "There are no draft items." %} {% endif %}                  {% if status == "expired" %} {% trans "There are no expired items." %} {% endif %}                </span>              </td>            </tr>            {% endif %}          </tbody>        </table>        <a class="btn btn-info " href="{% url "dashboard_exhibitions" %}">{% trans "more" %}</a>      </div>    </div>    <div id="events" class="content">      <div class="container">        <a class="btn  btn-primary pull-right" href="{% url "add_event" %}">{% trans "Add event" %}</a>        <h4><a href="{% url "dashboard_events" %}">{% trans "Events" %}</a></h4>        <table class="dashboard-table">          <thead>            <tr>              <th> <small>{% trans "Title" %}</small> </th>              <th> <small>{% trans "Last Change" %}</small> </th>              <th> <small>{% trans "Status" %}</small> </th>              <th> <small>{% trans "Actions" %}</small> </th>            </tr>          </thead>          <tbody>            {% if owned_events %}            {% for event in owned_events %}            {% tags_for_object event as tags %}            <tr>              <td>                <a href="{{ event.get_url_path }}change/"><b>{{ event.title }}</b></a>              </td>              <td>                {{ event.modified_date|date:"d.m.Y H:i" }}              </td>              <td>                <div class="status">                  <select class="status-switch" data-url="{{ event.get_url_path }}status/">                    <option value="draft"{% if event.status == "draft" %} selected="selected"{% endif %}>{% trans "Draft" %}</option>                    <option value="published"{% if event.status == "published" %} selected="selected"{% endif %}>{% trans "Published" %}</option>                    <option value="expired"{% if event.status == "expired" %} selected="selected"{% endif %}>{% trans "Expired" %}</option>                  </select>                </div>              </td>              <td>                <a href="{{ event.get_url_path }}?preview" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Preview" %}" class="btn btn-sm btn-icon btn-link" target="_blank">                  <span class="icon icon-eye-open"></span>                  <span class="sr-only">{% trans "Preview" %}</span>                </a>                {% if_has_perm "events.delete_event" event %}                <a href="{{ event.get_url_path }}delete/" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Delete" %}" class="btn btn-sm btn-icon btn-link delete" data-object-title="{{ event.title }}" data-object-type="{% trans "Event" %}">                  <span class="icon icon-remove"></span>                  <span class="sr-only">{% trans "Remove" %}</span></a>                  {% end_if_has_perm %}                  {% if event.status == "published" %} {% endif %}                </td>              </tr>              {% endfor %}              {% else %}              <tr>                <td colspan="4">                  <span class="pull-left">                    {% if status == "published" %} {% trans "There are no published items." %} {% endif %}                    {% if status == "draft" %} {% trans "There are no draft items." %} {% endif %}                    {% if status == "expired" %} {% trans "There are no expired items." %} {% endif %}                  </span>                </td>              </tr>              {% endif %}            </tbody>          </table>          <a class="btn btn-info " href="{% url "dashboard_events" %}">{% trans "more" %}</a>        </div>      </div>      <div id="workshops" class="content">        <div class="container">          <a class="btn  btn-primary pull-right" href="{% url "add_workshop" %}">{% trans "Add Guided Tour" %}</a>          <h4><a href="{% url "dashboard_workshops" %}">{% trans "Guided Tours, Workshops and educational offers" %}</a> </h4>          <table class="dashboard-table">            <thead>              <tr>                <th> <small>{% trans "Title" %}</small> </th>                <th> <small>{% trans "Last Change" %}</small> </th>                <th> <small>{% trans "Status" %}</small> </th>                <th> <small>{% trans "Actions" %}</small> </th>              </tr>            </thead>            <tbody>              {% if owned_workshops %}              {% for workshop in owned_workshops %}              {% tags_for_object workshop as tags %}              <tr>                <td> <a href="{{ workshop.get_url_path }}change/"> <b>{{ workshop.title }}</b> </a></td>                <td>{{ workshop.modified_date|date:"d.m.Y H:i" }} </td>                <td>                  <div class="status">                    <select class="status-switch" data-url="{{ workshop.get_url_path }}status/">                      <option value="draft"{% if workshop.status == "draft" %} selected="selected"{% endif %}>{% trans "Draft" %}</option>                      <option value="published"{% if workshop.status == "published" %} selected="selected"{% endif %}>{% trans "Published" %}</option>                      <option value="expired"{% if workshop.status == "expired" %} selected="selected"{% endif %}>{% trans "Expired" %}</option>                    </select>                  </div>                </td>                <td>                  <a href="{{ workshop.get_url_path }}?preview" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Preview" %}" class="btn btn-sm btn-icon btn-link" target="_blank">                    <span class="icon icon-eye-open"></span>                    <span class="sr-only">{% trans "Preview" %}</span>                  </a>                  {% if_has_perm "workshops.delete_workshop" workshop %}                  <a href="{{ workshop.get_url_path }}delete/" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Delete" %}" class="btn btn-sm btn-icon btn-link delete" data-object-title="{{ workshop.title }}" data-object-type="{% trans "Workshop" %}">                    <span class="icon icon-remove"></span>                    <span class="sr-only">{% trans "Remove" %}</span></a>                    {% end_if_has_perm %}                    {% if workshop.status == "published" %} {% endif %}                  </td>                </tr>                {% endfor %}                {% else %}                <tr>                  <td colspan="4">                    <span class="pull-left">                      {% if status == "published" %} {% trans "There are no published items." %} {% endif %}                      {% if status == "draft" %} {% trans "There are no draft items." %} {% endif %}                      {% if status == "expired" %} {% trans "There are no expired items." %} {% endif %}                    </span>                  </td>                </tr>                {% endif %}              </tbody>            </table>            <a class="btn btn-info " href="{% url "dashboard_workshops" %}">{% trans "more" %}</a>          </div>        </div>        <div id="museums" class="content">          <div class="container">            <!-- <a class="add" href="{% url "add_museum" %}">{% trans "Add museum" %}</a> -->            <h4><a href="{% url "dashboard_museums" %}">{% trans "Museums" %}</a></h4>            <table class="dashboard-table">              <thead>                <tr>                  <th> <small>{% trans "Title" %}</small> </th>                  <th> <small>{% trans "Last Change" %}</small> </th>                  <th> <small>{% trans "Status" %}</small> </th>                  <th> <small>{% trans "Actions" %}</small> </th>                </tr>              </thead>              <tbody>                {% if owned_museums %}                {% for museum in owned_museums %}                {% tags_for_object museum as tags %}                <tr>                  <td> <a href="{{ museum.get_url_path }}change/"> <b>{{ museum.title }} {% if museum.subtitle %} <span>â€“ {{ museum.subtitle }}</span> {% endif %} </b> </a> </td>                  <td> {{ museum.modified_date|date:"d.m.Y H:i" }} </td>                  <td>                    {{ museum.get_status_display }}                  </td>                  <td>                    <a href="{{ museum.get_url_path }}?preview" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Preview" %}" class="btn btn-sm btn-icon btn-link" target="_blank">                      <span class="icon icon-eye-open"></span>                      <span class="sr-only">{% trans "Preview" %}</span>                    </a>                  </td>                </tr>                {% endfor %}                {% else %}                <tr>                  <td colspan="4">                    <span class="pull-left">                      {% if status == "published" %} {% trans "There are no published items." %} {% endif %}                      {% if status == "draft" %} {% trans "There are no draft items." %} {% endif %}                      {% if status == "expired" %} {% trans "There are no expired items." %} {% endif %}                    </span>                  </td>                </tr>                {% endif %}              </tbody>            </table>            <a class="btn btn-info " href="{% url "dashboard_museums" %}">{% trans "more" %}</a>          </div>        </div>      </div>    {% endif %}    {% if request.user|in_group:"Museum Owners" or  request.user|in_group:"Shop Admins" or request.user.is_superuser %}      <div id="products" class="content">        <div class="container">          <a class="btn  btn-primary pull-right" href="{% url "add_shop_product" %}">{% trans "Add Shop Product" %}</a>          <h4><a href="{% url "dashboard_shopproducts" %}">{% trans "Shop" %}</a> </h4>          <table class="dashboard-table">            <thead>              <tr>                <th> <small>{% trans "Title" %}</small> </th>                <th> <small>{% trans "Last Change" %}</small> </th>                <th> <small>{% trans "Status" %}</small> </th>                <th> <small>{% trans "Actions" %}</small> </th>              </tr>            </thead>            <tbody>              {% if owned_products %}              {% for product in owned_products %}              {% tags_for_object product as tags %}              <tr>                <td> <a href="{{ product.get_url_path }}change/"> <b>{{ product.title }}</b> </a></td>                <td>{{ product.modified_date|date:"d.m.Y H:i" }} </td>                <td>                  <div class="status">                    <select class="status-switch" data-url="{{ product.get_url_path }}status/">                      <option value="draft"{% if product.status == "draft" %} selected="selected"{% endif %}>{% trans "Draft" %}</option>                      <option value="published"{% if product.status == "published" %} selected="selected"{% endif %}>{% trans "Published" %}</option>                    </select>                  </div>                </td>                <td>                  <a href="{{ product.get_url_path }}?preview" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Preview" %}" class="btn btn-sm btn-icon btn-link" target="_blank">                    <span class="icon icon-eye-open"></span>                    <span class="sr-only">{% trans "Preview" %}</span>                  </a>                  {#% if_has_perm "shop.delete_shopproduct" product %#}                  <a href="{{ product.get_url_path }}delete/" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Delete" %}" class="btn btn-sm btn-icon btn-link delete" data-object-title="{{ product.title }}" data-object-type="{% trans "Shop Product" %}"><span class="icon icon-remove"></span><span class="sr-only">{% trans "Remove" %}</span></a>                  {#% end_if_has_perm %#}                </td>              </tr>              {% endfor %}              {% else %}              <tr>                <td colspan="4">                  <span class="pull-left">                    {% if status == "published" %} {% trans "There are no published items." %} {% endif %}                    {% if status == "draft" %} {% trans "There are no draft items." %} {% endif %}                  </span>                </td>              </tr>              {% endif %}            </tbody>          </table>          <a class="btn btn-info " href="{% url "dashboard_shopproducts" %}">{% trans "more" %}</a>        </div>      </div>    {% endif %}    {% include "utils/dashboard_delete.html" %}    {% endblock %}    {% block footer %}    <div id="footer" class="content">      <div class="container">        <p class="contact">{% trans "Contact" %}:           <a href="mailto:museumsportal@kulturprojekte-berlin.de">museumsportal@kulturprojekte-berlin.de</a> / <b>030 24749 855</b>        </p>      </div>    </div>    <script>      $(function() {        $('.status').hover(function() {          $(this).addClass('hover');        }, function() {          $(this).removeClass('hover');        }).mouseleave();        $('.status-switch').change(function() {          var $this = $(this);          $.get($this.attr('data-url'), {'status': $this.val()}, function(data) {});        });        $('textarea').each(function() {          $(this).autosize();        });      });    </script>    {% endblock %}
