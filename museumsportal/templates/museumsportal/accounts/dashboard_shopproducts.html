{% extends "accounts/dashboard_admin.html" %}{% load url from future %}{% load base_tags i18n crispy_forms_tags crispy_forms_field tagging_tags image_modifications infoblocks auth_extended %}{% block js %}<script src="{{ STATIC_URL }}site/js/jquery.selectbox-0.2.min.js"></script>{% endblock %}{% block content %}<div class="dashboard-header container relative">    <form action="" method="get">        <div id="form-meta">            <div>                <div class="pull-left">{% crispy_field form.query %}</div>                <button type="submit" class="btn btn-primary btn-icon">                    <span class="icon icon-zoom"></span>                    <span class="sr-only">{% trans "Search" %}</span>                </button>            </div>            <div id="pub-status">                <select id="status_filter" name="status">                    <option{% if status == "published" %} selected="selected"{% endif %} value="published">{% trans "Only Published" %}</option>                    <option{% if status == "draft" %} selected="selected"{% endif %} value="draft">{% trans "Only Draft" %}</option>                </select>                <script>                    $('#id_query').focus();                    $('#status_filter').change(function() {                        $(this).closest('form').submit();                    });                </script>            </div>            <a class="btn btn-primary" href="{% url "add_shop_product" %}">{% trans "Add Product" %}</a>        </div>    </form>    <h4><a href="{% url "dashboard_shopproducts" %}">{% trans "Shop" %}</a> </h4></div><div id="dashboard" class="container">  <div id="workshops" class="content">    <table class="dashboard-table">      <thead>        <tr>          <th> <small>{% trans "Product" %}</small> </th>          <th> <small>{% trans "Last Change" %}</small> </th>          <th> <small>{% trans "Status" %}</small> </th>          <th> <small>{% trans "Actions" %}</small> </th>        </tr>      </thead>      <tbody>        {% if page.object_list %}        {% for product in page.object_list %}        {% tags_for_object product as tags %}        <tr>          <td> <a href="{{ product.get_url_path }}change/"> <b>{{ product.title }}</b> </a></td>           <td>{{ product.modified_date|date:"d.m.Y H:i" }} </td>          <td>            <div class="status">              <select class="status-switch" data-url="{{ product.get_url_path }}status/">                <option value="draft"{% if product.status == "draft" %} selected="selected"{% endif %}>{% trans "Draft" %}</option>                <option value="published"{% if product.status == "published" %} selected="selected"{% endif %}>{% trans "Published" %}</option>              </select>            </div>          </td>          <td>            <a href="{{ product.get_url_path }}?preview" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Preview" %}" class="btn btn-sm btn-icon btn-link">              <span class="icon icon-eye-open"></span>              <span class="sr-only">{% trans "Preview" %}</span>            </a>            {#% if_has_perm "shop.delete_shopproduct" product %#}              <a href="{{ product.get_url_path }}delete/" data-toggle="tooltip" data-placement="top" data-original-title="{% trans "Delete" %}" class="btn btn-sm btn-icon btn-link delete" data-object-title="{{ product.title }}" data-object-type="{% trans "Shop Product" %}">                <span class="icon icon-remove"></span>                <span class="sr-only">{% trans "Remove" %}</span>              </a>            {#% end_if_has_perm %#}          </td>          </tr>          {% endfor %}          {% else %}          <tr>            <td colspan="4">              <span class="pull-left">                {% if status == "published" %} {% trans "There are no published items." %} {% endif %}                {% if status == "draft" %} {% trans "There are no draft items." %} {% endif %}              </span>            </td>          </tr>          {% endif %}        </tbody>      </table>      {% include "utils/dashboard_pagination.html" %}    </div>  </div>  {% include "utils/dashboard_delete.html" %}  <script>    $(function() {      $('.status').hover(function() {        $(this).addClass('hover');      }, function() {        $(this).removeClass('hover');      }).mouseleave();      $('.status-switch').change(function() {        var $this = $(this);        $.post($this.attr('data-url'), {'status': $this.val()}, function(data) {});      });    });    $("select").selectbox();  </script>  {% endblock %}