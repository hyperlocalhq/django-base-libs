{% extends "admin/change_form.html" %}

<!-- CONTENT -->
{% block content %}
    {{ block.super }}
    <script>
    $('#id_object_id').each(function() {
        $(this).data('previous-value', $(this).val());
    }).on('focus', function() {
        var content_type_id = $('#id_content_type').val();
        var object_id = $(this).val();
        if (content_type_id && object_id && object_id != $(this).data('previous-value')) {
            $(this).data('previous-value', $(this).val());
            if (window.confirm('Do you want to update the details?')) {
                $.get('../details-json/' + content_type_id + '/' + object_id + '/', function(data) {
                    for (prop_name in data) {
                        if (data.hasOwnProperty(prop_name)) {
                            $('#id_' + prop_name).val(data[prop_name]);
                        }
                    }
                }, 'json');
            }
        }
    });
    </script>
{% endblock %}

