{% block doctype %}<!DOCTYPE html>{% endblock %}
{% load cms_tags menu_tags compressed sekizai_tags i18n image_modifications %}
<html lang="{{ LANGUAGE_CODE }}"> 
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>Berliner Museumsportal {% block title %}{% endblock %}</title>
	<link rel="icon" href="{{ STATIC_URL }}site/img/favicon.ico" type="image/png">
	
    {% block meta_tags %}
        {{ site_settings.get_meta_tags|safe }}
    {% endblock %}	
	
    {% block stylesheet %}
    <link href="{{ STATIC_URL }}site/css/bootstrap.css" rel="stylesheet" media="screen" type="text/css" />
    <link href="{{ STATIC_URL }}site/css/style.css" rel="stylesheet" media="screen" type="text/css" />
    <link href="{{ STATIC_URL }}site/css/media.css" rel="stylesheet" media="screen" type="text/css" />
    {% endblock %}
	
    {% render_block "css" %}

    <script type="text/javascript" src="/jssettings/"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.isotope.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.easing.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.cycle.all.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.scrollstop.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.lazyload.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.viewport.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/bootstrap/bootstrap.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/bootstrap/bootstrap-modal.js"></script>
	<script type="text/javascript" src="{{ STATIC_URL }}site/js/modernizr.custom.52849.js"></script>
    <script type="text/javascript">
    
    $(function() {

        $('#cancel').click(function(e){
            $('#gallery').toggleClass('on');
        });

        $('#info').click(function(e){
            $('#gallery').toggleClass('info');
        });

        function pagerFactory(idx, slide) {
            var s = idx > 2 ? ' ' : '';
            return '<li'+s+'><a href="#">'+(idx+1)+'</a></li>';
        };
    
        $('.show-location').click(function(e){
            $('html, body').animate({scrollTop:0}, 'slow');
            e.preventDefault();
        });

        $('#to-top').click(function(e){
            $('html, body').animate({scrollTop:0}, 'slow');
            e.preventDefault();
        });
        
        $(window).scroll(function() {
            if ($('body').offset().top < $(window).scrollTop()) {
                $('#to-top').addClass('on');
            } else {
                $('#to-top').removeClass('on');
            }
        });

    });
    window.onresize = function(event) {}
    </script>

    <script type="text/javascript">

    $(function(){
        
        var $container = $('#container'),
            filters = {};

        $container.isotope({
            itemSelector : '.item',
            layoutMode : 'fitRows' 
        });

        // filter buttons
        $('.filter a').click(function(){
            var $this = $(this);
            // don't proceed if already selected
            if ( $this.hasClass('selected') ) {
                return;
            }
            
            var $optionSet = $this.parents('.option-set');
            // change selected class
            $optionSet.find('.selected').removeClass('selected');
            $this.addClass('selected');
            
            // store filter value in object
            // i.e. filters.color = 'red'
            var group = $optionSet.attr('data-filter-group');
            filters[ group ] = $this.attr('data-filter-value');
            // convert object into array
            var isoFilters = [];
            for ( var prop in filters ) {
                isoFilters.push( filters[ prop ] )
            }
            var selector = isoFilters.join('');

            $container.isotope({ filter: selector });            
            $(".list .img:in-viewport").lazyload();
            $container.trigger("map_filter", { filter: isoFilters});
            $(".isotope-item:not(.isotope-hidden) .img", $container).trigger("appear");
            
            return false;
        });
        
        var hashChanged = false;
        $(window).bind( 'hashchange', function( event ){
            if (!window.location.hash) {
                return;
            }
            // get options object from hash
            var hashOptions = window.location.hash ? $.deparam.fragment( window.location.hash, true ) : {},
                // do not animate first call
                aniEngine = hashChanged ? 'best-available' : 'none',
                // apply defaults where no option was specified
                options = $.extend( {}, hashOptions, { animationEngine: aniEngine } );
            // apply options from hash
            $container.isotope( options );
            $(".list .img:in-viewport").lazyload();
            // save options
            hashChanged = true;
            if (hashOptions) {
                var $categories = $('#categories');
                $('a[href="#any-category"]', $categories).removeClass("selected");
                $('a[href="' + window.location.hash + '"]', $categories).addClass("selected");
            }
            
          })
            // trigger hashchange to capture any hash data on init
            .trigger('hashchange');
        
        
    });
    $(function(){
        $(".list .img").lazyload();
    });

    $(window).bind('scrollstop', function(e){
        $(".list .img:in-viewport").lazyload();
    });

    $(document).ready(function () {
       if ($("[rel=tooltip]").length) {
           $("[rel=tooltip]").tooltip();
       }
    });

    </script>
    {{ site_settings.extra_head|safe }}
    {% block js %}{% endblock %}
</head>





<body class="{% block bodyclass %}{% endblock %}">

    {% block toolbar %}
        {% cms_toolbar %}
    {% endblock %}

<div id="popup">
    <div class="inner">
        <div id="picker">
            <header class="clearfix">
                <time>21:30</time>
            </header>
            <ul class="body clearfix">
                <li>
                    <table class="hours">
                        <thead>
                            <tr>
                                <th colspan="6">Hours</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span>00</span></td>
                                <td><span>01</span></td>
                                <td><span>02</span></td>
                                <td><span>03</span></td>
                                <td><span>04</span></td>
                                <td><span>05</span></td>
                            </tr>
                            <tr>
                                <td><span>06</span></td>
                                <td><span>07</span></td>
                                <td><span>08</span></td>
                                <td><span>09</span></td>
                                <td><span>10</span></td>
                                <td><span>11</span></td>
                            </tr>
                            <tr>
                                <td><span>12</span></td>
                                <td><span>13</span></td>
                                <td><span>14</span></td>
                                <td><span>15</span></td>
                                <td><span>16</span></td>
                                <td><span>17</span></td>
                            </tr>
                            <tr>
                                <td><span>18</span></td>
                                <td><span>19</span></td>
                                <td><span>20</span></td>
                                <td><span class="active">21</span></td>
                                <td><span>22</span></td>
                                <td><span>23</span></td>
                            </tr>
                        </tbody>
                    </table>
                </li>
                <li>
                    <table class="minutes">
                        <thead>
                            <tr>
                                <th colspan="3">Minutes</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td><span>00</span></td>
                                <td><span>05</span></td>
                                <td><span>10</span></td>
                            </tr>
                            <tr>
                                <td><span>15</span></td>
                                <td><span>20</span></td>
                                <td><span>25</span></td>
                            </tr>
                            <tr>
                                <td><span class="active">30</span></td>
                                <td><span>35</span></td>
                                <td><span>40</span></td>
                            </tr>
                            <tr>
                                <td><span>45</span></td>
                                <td><span>50</span></td>
                                <td><span>55</span></td>
                            </tr>
                        </tbody>
                    </table>
                </li>
                
            </ul>
            <footer class="clearfix">
                <button class="cancel right">Cancel</button>
                <button class="done btn-primary">Done</button>
            </footer>
        </div>
    </div>
</div>
    

	<div id="wrapper">


        <!-- Header
        ================================================== -->

		<header id="header" class="clearfix">
            <div class="inner">

                <a class="logo" href="/">
                    <span class="img">&nbsp;</span>
                    <span class="word">Museumsportal<br/>Berlin</span>
                    <span class="claim">Alle Informationen zu Berlins Museen, Schlössern und Gedenkstätten.</span>
                </a>

                <ul class="meta">
                    <li><a class="facebook" href="https://www.facebook.com/pages/Museumsportal-Berlin/44199608380">&nbsp;<span>Facebook</span></a></li>
                    <li><a class="twitter" href="https://twitter.com/museumsportal">&nbsp;<span>Twitter</span></a></li>
                    {% block language_chooser %}
                        {% language_chooser %}
                    {% endblock %}
                </ul>
            </div>
		</header>
        <nav id="navigation">
            <ul>
                <li{% if request.path == "/" %} class="selected"{% endif %}><a href="/">Home</a></li>
                {% show_menu_below_id "start_page" 0 100 100 100 %}
            </ul>
        </nav>



        <!-- Content
        ================================================== -->

    		    {% block content %}
    			{% endblock %}
		
        <!-- Footer
        ================================================== -->
        
        <a href="#top" id="to-top">
            <span>
                {% if LANGUAGE_CODE == "de" %}
                    Zum Seitenanfang
                {% else %}
                    Back to Top
                {% endif %}
            </span>
        </a>

        <footer id="footer" class="clearfix">
            <div class="inner">
                <ul class="navigation">
                    {% show_menu_below_id "start_page" 0 1 1 1 %}
                    {% if LANGUAGE_CODE == "de" %}
                        <li><a href="/de/impressum/">Impressum</a></li>
                    {% else %}
                        <li><a href="/en/imprint/">Imprint</a></li>
                    {% endif %}
                </ul>
            </div>
        </footer>
	</div>

    {% render_block "js" %}

    {{ site_settings.extra_body|safe }}


    <script>
    $(window).load(function(){
        $("#next").click(function() {
            var $next, $selected = $(".current");
            $selected.removeClass("current").removeClass("todo").addClass("done");
            $next = $selected.next().removeClass("todo").addClass("current");
            if (!$next.length) {
                $(".done").removeClass("done").addClass("todo");
            }
        });
        
        $("#prev").click(function() {
            var $prev, $selected = $(".current");
            $selected.removeClass("current").removeClass("done").addClass("todo");
            $prev = $selected.prev().removeClass("done").addClass("current");
            if (!$prev.length) {
                $(".done").removeClass("done").addClass("todo");
            }
        });
    });
    </script>

    <script type="text/javascript">
	$(function() {
        $("a[href^='http://']").attr("target","_blank");	        
	        
	    if ($('#cms_toolbar').length) { // cms toolbar fix
	        if ($('body').css('margin-top') == "-43px") {
	            $('body').css('margin-top', 0);
	        }
	    }
	});
	</script>

    <script >
        // $('#container.collapsed li').click(function() {
        //     if ($(this).hasClass('open')) {
        //         $(this).toggleClass('open');
        //     } 
        //     else {
        //         $(this).parent().find('li.open').removeClass('open');
        //         $(this).toggleClass('open');
        //     }
        // });
    </script>
    <script>
        $(function(){
            $('#slides').slides({
                preload: true,
            });
        });
    </script>
</body>
</html>
