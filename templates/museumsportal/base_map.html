{% block doctype %}<!DOCTYPE html>{% endblock %}
{% load cms_tags menu_tags compressed sekizai_tags i18n image_modifications base_tags %}
<html lang="{{ LANGUAGE_CODE }}">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>{% block title %}{% endblock %} Museumsportal Berlin</title>
    <link rel="icon" href="{{ STATIC_URL }}site/img/favicon.ico" type="image/png">

    {% block meta_tags %}
      {{ site_settings.get_meta_tags|safe }}
    {% endblock %}

    {% block open_graph %}
    {% endblock %}

    {% block stylesheet %}
      <link href="{{ STATIC_URL }}site/css/bootstrap/bootstrap.css" rel="stylesheet" media="screen, print" type="text/css" />
      <link href="{{ STATIC_URL }}site/css/style.css" rel="stylesheet" media="screen, print" type="text/css" />
    {% endblock %}

    {% render_block "css" %}
    <script type="text/javascript">
      <!--//--><![CDATA[//><!--
        var images = new Array()
        function preload() {
          for (i = 0; i < preload.arguments.length; i++) {
            images[i] = new Image()
            images[i].src = preload.arguments[i]
          }
        }
        preload(
          "{{ STATIC_URL }}site/img/placeholder_list.gif",
          "{{ STATIC_URL }}site/img/placeholder_cover.gif"
        )
      //--><!]]>
    </script>
    <script type="text/javascript">
      (function() {
        var config = {
            kitId: 'qru0sat',
            scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();
    </script>

    <script type="text/javascript" src="/{{ LANGUAGE_CODE }}/jssettings/"></script>
    <script type="text/javascript" src="/{{ LANGUAGE_CODE }}/jsi18n/"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.ba-bbq.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.isotope.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.scrollstop.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.lazyload.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.viewport.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/bootstrap/bootstrap.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/modernizr.custom.52849.js"></script>
    <script type="text/javascript" src="{{ jetson_media_url }}js/jquery/jquery.cookie.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.selectbox-0.2.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.sharrre.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.hammer-full.min.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/base.js"></script>
    <script>
      var csrftoken = $.cookie('csrftoken');
      function csrfSafeMethod(method) {
        // these HTTP methods do not require CSRF protection
        return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
      }
      $.ajaxSetup({
        crossDomain: false, // obviates need for sameOrigin test
        beforeSend: function(xhr, settings) {
          if (!csrfSafeMethod(settings.type)) {
            xhr.setRequestHeader("X-CSRFToken", csrftoken);
          }
        }
      });
      if ($.browser.msie) {
        $('html').addClass('msie');
      }
    </script>
    {{ site_settings.extra_head|safe }}
    {% block js %}{% endblock %}
  </head>


  <body class="no-transition map-only {% block bodyclass %}{% endblock %} lang_{{ LANGUAGE_CODE }}">

    <div class="row row-map">
      <div id="map-wrapper" class="col-xs-1 col-sm-7 col-md-8 col-lg-9">
        <div id="gmap">&nbsp;</div>
        <a href=".." id="cancel-map" class="cancel btn btn-default btn-lg btn-icon">
          <span class="icon icon-remove"></span>
          <span class="sr-only">{% trans "close" %}</span>
        </a>

        <button id="show-current-location" class="btn btn-default btn-lg btn-icon hidden">
          <span class="icon icon-cross-hair"></span>
          <span class="sr-only">{% trans "Show my current location" %}</span>
        </button>

        <button id="toggle-sidebar" class="btn btn-default btn-lg btn-icon">
          <span class="icon icon-menu"></span>
          <span class="sr-only">{% trans "Toggle Sidebar" %}</span>
        </button>
      </div>
      <div id="map-sidebar-wrapper" class="col-xs-11 col-sm-5 col-md-4 col-lg-3">
        <div id="map-sidebar" class="map-description">
          {% comment %}
          <div id="map-filter" class="hide">
            <button id="cancel-filter" class="cancel btn btn-info btn-lg btn-icon">
              <span class="icon icon-remove"></span>
              <span class="sr-only">{% trans "close" %}</span>
            </button>

            {% block filters %}
            {% endblock %}
          </div>
          {% endcomment %}

          <div id="map-list" class="hide">
            <button id="cancel-list" class="cancel btn btn-info btn-lg">
              <span class="icon icon-remove"></span>
              <span class="sr-only">{% trans "close" %}</span>
            </button>
            <header class="list-header">
              <h4>{% block list-title %}{% endblock %}</h4>
              <div class="list-controls">
                <div class="btn-group">
                  <button id="toggle-map-filter" class="btn btn-info">{% trans "filter" %}</button>
                  <button id="filter-reset" type="button" class="filter-reset btn btn-info">{% trans "Reset" %}</button>
                </div>
              </div>
              <ul id="filter-summary"></ul>
            </header>
            {% include "utils/container_empty.html" %}

            {% block map-list %}
            {% endblock %}
          </div>
          <div id="map-description">
              <button id="cancel-description" class="cancel btn btn-info btn-lg">
                <span class="icon icon-remove"></span>
                <span class="sr-only">{% trans "close" %}</span>
              </button>
              <h4>{% trans "Nothing is selected" %}</h4>
              <p>{% trans "Please, select a location in the map!" %}</p>
          </div>
        </div>
      </div>
    </div>

    {% block content %}
    {% endblock %}

    {% render_block "js" %}
    {{ site_settings.extra_body|safe }}
  </body>
</html>
