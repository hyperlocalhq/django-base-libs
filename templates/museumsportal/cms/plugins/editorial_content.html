{% load i18n image_modifications %}

{% if request.current_page.reverse_id == "magazin" %}
    <div class="editorial-content">
        <a class="img" href="{{ object.website }}" style="background-image: url({{ MEDIA_URL }}{{ object.image|modified_path:"magazine_overview" }})">
            {% if object.image %}<img src="{{ MEDIA_URL }}{{ object.image|modified_path:"magazine_overview" }}" alt="{{ object.get_rendered_image_caption|striptags }}" />{% endif %} 
            {% if object.image_caption %}<p class="caption">{{ object.get_rendered_image_caption|truncatewords:"30"|removetags:"p"|safe }}</p> {% endif %} 
        </a>
        
        <a class="title" href="{{ object.website }}">
            <h3>{{ object.title }}</h3>
            <h4>{{ object.subtitle }}</h4>
        </a>

        <p class="description">{{ object.get_rendered_description|removetags:"p" }}</p>
        <p class="more"><a href="{{ object.website }}">{% trans "more" %}…</a></p>
    </div>
{% else %}
    {% if placeholder == "featured_magazin" or "start_page" in placeholder %}
        <li class="item">
            {% if object.position == 0 %}
                <a class="img" alt="{{ object.image_caption }}" href="{{ object.website }}" style="background-image: url({{ MEDIA_URL }}{{ object.image|modified_path:"editorial" }})"></a>
            {% else %}
                <a class="img" alt="{{ object.image_caption }}" href="{{ object.website }}" style="background-image: url({{ MEDIA_URL }}{{ object.image|modified_path:"ed_small" }})"></a>
            {% endif %}
            <a class="txt" href="{{ object.website }}">
                <h3>{{ object.title }}</h3>
                <h4>{{ object.subtitle }}</h4>
                <h5>{{ object.image_caption }}</h5>
                <p>{{ object.get_rendered_description|removetags:"p"|truncatewords:38 }}</p>
            </a>
        </li>
    {% else %}
        <div class="editorial-content">
            <a class="img" href="{{ object.website }}">
                {% if object.image %}<img src="{{ MEDIA_URL }}{{ object.image|modified_path:"editorial" }}" alt="{{ object.get_rendered_image_caption|striptags }}" />{% endif %} 
                {% if object.image_caption %}<p class="caption">{{ object.get_rendered_image_caption|truncatewords:"30"|removetags:"p"|safe }}</p> {% endif %} 
            </a>
            
            <a class="title" href="{{ object.website }}">
                <h3>{{ object.title }}</h3>
                <h4>{{ object.subtitle }}</h4>
            </a>
    
            <p class="description">{{ object.get_rendered_description|removetags:"p" }}</p>
            <p class="more"><a href="{{ object.website }}">{% trans "more" %}…</a></p>
        </div>
    {% endif %}    
{% endif %}