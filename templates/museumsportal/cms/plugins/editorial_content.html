{% load i18n image_modifications %}

{% if request.current_page.reverse_id == "magazin" %}
  <div class="item">
    <a class="img" href="{{ object.website }}" style="background-image: url({{ MEDIA_URL }}{{ object.image|modified_path:"magazine_overview" }})">
      {% if object.image %}<img src="{{ MEDIA_URL }}{{ object.image|modified_path:"magazine_overview" }}" alt="{{ object.get_rendered_image_caption|striptags }}" />{% endif %}
      {% if object.image_caption %}<p class="caption">{{ object.get_rendered_image_caption|truncatewords:"30"|removetags:"p" }}</p> {% endif %}
    </a>

    <a class="title" href="{{ object.website }}">
      <h3>{{ object.title }}</h3>
      <h4>{{ object.subtitle }}</h4>
    </a>

    <p class="description">{{ object.get_rendered_description|removetags:"p" }}</p>
    <p class="more"><a href="{{ object.website }}">{% trans "more" %}…</a></p>
  </div>
{% else %}

  {% if placeholder == "series_items_featured" %}
    <div class="item col-xs-12 col-sm-6 col-md-4 col-lg-4">
      <a href="{{ object.website }}" class="img">
        <img class="fade" src="{{ STATIC_URL }}site/img/placeholder_list.gif" data-original="{{ MEDIA_URL }}{{ object.image|modified_path:"editorial" }}" alt="" />
      </a >
      {% if object.image_caption %}
          <p><small>{{ object.image_caption }}</small></p>
      {% endif %}

      <h3>{{ object.title }}</h3>
      <h4>{{ object.subtitle }}</h4>
      <p class="lead">{{ object.get_rendered_description|removetags:"p"|truncatewords:38 }}</p>
      <a class="btn btn-default btn-sm" href="{{ object.website }}">{% trans "More" %}…</a>
    </div>
  {% else %}

    {% if placeholder == "featured_magazin" or "start_page" in placeholder %}
      <div class="item">
        {% if object.position == 0 %}
          <span class="img">
            <img class="fade" src="{{ STATIC_URL }}site/img/placeholder_list.gif" data-original="{{ MEDIA_URL }}{{ object.image|modified_path:"editorial" }}" alt="" />
          </span>
        {% else %}
          <span class="img">
            <img class="fade" src="{{ STATIC_URL }}site/img/placeholder_list.gif" data-original="{{ MEDIA_URL }}{{ object.image|modified_path:"ed_small" }}" alt="" />
          </span>
        {% endif %}

        <a class="txt" href="{{ object.website }}">
          <h3>{{ object.title }}</h3>
          <h4>{{ object.subtitle }}</h4>
          <h5>{{ object.image_caption }}</h5>
          <p>{{ object.get_rendered_description|removetags:"p"|truncatewords:38 }}</p>
        </a>
      </div>
    {% else %}
      <div class="editorial-content">
        <a class="img" href="{{ object.website }}" style="background-image: url({{ MEDIA_URL }}{{ object.image|modified_path:"editorial" }})">
          {% if object.image %}<img src="{{ MEDIA_URL }}{{ object.image|modified_path:"editorial" }}" alt="{{ object.get_rendered_image_caption|striptags }}" />{% endif %}
          {% if object.image_caption %}<p class="caption">{{ object.get_rendered_image_caption|truncatewords:"30"|removetags:"p" }}</p> {% endif %}
        </a>

        <a class="title" href="{{ object.website }}">
          <h4>{{ object.title }}</h3>
          <h5>{{ object.subtitle }}</h4>
        </a>

        <p class="description">{{ object.get_rendered_description|removetags:"p" }}</p>
        <a class="btn btn-sm btn-default" href="{{ object.website }}">{% trans "more" %}…</a>
      </div>
    {% endif %}
  {% endif %}
{% endif %}