{% load i18n image_modifications %}
<div class="front-page-slideshow">
    <ul id="slide">
        {% for slide in slides %}
            <li>
                <a class="img" href="{{ slide.link }}" style="background-image: url({{ UPLOADS_URL }}{{ slide.path|modified_path:"slideshow" }})">
                    <span class="overlay" href="{{ slide.link }}">
                        <h2>{{ slide.title|striptags }}</h2>
                        <h3>{{ slide.subtitle|striptags }}</h3>
                    </span>
                </a>

                <nav class="actions">
                  <a href="#" rel="tooltip" data-placement="top" data-original-title="{% trans "Add to Favorites" %}" class="favorite icon icon-white icon-favorite"></a>
                  <a href="#" rel="tooltip" data-placement="top" data-original-title="{% trans "Show location on map" %}" class="location icon icon-white icon-location"></a>
                </nav>
            </li>
        {% endfor %}
    </ul>

    <div id="pager"></div>


    <div class="controls">
        <a id="prev" href="#">&nbsp;</a>
        <a id="next" href="#">&nbsp;</a>
    </div>
</div>

<script type="text/javascript">
    (function($, undefined) {
        function pagerFactory(idx, slide) {
            var s = idx > 2 ? ' ' : '';
            return '<li'+s+'><a href="#">'+(idx+1)+'</a></li>';
        };
    
        $(function() {
            $('#stage').cycle({
                fx:                 'fade',
                speed:              400,
                timeout:            6000,
                pause:            	1,
                pager:              '#nav',
                slideExpr:          '.slide',
                next:               '#next', 
                prev:               '#prev',
                easing:             'easeInOutSine',
                pagerAnchorBuilder: pagerFactory
            });
        });
    }(jQuery));
</script>