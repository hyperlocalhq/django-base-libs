{% load image_modifications %}

<ul id="slide">
    {% for slide in slides %}
        <li>
            <a class="img" href="{{ slide.link }}" style="background-image: url({{ UPLOADS_URL }}{{ slide.path|modified_path:"slideshow" }})"></a>
            <a class="overlay" href="{{ slide.link }}">
                <h2>{{ slide.title }}</h2>
                <h3>{{ slide.subtitle }}</h3>
            </a>

            <ul class="actions">
              <li><a href="#" rel="tooltip" data-placement="top" data-original-title="Add to Favorites" class="favorite"></a></li>
              <li><a href="#" rel="tooltip" data-placement="top" data-original-title="Show location on map" class="location"></a></li>
            </ul>
        </li>
    {% endfor %}
</ul>
<div id="pager"></div>


<!-- <div class="controls">
    <a id="prev" href="#">&nbsp;</a>
    <a id="next" href="#">&nbsp;</a>
</div> -->
<script type="text/javascript">
    (function($, undefined) {
        function pagerFactory(idx, slide) {
            var s = idx > 2 ? ' ' : '';
            return '<li'+s+'><a href="#">'+(idx+1)+'</a></li>';
        };
    
        $(function() {
            $('#stage').cycle({
                fx:                 'fade',
                speed:              400,
                timeout:            6000,
                pause:            	1,
                pager:              '#nav',
                slideExpr:          '.slide',
                next:               '#next', 
                prev:               '#prev',
                easing:             'easeInOutSine',
                pagerAnchorBuilder: pagerFactory
            });
        });
    }(jQuery));
</script>