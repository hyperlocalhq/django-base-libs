{% extends "base.html" %}
{% load base_tags i18n image_modifications tagging_tags babel auth_extended fb_tags %}
{% block bodyclass %}museum-detail{% endblock %}

{% block js %}
    <link href="{{ STATIC_URL }}site/shadowbox/shadowbox.css" rel="stylesheet" media="screen" type="text/css" />
    
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language={{ LANGUAGE_CODE }}"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/jquery.fillwidth.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/swipe.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/stickysidebar.jquery.min.js"></script>

    
    {% with object as museum %}
        <script type="text/javascript">
            function openGoogleMaps() {
                Shadowbox.open({
                    player:     "html",
                    content:    "",
                    height:     $(window).height(),
                    width:      $(window).width(),
                    options:    {
                        onFinish: function(item) {
                            var latlng = new google.maps.LatLng({{ museum.latitude|default:52.519171 }}, {{ museum.longitude|default:13.4060912 }});
                            var myOptions = {
                            mapTypeControl: true,
                            zoomControl: true,
                            streetViewControl: true,
                            zoom: 16,
                            center: latlng,
                            mapTypeId: google.maps.MapTypeId.ROADMAP
                            };
                            var map = new google.maps.Map(
                                document.getElementById(Shadowbox.playerId),
                                myOptions
                            );
                            var oImage = new google.maps.MarkerImage(
                                "{{ STATIC_URL }}site/img/gmap/markers_1-10.png",
                                // This marker is 20 pixels wide by 32 pixels tall.
                                new google.maps.Size(20, 34),
                                // The origin for this image is 0,0.
                                new google.maps.Point(0, 0),
                                // The anchor for this image is the base of the flagpole at 0,32.
                                new google.maps.Point(10, 34)
                            );                                
                            var oShadow = new google.maps.MarkerImage(
                                "{{ STATIC_URL }}site/img/gmap/marker_shadow.png",
                                // The shadow image is larger in the horizontal dimension
                                // while the position and offset are the same as for the main image.
                                new google.maps.Size(37, 34),
                                new google.maps.Point(0, 0),
                                new google.maps.Point(8, 25)
                            );
                            var marker = new google.maps.Marker({
                                map: map, 
                                position: latlng,
                                shadow: oShadow,
                                icon: oImage
                            });
                            /*$("#bvg_widget").appendTo($("#" + Shadowbox.playerId))
                            
                            $(".toggle_widget").click(function () {
                                $('#bvg_widget').toggleClass("mini");
                            });*/
                        }
                    }
                });
            }
        
            Shadowbox.init({
                overlayColor:   "#f8f6f2",
                overlayOpacity: 0.9,
                continuous:     true,
                animate:        true
            });
            
            $(document).ready(function(){
                $(".toggle_bvg").click(function () {
                    $("#bvg_widget").toggleClass("on");
                    return false;
                });
            });
        
        </script>
    {% endwith %}
{% endblock %}



<!-- Artickle
================================================== -->



{% block content %}
    {% with object as museum %}
<div class="content clearfix">
    <div class="inner">

        <header id="slideshow">
            {% if museum.cover_image %}
                <ul id="slide">
                    <li>
                        <a class="img" href="{{ museum.get_url_path }}" style="background-image: url({{ MEDIA_URL }}{{ museum.cover_image|modified_path:"cover" }})"></a>
                    </li>
                </ul>
    
                <nav class="actions bottom">
                    {% if_has_perm "museums.change_museum" museum %}
                        <button rel="tooltip" data-placement="bottom" data-original-title="{% trans "Crop image" %}" class="crop icon icon-crop " onclick="location.href='{% cropping_url museum.cover_image "cover" request request.path %}';"></button>
                    {% end_if_has_perm %}
                    <button id="fullscreen" rel="tooltip" data-placement="bottom" data-original-title="Fullscreen" class="fullscreen icon icon-fullscreen"></button>
                </nav>
            {% endif %}
        </header>

        <section class="sidebar">
            <ul class="accordion" id="accordion2">  
                <li class="accordion-group">  
                    <h4 class="accordion-heading">  
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-location">  
                            {% trans "Location" %}  
                        </a>  
                    </h4>  
                    <ul id="collapse-location" class="accordion-body collapse" style="height: 0px; ">  
                        <li class="accordion-inner">  
                            <dl class="address">
                                <dt>{% trans "Address" %}</dt>
                                <dd>{{ museum.street_address }}</dd>
                                {% if museum.street_address2 %}<dd>{{ museum.street_address2 }}</dd>{% endif %}
                                {% if museum.district %}<dd>{{ museum.district }}</dd>{% endif %}
                                <dd>{{ museum.postal_code }} {{ museum.city }}</dd>
                            </dl>
                        
                            {% if museum.phone_number %}
                                <dl class="phone inset">
                                    <dt>{% trans "Tel" %}</dt>
                                    <dd>+{{ museum.phone_country }} ({{ museum.phone_area }}) {{ museum.phone_number }}</dd>
                                </dl>
                            {% endif %} 
                            
                            {% if museum.fax_number %}
                                <dl class="fax inset">
                                    <dt>{% trans "Fax" %}</dt>
                                    <dd>+{{ museum.fax_country }} ({{ museum.fax_area }}) {{ museum.fax_number }}</dd>
                                </dl>
                            {% endif %} 
                            
                            {% if museum.website %}
                                <dl class="website inset">
                                    <dt>{% trans "Web" %}</dt>
                                    <dd><a href="{{ museum.website }}">{{ museum.website }}</a></dd>
                                </dl>
                            {% endif %}
                            
                            {% if museum.facebook %}
                                <dl class="facebook inset">
                                    <dt>{% trans "Web" %}</dt>
                                    <dd><a href="{{ museum.facebook }}">{{ museum.facebook }}</a></dd>
                                </dl>
                            {% endif %}
                            
                            {% if museum.twitter %}
                                <dl class="twitter inset">
                                    <dt>{% trans "Web" %}</dt>
                                    <dd><a href="{{ museum.twitter }}">{{ museum.twitter }}</a></dd>
                                </dl>
                            {% endif %}
                            
                            {% if museum.contact_name %}
                                <dl>
                                    <dt>{% trans "Contact person" %}</dt>
                                    <dd>{{ museum.contact_name }}</dd>
                                </dl>
                                {% if museum.contact_phone_number %}
                                    <dl>
                                        <dt>{% trans "Contact phone" %}</dt>
                                        <dd>{{ museum.contact_phone_country }}
                                        {{ museum.contact_phone_area }}
                                        {{ museum.contact_phone_number }}
                                        </dd>
                                    </dl>
                                {% endif %}
                                {% if museum.contact_email %}
                                    <dl>
                                        <dt>{% trans "Contact email" %}</dt>
                                        <dd>{{ museum.contact_email }}
                                        </dd>
                                    </dl>
                                {% endif %}
                            {% endif %}
                            
                            {% if museum.post_street_address %}
                                <dl class="address">
                                    <dt>{% trans "Postal address" %}</dt>
                                    <dd>{{ museum.post_street_address }}</dd>
                                    {% if museum.post_street_address2 %}<dd>{{ museum.post_street_address2 }}</dd>{% endif %} 
                                    <dd>{{ museum.post_postal_code }} {{ museum.post_city }}</dd>
                                </dl>
                            {% endif %}
                            
                        </li>
                        <li class="accordion-inner">  
                            <a class="" onclick="openGoogleMaps();" id="map_link" title="Karte" href="#">Googlemaps</a>
                            <a class="toggle_bvg" href="#">{% if LANGUAGE_CODE == "de" %}BVG Suche{% else %}BVG Search{% endif %}</a>
                        </li>
                    </ul>  
                </li>
                {% if museum.season_set.count or museum.specialopeningtime_set.count %}
                    <li class="accordion-group">  
                        <h4 class="accordion-heading">  
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-opening-times">
                                {% trans "Opening hours" %}
                            </a>  
                        </h4>  
                        <ul id="collapse-opening-times" class="accordion-body collapse" style="height: 0px; ">
                            <li class="accordion-inner">
                                {% if museum.season_set.count == 1 %}
                                    {% with museum.season_set.all.0 as season %}
                                        {% if season.is_appointment_based %}
                                            <p>{% trans "Based on appointment" %}</p>
                                        {% else %}
                                            <table>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <p><strong>{% trans "Mon" %}</strong>
                                                                {% if season.mon_open %}
                                                                    {{ season.mon_open|time:"H:i" }} - {{ season.mon_close|time:"H:i" }}
                                                                    {% if season.mon_break_close %}
                                                                        | {% trans "Break:" %} {{ season.mon_break_close|time:"H:i" }} - {{ season.mon_break_open|time:"H:i" }}
                                                                    {% endif %}
                                                                {% else %}
                                                                    {% trans "closed" %}
                                                                {% endif %}
                                                            </p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <p><strong>{% trans "Tue" %}</strong>
                                                {% if season.tue_open %}
                                                    {{ season.tue_open|time:"H:i" }} - {{ season.tue_close|time:"H:i" }}
                                                    {% if season.tue_break_close %}
                                                        | {% trans "Break:" %} {{ season.tue_break_close|time:"H:i" }} - {{ season.tue_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Wed" %}</strong>
                                                {% if season.wed_open %}
                                                    {{ season.wed_open|time:"H:i" }} - {{ season.wed_close|time:"H:i" }}
                                                    {% if season.wed_break_close %}
                                                        | {% trans "Break:" %} {{ season.wed_break_close|time:"H:i" }} - {{ season.wed_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Thu" %}</strong>
                                                {% if season.thu_open %}
                                                    {{ season.thu_open|time:"H:i" }} - {{ season.thu_close|time:"H:i" }}
                                                    {% if season.thu_break_close %}
                                                        | {% trans "Break:" %} {{ season.thu_break_close|time:"H:i" }} - {{ season.thu_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Fri" %}</strong>
                                                {% if season.fri_open %}
                                                    {{ season.fri_open|time:"H:i" }} - {{ season.fri_close|time:"H:i" }}
                                                    {% if season.fri_break_close %}
                                                        | {% trans "Break:" %} {{ season.fri_break_close|time:"H:i" }} - {{ season.fri_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Sat" %}</strong>
                                                {% if season.sat_open %}
                                                    {{ season.sat_open|time:"H:i" }} - {{ season.sat_close|time:"H:i" }}
                                                    {% if season.sat_break_close %}
                                                        | {% trans "Break:" %} {{ season.sat_break_close|time:"H:i" }} - {{ season.sat_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Sun" %}</strong>
                                                {% if season.sun_open %}
                                                    {{ season.sun_open|time:"H:i" }} - {{ season.sun_close|time:"H:i" }}
                                                    {% if season.sun_break_close %}
                                                        | {% trans "Break:" %} {{ season.sun_break_close|time:"H:i" }} - {{ season.sun_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                        {% endif %}
                                        {% if season.last_entry %}
                                            <div class="last_entry">{% trans "Last entry" %}: {{ season.last_entry }}</div>
                                        {% endif %}
                                        {% if season.exceptions %}
                                            <div class="exceptions">{{ season.get_rendered_exceptions }}</div>
                                        {% endif %}
                                    {% endwith %}
                                {% else %}
                                    {% for season in museum.season_set.all %}
                                        <h5>{% trans "Season" %} {{ season.start|date:"j. F Y" }} - {{ season.end|date:"j. F Y" }}</h5>
                                        {% if season.is_appointment_based %}
                                            <p>{% trans "Based on appointment" %}</p>
                                        {% else %}
                                            <table>
                                                <tbody>
                                                    <tr>
                                                        <td>
                                                            <p><strong>{% trans "Mon" %}</strong>
                                                                {% if season.mon_open %}
                                                                    {{ season.mon_open|time:"H:i" }} - {{ season.mon_close|time:"H:i" }}
                                                                    {% if season.mon_break_close %}
                                                                        | {% trans "Break:" %} {{ season.mon_break_close|time:"H:i" }} - {{ season.mon_break_open|time:"H:i" }}
                                                                    {% endif %}
                                                                {% else %}
                                                                    {% trans "closed" %}
                                                                {% endif %}
                                                            </p>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <p><strong>{% trans "Tue" %}</strong>
                                                {% if season.tue_open %}
                                                    {{ season.tue_open|time:"H:i" }} - {{ season.tue_close|time:"H:i" }}
                                                    {% if season.tue_break_close %}
                                                        | {% trans "Break:" %} {{ season.tue_break_close|time:"H:i" }} - {{ season.tue_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Wed" %}</strong>
                                                {% if season.wed_open %}
                                                    {{ season.wed_open|time:"H:i" }} - {{ season.wed_close|time:"H:i" }}
                                                    {% if season.wed_break_close %}
                                                        | {% trans "Break:" %} {{ season.wed_break_close|time:"H:i" }} - {{ season.wed_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Thu" %}</strong>
                                                {% if season.thu_open %}
                                                    {{ season.thu_open|time:"H:i" }} - {{ season.thu_close|time:"H:i" }}
                                                    {% if season.thu_break_close %}
                                                        | {% trans "Break:" %} {{ season.thu_break_close|time:"H:i" }} - {{ season.thu_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Fri" %}</strong>
                                                {% if season.fri_open %}
                                                    {{ season.fri_open|time:"H:i" }} - {{ season.fri_close|time:"H:i" }}
                                                    {% if season.fri_break_close %}
                                                        | {% trans "Break:" %} {{ season.fri_break_close|time:"H:i" }} - {{ season.fri_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Sat" %}</strong>
                                                {% if season.sat_open %}
                                                    {{ season.sat_open|time:"H:i" }} - {{ season.sat_close|time:"H:i" }}
                                                    {% if season.sat_break_close %}
                                                        | {% trans "Break:" %} {{ season.sat_break_close|time:"H:i" }} - {{ season.sat_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                            <p><strong>{% trans "Sun" %}</strong>
                                                {% if season.sun_open %}
                                                    {{ season.sun_open|time:"H:i" }} - {{ season.sun_close|time:"H:i" }}
                                                    {% if season.sun_break_close %}
                                                        | {% trans "Break:" %} {{ season.sun_break_close|time:"H:i" }} - {{ season.sun_break_open|time:"H:i" }}
                                                    {% endif %}
                                                {% else %}
                                                    {% trans "closed" %}
                                                {% endif %}
                                            </p>
                                        {% endif %}
                                        {% if season.last_entry %}
                                            <div class="last_entry">{% trans "Last entry" %}: {{ season.last_entry }}</div>
                                        {% endif %}
                                        {% if season.exceptions %}
                                            <div class="exceptions">{{ season.get_rendered_exceptions }}</div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                
                                {% if museum.specialopeningtime_set.count %}
                                    <h5>{% trans "Special Opening hours" %}</h5>
                                    {% for special_opening in museum.specialopeningtime_set.all %}
                                        <h6>{% if special_opening.day_label %}{{ special_opening.day_label }}{% endif %}
                                        {{ special_opening.dd }}. {{ special_opening.get_mm_display }} {{ special_opening.yyyy|default:"" }}
                                        </h6>
                                        {% if special_opening.is_closed %}
                                            {% trans "Closed" %}
                                        {% else %}
                                            {% if special_opening.is_regular %}
                                                {% trans "Regular Opening hours" %}
                                            {% else %}
                                                {{ special_opening.opening|time:"H:i" }} - {{ special_opening.closing|time:"H:i" }}
                                                {% if season.sun_break_close %}
                                                    | {% trans "Break:" %} {{ special_opening.break_close|time:"H:i" }} - {{ special_opening.break_open|time:"H:i" }}
                                                {% endif %}
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                            </li>
                        </ul>  
                    </li>
                {% endif %}
                <li class="accordion-group">  
                    <h4 class="accordion-heading">  
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-prices">  
                            {% trans "Prices" %} 
                        </a>  
                    </h4>  
                    <ul id="collapse-prices" class="accordion-body collapse" style="height: 0px; ">  
                        <li class="accordion-inner">
                            {% if museum.free_entrance %}
                                {% trans "Free entrance" %}
                            {% else %}
                                {% if museum.admission_price %}
                                    <p>{% trans "Admission price" %}: {{ museum.admission_price|currencyfmt:"EUR" }}</p>
                                {% endif %}
                                {% if museum.admission_price_info %}
                                    <div class="admission_price_info">
                                        {{ museum.get_rendered_admission_price_info }}
                                    </div>
                                {% endif %}
                                {% if museum.reduced_price %}
                                    <p>{% trans "Reduced price" %}: {{ museum.reduced_price|currencyfmt:"EUR" }}</p>
                                {% endif %}
                                {% if museum.reduced_price_info %}
                                    <div class="reduced_price_info">
                                        {{ museum.get_rendered_reduced_price_info }}
                                    </div>
                                {% endif %}
                                {% if museum.arrangements_for_children %}
                                    <p>{% trans "Arrangements for children" %}:</p>
                                    <div class="arrangements_for_children">
                                        {{ museum.get_rendered_arrangements_for_children }}
                                    </div>
                                {% endif %}
                                {% if museum.free_entrance_for %}
                                    <p>{% trans "Free entrance for" %}:</p>
                                    <div class="free_entrance_for">
                                        {{ museum.get_rendered_free_entrance_for }}
                                    </div>
                                {% endif %}
                                {% if museum.family_ticket %}
                                    <p>{% trans "Family ticket" %}:</p>
                                    <div class="family_ticket">
                                        {{ museum.get_rendered_family_ticket }}
                                    </div>
                                {% endif %}
                                {% if museum.group_ticket %}
                                    <p>{% trans "Group ticket" %}:</p>
                                    <div class="group_ticket">
                                        {{ museum.get_rendered_group_ticket }}
                                    </div>
                                {% endif %}
                                {% if museum.free_entrance_times %}
                                    <p>{% trans "Free entrance times" %}:</p>
                                    <div class="free_entrance_times">
                                        {{ museum.get_rendered_free_entrance_times }}
                                    </div>
                                {% endif %}
                                {% if museum.yearly_ticket %}
                                    <p>{% trans "Yearly ticket" %}:</p>
                                    <div class="yearly_ticket">
                                        {{ museum.get_rendered_yearly_ticket }}
                                    </div>
                                {% endif %}
                                {% if museum.other_tickets %}
                                    <p>{% trans "Other tickets" %}:</p>
                                    <div class="other_tickets">
                                        {{ museum.get_rendered_other_tickets }}
                                    </div>
                                {% endif %}
                                {% if museum.member_of_museumspass %}
                                    <p>{% trans "Member if Museumspass Berlin" %}</p>
                                {% endif %}
                            {% endif %}
                        </li>
                    </ul>  
                </li>  
                <li class="accordion-group">  
                    <h4 class="accordion-heading">  
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-services">  
                            {% filter fix_ampersands %}{% trans "Services" %}{% endfilter %} 
                        </a>  
                    </h4>  
                    <ul id="collapse-services" class="accordion-body collapse" style="height: 0px; ">
                        <li class="accordion-inner">
                            {% if museum.service_shop or museum.service_books or museum.service_restaurant or museum.service_cafe or museum.service_library or musuem.service_archive or musuem.service_studio or museum.service_online or museum.service_diaper_changing_table or musuem.service_birthdays or museum.service_rent or musuem.service_other %}
                                <h5>{% trans "Services" %}</h5>
                                {% if museum.service_shop %}
                                    <span class="icon icon-shop" rel="tooltip" data-placement="top" data-original-title="{% trans "Shop" %}" >{% trans "Shop" %}</span>
                                {% endif %}
                                {% if museum.service_restaurant %}
                                    <span class="icon icon-restaurant" rel="tooltip" data-placement="top" data-original-title="{% trans "Restaurant" %}" >{% trans "Restaurant" %}</span>
                                {% endif %}
                                {% if museum.service_cafe %}
                                    <span class="icon icon-cafe" rel="tooltip" data-placement="top" data-original-title="{% trans "Cafe" %}" >{% trans "Cafe" %}</span>
                                {% endif %}
                                {% if museum.service_library %}
                                    <span class="icon icon-library" rel="tooltip" data-placement="top" data-original-title="{% trans "Library" %}" >{% trans "Library" %}</span>
                                {% endif %}
                                {% if musuem.service_archive %}
                                    <span class="icon icon-archive" rel="tooltip" data-placement="top" data-original-title="{% trans "Archive" %}" >{% trans "Archive" %}</span>
                                {% endif %}
                                {% if museum.service_diaper_changing_table %}
                                    <span class="icon icon-diaper" rel="tooltip" data-placement="top" data-original-title="{% trans "Diaper changing table" %}" >{% trans "Diaper changing table" %}</span>
                                {% endif %}
                            {% endif %}
                        </li>
                    </ul>  
                </li>  
                <li class="accordion-group">  
                    <h4 class="accordion-heading">  
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-accessibility">  
                            {% filter fix_ampersands %}{% trans "Accessibility" %}{% endfilter %} 
                        </a>  
                    </h4>  
                    <ul id="collapse-accessibility" class="accordion-body collapse" style="height: 0px; ">
                        <li class="accordion-inner">
                            {% if museum.accessibility or museum.accessibility_options.count %}
                                <h5>{% trans "Accessibility" %}</h5>
                                {% for opt in museum.accessibility_options.all %}
                                    <img alt="{{ opt.title|escape }}" title="{{ opt.title|escape }}" src="{{ MEDIA_URL }}{{ opt.image }}" />
                                {% endfor %}
                                {% if museum.accessibility %}
                                    <div class="accessibility">
                                        {{ museum.get_rendered_accessibility }}
                                    </div>
                                {% endif %}
                            {% endif %}
                        </li>
                    </ul>  
                </li>  
                {% if museum.has_audioguide or museum.has_audioguide_for_children or museum.has_audioguide_for_learning_difficulties or museum.group_bookings_phone_number or museum.service_phone_number %}
                    <li class="accordion-group">  
                        <h4 class="accordion-heading">  
                            <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-mediation-offer">   {% trans "Mediation offer" %} 
                            </a>  
                        </h4>  
                        <ul id="collapse-mediation-offer" class="accordion-body collapse" style="height: 0px; ">
                            <li class="accordion-inner">
                                <h5>{% trans "Mediation offer" %}</h5>
                                <div class="audioguides">
                                    {% if museum.has_audioguide %}
                                        <p>{% trans "There are audioguides in the following languages:" %}</p>
                                        <ul>
                                            {% for lang in museum.get_audioguide_languages %}
                                                <li>{{ lang }}</li>
                                            {% endfor %}
                                        </ul>
                                    {% endif %}
                                    {% if museum.has_audioguide_for_children %}
                                        <p>{% trans "There is an audioguide for children." %}</p>
                                    {% endif %}
                                    {% if museum.has_audioguide_for_learning_difficulties %}
                                        <p>{% trans "There is an audioguide for people with learning difficulties." %}</p>
                                    {% endif %}
                                </div>
                                <div class="phones">
                                    {% if museum.group_booking_phone_number %}
                                        <dl class="phone inset">
                                            <dt>{% trans "Phone for group booking" %}</dt>
                                            <dd>+{{ museum.group_booking_phone_country }} ({{ museum.group_booking_phone_area }}) {{ museum.group_booking_phone_number }}</dd>
                                        </dl>
                                    {% endif %} 
                                    {% if museum.service_phone_number %}
                                        <dl class="phone inset">
                                            <dt>{% trans "Service Phone" %}</dt>
                                            <dd>+{{ museum.service_phone_country }} ({{ museum.service_phone_area }}) {{ museum.service_phone_number }}</dd>
                                        </dl>
                                    {% endif %} 
                                </div>
                                {% with museum.get_workshops as workshops %}
                                    {% if workshops %}
                                        <div class="workshops">
                                            <h6>{% trans "Workshops" %}</h6>
                                            {% for workshop in workshops %}
                                                <div><a href="{{ workshop.get_url_path }}">{{ workshop.title }}</a></div>
                                                {% with workshop.workshoptime_set.all.0 as wtime %}
                                                    <div>{{ wtime.workshop_date|date:"j. F Y" }} {{ wtime.start|time:"H:i" }} - {{ wtime.end|time:"H:i" }}</div>
                                                {% endwith %}
                                            {% endfor %}
                                        </div>
                                    {% endif %}
                                {% endwith %}
                            </li>
                        </ul>  
                    </li>  
                {% endif %}
                <li class="accordion-group">  
                    <h4 class="accordion-heading">  
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-additional-exhibitions">{% trans "Additional Exhibitions" %}</a>  
                    </h4>  
                    <ul id="collapse-additional-exhibitions" class="accordion-body collapse">
                        <li class="accordion-inner">
                            <ul id="kurze_zeit" class="list compact">
                            {% for exhibition in object.get_published_exhibitions %}
                                <li class="item">
                                    {% if exhibition.cover_image %}
                                        <a class="img" href="{{ exhibition.get_url_path }}" style="background-image: url({{ MEDIA_URL }}{{ exhibition.cover_image }})"></a>
                                    {% endif %}
                                        <a href="{{ exhibition.get_url_path }}">
                                            <h4>{{ exhibition.museum.title }}</h4>
                                            <h3>{{ exhibition.title }}</h3>
                                            <h5>{{ exhibition.start|date:"d.m.Y" }} {% trans "till" %} {{ exhibition.end|date:"d.m.Y" }}</h5>
                                        </a>
                                </li>
                            {% endfor %}
                            </ul>
                        </li>
                    </ul>  
                </li> 

                <li class="accordion-group">  
                    <h4 class="accordion-heading">  
                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapse-twitterfeed">{% trans "Twitter" %}</a>  
                    </h4>  
                    <ul id="collapse-twitterfeed" class="accordion-body collapse">
                        <li class="accordion-inner">
                            <ul>
                                <li>
                                    <span class="text">Onlinetickets für die Lange Nacht der Museen gibt es ab heute bei uns auf dem Museumsportal: <a href="http://t.co/qEI1suuo">http://t.co/qEI1suuo</a> <a href="http://twitter.com/MuseumsnachtB">@MuseumsnachtB</a></span>
                                    <a class="time" href="http://twitter.com/#!/museumsportal/status/303496870301421568">15 Stunden, 19 Minuten ago</a>
                                </li>
                                <li>
                                    <span class="text">Onlinetickets für die Lange Nacht der Museen gibt es ab heute bei uns auf dem Museumsportal: <a href="http://t.co/qEI1suuo">http://t.co/qEI1suuo</a> <a href="http://twitter.com/MuseumsnachtB">@MuseumsnachtB</a></span>
                                    <a class="time" href="http://twitter.com/#!/museumsportal/status/303496870301421568">15 Stunden, 19 Minuten ago</a>
                                </li>
                                <li>
                                    <span class="text">Onlinetickets für die Lange Nacht der Museen gibt es ab heute bei uns auf dem Museumsportal: <a href="http://t.co/qEI1suuo">http://t.co/qEI1suuo</a> <a href="http://twitter.com/MuseumsnachtB">@MuseumsnachtB</a></span>
                                    <a class="time" href="http://twitter.com/#!/museumsportal/status/303496870301421568">15 Stunden, 19 Minuten ago</a>
                                </li>
                            </ul>
                        </li>
                    </ul>  
                </li> 
            </ul> 

        </section>

        <section class="sidebar" style="display: none">
            <dl id="bvg_widget" class="bvg">
                {% if LANGUAGE_CODE == "de" %}
                    <dt>So erreichen Sie uns</dt>
                    <dd>
                        <a id="bvg_logo" href="http://www.bvg.de/index.php/de/9430/name/Widgets.html" target="_blank" name="logo">&nbsp;</a>
                        <form method="post" target="_blank" action="http://www.fahrinfo-berlin.de/Fahrinfo/bin/" name="fahrinfo_formular" id="fahrinfo_formular">
                            <fieldset class="clearfix">
                            
                                <input type="hidden" name="REQ0JourneyStopsS0ALocation" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsS0AAddress" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsS0APOI" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsZ0ALocation" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsZ0AAddress" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsZ0APOI" value="1" />

                                <input type="hidden" name="REQ0JourneyStopsZA1" value="7"/>
                                <input type="hidden" name="_charset_" value="utf-8"/>
                                <input type="hidden" value="yes" name="start"/>
                            
                                <ul>
                                <li>
                                    <label for="wdgt_from">Von</label>
                                    <input placeholder="Standort" type="text" name="from" id="wdgt_from" value="">
                                </li>
                                
                                <li>
                                    <label for="wdgt_to">Nach</label>
                                    <textarea name="to" id="wdgt_to" >{{ museum.street_address }},&#10;{{ museum.postal_code }} {{ museum.city }}</textarea>
                                </li>
                                
                                <li>
                                    <label for="wdgt_date">Am</label>
                                    <input type="text" name="date" id="wdgt_date" value="{% now "d.m.Y" %}">
                                </li>
                                
                                <li>
                                    <label for="wdgt_time">Um</label>
                                    <input type="text" name="time" id="wdgt_time" value="{% now "H:i" %}">
                                </li>
                                
                                <li class="radios">
                                    <label for="wdgt_arr">Ankunft</label>
                                    <input id="wdgt_arr" type="radio" class="radio" name="timesel" value="arrive">
                                    
                                    <label for="wdgt_dep">Abfahrt</label>
                                    <input id="wdgt_dep" type="radio" class="radio" name="timesel" value="depart" checked="checked">
                                    </li>
                                    <li>
                                        <input id="submit" type="submit" name="start" value="Anfrage abschicken">
                                    </li>
                                    </ul>
                            </fieldset>
                        </form>
                    </dd>
                {% else %}
                    <dt>How to get there</dt>
                    <dd>
                        <a id="bvg_logo" href="http://www.bvg.de/index.php/de/9430/name/Widgets.html" target="_blank" name="logo">&nbsp;</a>
                        
                        <form method="post" target="_blank" action="http://www.fahrinfo-berlin.de/Fahrinfo/bin/query.bin/en?ld=0.1" name="fahrinfo_formular" id="fahrinfo_formular">
                            <fieldset class="clearfix">
                                <input type="hidden" name="REQ0JourneyStopsS0ALocation" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsS0AAddress" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsS0APOI" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsZ0ALocation" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsZ0AAddress" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsZ0APOI" value="1" />
                                <input type="hidden" name="REQ0JourneyStopsZA1" value="7"/>
                                <input type="hidden" name="_charset_" value="utf-8"/>
                                <input type="hidden" value="yes" name="start"/>
                                <ul>
                                    <li>
                                        <label for="wdgt_from">From</label>
                                        <input placeholder="Location" type="text" name="from" id="wdgt_from" value="">
                                    </li>
                                    <li>
                                        <label for="wdgt_to">To</label>
                                        <textarea name="to" id="wdgt_to" >{{ museum.postal_code }} {{ museum.city }} &#10;{{ museum.street_address }}</textarea>
                                    </li>
                                    <li>
                                        <label for="wdgt_date">Date</label>
                                        <input type="text" name="date" id="wdgt_date" value="{% now "d.m.Y" %}">
                                    </li>
                                    <li>
                                        <label for="wdgt_time">Time</label>
                                        <input type="text" name="time" id="wdgt_time" value="{% now "H:i" %}">
                                    </li>
                                    <li class="radios">
                                        <label for="wdgt_arr">Arrival</label>
                                        <input id="wdgt_arr" type="radio" class="radio" name="timesel" value="arrive">
                                        <label for="wdgt_dep">Departure</label>
                                        <input id="wdgt_dep" type="radio" class="radio" name="timesel" value="depart" checked="checked">
                                    </li>
                                    <li>
                                        <input id="submit" type="submit" name="start" value="Submit request">
                                    </li>
                                </ul>
                            </fieldset>
                        </form>
                    </dd>
                {% endif %}
                <script type="text/javascript">
                $('#fahrinfo_formular').submit(function() {
                    $('#wdgt_from').val($('#wdgt_from').val().replace(/([Ss]tr)a(ß|ss)e/, "$1."));
                    $('#wdgt_to').val($('#wdgt_to').val().replace(/([Ss]tr)a(ß|ss)e/, "$1."));
                })
                </script>
            </dl>
            
            {% if museum.website %}
                <dl class="website">
                    <dt>{% trans "Website" %}</dt>
                    <dd><a href="{{ museum.website }}">{{ museum.website }}</a></dd>
                </dl>
            {% endif %} 
            <dl class="categories">
                <dt>{% trans "Categories" %}</dt>
                <dd>
                    {% for cat in museum.categories.all %}
                        <a href="{% if request.LANGUAGE_CODE == "de" %}{% url de:museum_list %}{% else %}{% url en:museum_list %}{% endif %}?category={{ cat.id }}">{{ cat.title }}</a>{% if not forloop.last %}, {% endif %}
                    {% endfor %}
                </dd>
            </dl>
            
            {% if museum.open_on_mondays or museum.free_entrance %}
                <dl class="additional">
                    <dt>{% trans "Plus" %}</dt>
                    {% if museum.open_on_mondays %}
                        <dd>
                            {% trans "Open on Mondays" %}
                        </dd>
                    {% endif %}
                    {% if museum.free_entrance %}
                        <dd>
                         {% trans "Free entrance" %}
                        </dd>
                    {% endif %}
                </dl>
            {% endif %}
        </section>




<!-- Article
================================================== -->




           
        <article class="with_sidebar">
            <header>
                <h1>{{ museum.title }} 
                    {% if museum.subtitle %}
                    <span>{{ museum.subtitle }}</span>
                    {% endif %}
                </h1>
            </header>
            
            {{ museum.get_rendered_description }}

            <ul class="tags">
                {% if museum.categories.count %}
                    {% for cat in museum.categories.all %}
                        <li class="cat"><a href="{% if LANGUAGE_CODE == "de" %}/de/museen/{% else %}/en/museums/{% endif %}#filter=.cat_{{ cat.title|slugify }}">{{ cat.title }}</a></li>
                    {% endfor %}
                {% endif %}
                {% tags_for_object museum as tags %}
                {% if tags %}
                    {% for tag in tags %}
                        <li><a href="{% if LANGUAGE_CODE == "de" %}/de/museen/{% else %}/en/museums/{% endif %}#filter=.tag_{{ tag.slug }}">{{ tag.name }}</a></li>
                    {% endfor %}
                {% endif %}
            </ul>   

        </article>
    </div>
</div>


<div class="content clearfix">
    <div class="inner">
        <article id="images" >
            <ul class="images clearfix">
            {% for mf in museum.mediafile_set.all %}
                <li class="item">
                    <div class="inner">
                        <img src="{{ MEDIA_URL }}{{ mf.path.path }}" alt="" />
                        {% with mf.path|file_description as file_desc %}
                            <div class="info">
                                {% if file_desc.title %}
                                    <span class="title">{{ file_desc.title }}</span>
                                {% endif %}
                                {% if file_desc.description %}
                                    <span class="description">{{ file_desc.description }}</span>
                                {% endif %}
                                {% if file_desc.author %}
                                    <span class="author">{{ file_desc.author }}</span>
                                {% endif %}
                            </div>
                        {% endwith %}
                    </div>
                     <nav class="actions">
                        <button rel="tooltip" data-placement="top" data-original-title="Add to Favorites" class="favorite icon icon-favorite"></button>
                        <button rel="tooltip" data-placement="top" data-original-title="Fullscreen" class="fullscreen icon icon-fullscreen"></button>
                    </nav>
                </li>
            {% endfor %}
            </ul>
        </article>
    </div>
</div>




<!-- image gallery
================================================== -->




<div id="gallery" class="info">
    <div id="slider" class="swipe">
      <ul>
        {% for mf in museum.mediafile_set.all %}
        <li style="display:{% if forloop.first %}block{% else %}none{% endif %}">
            &nbsp;
            <div class="img" style="background-image: url({{ MEDIA_URL }}{{ mf.path.path }})"> </div>
            {% with mf.path|file_description as file_desc %}
                <div class="info">
                    {% if file_desc.title %}
                        <span class="title">{{ file_desc.title }}</span>
                    {% endif %}
                    {% if file_desc.description %}
                        <span class="description">{{ file_desc.description }}</span>
                    {% endif %}
                    {% if file_desc.author %}
                        <span class="author">{{ file_desc.author }}</span>
                    {% endif %}
                </div>
            {% endwith %}
        </li>
        {% endfor %}
      </ul>
    </div>
    
    <span class="prev" onclick="slider.prev();return false;"></span>
    <span class="next" onclick="slider.next();return false;"></span>
    
    <nav>
        <button class="cancel"></button>
    </nav>
</div>

{% endwith %}

<div class="content clearfix">
    <div class="inner">
        <h2>{% trans "Museums with the same categories" %}</h2>
        <ul id="container" class="list tiles small clearfix"> 
            {% for museum in object.get_museums_with_the_same_categories %}
                <li class="item">
                   
                    <a class="img" href="{{ museum.get_url_path }}" {% if museum.cover_image %} data-background="{{ MEDIA_URL }}{{ museum.cover_image|modified_path:"museum_list" }}"{% endif %}>
                        <span class="spinner loading"></span>
                        
                    </a>

                    <nav class="actions">
                        <button rel="tooltip" data-placement="top" data-original-title="Add to Favorites" class="favorite icon icon-favorite"></button>
                        <button href="#" rel="tooltip" data-placement="top" data-original-title="Show location on map" class="marker-link icon icon-location"></button>
                    </nav>
                    
                     <a href="{{ museum.get_url_path }}">
                        <h3>{{ museum.title }}</h3>
                        <h4>{{ museum.subtitle }}</h4>
                    </a>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>



<!-- page controls
================================================== -->




<div id="page-controls">
    {% if prev_item %}
        <a href="{{ prev_item.get_url_path }}" class="prev">
            <span>
                <span class="title">{{ next_item.title }}</span>
            </span>
        </a>
    {% endif %}
    {% if next_item %}
        <a href="{{ next_item.get_url_path }}" class="next">
            <span>
                <span class="title">{{ next_item.title }}</span>
            </span>
        </a>
    {% endif %}
</div>

<script src="{{ STATIC_URL }}site/js/swipe.js"></script>

<script type="text/javascript">
    var slider = new Swipe(document.getElementById('slider'));

    $(window).load(function() {
        $('#gallery .cancel').click(function(e){
            $('body').toggleClass('gallery');
        });

        $('.images li').click(function(e){
            $('body').toggleClass('gallery');
            slider.slide($(this).index(), 0);
        });

        $('#gallery .info').click(function(e){
            $('#gallery').toggleClass('info');
        });

        $('.accordion-body').collapse('show');
    });
    

    // $(function(){
    //   var liWidths = [];
    //   $('ul.fillwidth').fillwidth({ liWidths: liWidths });
    // });
    
    $(window).load(function() {
        $('.images').isotope({
            itemSelector : '.item',
            layoutMode : 'masonry',
            masonry: {
                columnWidth: 340
            }
        });
    });
</script>

<script>
  $(function () {
    $(".sticky").stickySidebar({
        speed: 0
      , padding: 0
      , constrain: true
    });
    $(".remove").click(function (ev) {
      ev.preventDefault();
      $("#" + this.rel).stickySidebar("remove");
    });
    $("#destroyAll").click(function (ev) {
      ev.preventDefault();
      $(".sticky").stickySidebar("destroy");
    });
  });
</script>

<script>
$(document).keydown(function(e){
    switch(e.which) {
        case 37: // left
            document.location.href="{{ prev_item.get_url_path }}";
        break;

        case 38: // up
            document.location.href="/de/museen/";
        break;

        case 39: // right
            document.location.href="{{ next_item.get_url_path }}";
        break;

        case 40: // down
        break;

        default: return; // exit this handler for other keys
    }
    e.preventDefault();
});
</script>
{% endblock %}
