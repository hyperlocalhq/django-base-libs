{% load base_tags fb_tags i18n image_modifications %}
    <div class="container">
        <div class="row" id="images">
            {% for mf in object.mediafile_set.all %}
                {% with mf.path|file_description as file_desc %}
                    <div class="item col-xs-12 col-sm-6 col-md-4 col-lg-4">
                        <div class="inner">
                            <img src="{{ MEDIA_URL }}{{ mf.path|modified_image:"max" }}" alt="{{ file_desc.description|remove_newlines|escape }}" title="{{ file_desc.description|remove_newlines|escape }}" />
                            <div class="info">
                                {% if file_desc.title %}
                                    <span class="title">{{ file_desc.title }}</span>
                                {% endif %}
                                {% if file_desc.description %}
                                    <span class="description">{{ file_desc.description }}</span>
                                {% endif %}
                                {% if file_desc.author %}
                                    <span class="author">{{ file_desc.author }}</span>
                                {% endif %}
                            </div>
                        </div>
                        <nav class="actions">
                            <button rel="tooltip" data-placement="top" data-original-title="{% trans "Fullscreen" %}" class="fullscreen icon icon-white icon-fullscreen"></button>
                        </nav>
                    </div>
                {% endwith %}
            {% endfor %}
        </div>
    </div>

<script type="text/javascript">
    $(window).load(function() {
        $('.images').isotope({
            itemSelector : '.item',
            layoutMode : 'masonry',
            masonry: {
                columnWidth: 340
            }
        });
        if (!$.browser.msie || parseInt($.browser.version.split(".")[0], 10) > 8) {
            $('.images li').click(function(e){
                $('body').toggleClass('gallery');
                slider.slide($(this).index(), 0);
            });
        }
    });
</script>