{% extends "exhibitions/forms/base.html" %}
{% load crispy_forms_tags %}

{% block stylesheet %}
    {{ block.super }}
    <link href="{{ jetson_media_url }}js/jquery/autocomplete_1.0/jquery.autocomplete.css" rel="stylesheet" />
    <link href="{{ STATIC_URL }}site/css/jquery.tagsinput.css" rel="stylesheet" />
{% endblock %}

{% block js %}
    {{ block.super }}
    <script src="{{ jetson_media_url }}js/jquery/autocomplete_1.0/jquery.bgiframe.min.js"></script>
    <script src="{{ jetson_media_url }}js/jquery/autocomplete_1.0/jquery.autocomplete.js"></script>
    <script src="{{ jetson_media_url }}js/admin/autocomplete.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.tagsinput.js"></script>
{% endblock %}

{% block bodyclass %}map_visible{% endblock %}

{% block multistep_form %}
    {% crispy form %}
    <script src="http://maps.google.com/maps/api/js?sensor=false&amp;language={{ LANGUAGE_CODE }}&amp;region=DE"></script>
    <script src="{{ STATIC_URL }}site/js/gmaps_for_address.js"></script>
    <script>
        $(function() {
            $('.dateinput').datepicker({
                format: 'yyyy-mm-dd',
                weekStart: 1
            })
            $('.timeinput').timepicker();
            $('#id_tags').tagsInput();
            $('#id_museum').change(function() {
                $.get('/helper/museum_attrs/' + $(this).val() + '/', function(data) {
                    $('#id_location_name').val(data['title']);
                    $('#id_street_address').val(data['street_address']);
                    $('#id_street_address2').val(data['street_address2']);
                    $('#id_postal_code').val(data['postal_code']);
                    $('#id_city').val(data['city']);
                    $('#id_latitude').val(data['latitude']);
                    $('#id_longitude').val(data['longitude']);
                    $('#dyn_locate_geo').click();
                }, 'json');
            });
        });
    </script>
{% endblock %}
