{% load i18n %}
<!-- element -->
<div class="grp-module grp-collapse grp-closed{% if contact_form.instance.pk or contact_form.show_url %} has_original{% endif %}{% if prefix == "__prefix__" %} grp-empty-form{% endif %} grp-dynamic-form"
     id="institutionalcontact_set{% if prefix == "__prefix__" %}-empty{% else %}{{ prefix }}{% endif %}">
    <h3 class="grp-collapse-handler">{% trans "Contact" %}{% if prefix != "__prefix__" %} #{{ counter }}{% endif %}&nbsp;&nbsp;{% if contact_form.instance.pk %}{{ contact_form.instance }}{% endif %}</h3>

    <ul class="grp-tools">
        {% if contact_form.show_url %}
            <li class="grp-viewsite-link-container">
                <a href="../../../r/{{ contact_form.instance.content_type_id }}/{{ contact_form.instance.id }}/"
                   class="grp-icon grp-viewsite-link"
                   title="{% trans 'View on Site' %}"
                   target="_blank"></a>
            </li>{% endif %}
        {% if contact_formset.can_delete %}
            {% if contact_form.instance.pk %}
                <li class="grp-delete-handler-container">{{ contact_form.DELETE }}
                    <a href="javascript://" class="grp-icon grp-delete-handler" title="{% trans 'Delete Item' %}"></a>
                </li>
            {% else %}
                <li class="grp-remove-handler-container">{{ contact_form.DELETE }}
                    <a href="javascript://" class="grp-icon grp-remove-handler" title="{% trans 'Delete Item' %}"></a>
                </li>
            {% endif %}
        {% endif %}
    </ul>
    {% if contact_form.form.non_field_errors %}{{ contact_form.form.non_field_errors }}{% endif %}
    <fieldset class="grp-module grp-aligned">
        <div class="grp-row grp-cells-1{% if contact_form.location_type.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    <label{% if contact_form.location_type.field.required %} class="required"{% endif %}
                                                                             for="id_institutionalcontact_set-{{ prefix }}-location_type">{{ contact_form.location_type.label }}</label>
                </div>
                <div class="c-2">
                    {{ contact_form.location_type }}
                    {% if contact_form.location_type.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.location_type.errors|join:", " }}</li>
                        </ul>
                    {% endif %}

                    {% if contact_form.location_type.help_text %}
                        <p class="grp-help">{{ contact_form.location_type.help_text }}</p>{% endif %}
                </div>
            </div>
        </div>
        <div class="grp-row grp-cells-1{% if contact_form.is_primary.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    &nbsp;
                </div>
                <div class="c-2">
                    {{ contact_form.is_primary }}
                    <label class="vCheckboxLabel"
                           for="id_institutionalcontact_set-{{ prefix }}-is_primary">{{ contact_form.is_primary.label }}</label>
                    {% if contact_form.is_primary.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.is_primary.errors|join:", " }}</li>
                        </ul>
                    {% endif %}
                    {% if contact_form.is_primary.help_text %}
                        <p class="grp-help">{{ contact_form.is_primary.help_text }}</p>{% endif %}
                </div>
            </div>
        </div>
        <div class="grp-row grp-cells-1{% if contact_form.is_billing_address.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    &nbsp;
                </div>
                <div class="c-2">
                    {{ contact_form.is_billing_address }}
                    <label class="vCheckboxLabel"
                           for="id_institutionalcontact_set-{{ prefix }}-is_billing_address">{{ contact_form.is_billing_address.label }}</label>
                    {% if contact_form.is_billing_address.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.is_billing_address.errors|join:", " }}</li>
                        </ul>
                    {% endif %}
                    {% if contact_form.is_billing_address.help_text %}
                        <p class="grp-help">{{ contact_form.is_billing_address.help_text }}</p>{% endif %}
                </div>
            </div>
        </div>
        <div class="grp-row grp-cells-1{% if contact_form.is_shipping_address.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    &nbsp;
                </div>
                <div class="c-2">
                    {{ contact_form.is_shipping_address }}
                    <label class="vCheckboxLabel"
                           for="id_institutionalcontact_set-{{ prefix }}-is_shipping_address">{{ contact_form.is_shipping_address.label }}</label>
                    {% if contact_form.is_primary.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.is_shipping_address.errors|join:", " }}</li>
                        </ul>
                    {% endif %}
                    {% if contact_form.is_shipping_address.help_text %}
                        <p class="grp-help">{{ contact_form.is_shipping_address.help_text }}</p>{% endif %}
                </div>
            </div>
        </div>
        <div class="grp-row grp-cells-1{% if contact_form.location_title.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    <label{% if contact_form.location_title.field.required %} class="required"{% endif %}
                                                                              for="id_institutionalcontact_set-{{ prefix }}-location_title">{{ contact_form.location_title.label }}</label>
                </div>
                <div class="c-2">
                    {{ contact_form.location_title }}
                    {% if contact_form.location_title.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.location_title.errors|join:", " }}</li>
                        </ul>
                    {% endif %}

                    {% if contact_form.location_title.help_text %}
                        <p class="grp-help">{{ contact_form.location_title.help_text }}</p>{% endif %}
                </div>
            </div>
        </div>
    </fieldset>
    {% include "extendedadmin/includes/fieldset_phones.html" %} {% include "extendedadmin/includes/fieldset_emails.html" %} {% include "extendedadmin/includes/fieldset_websites.html" %} {% include "extendedadmin/includes/fieldset_ims.html" %}

    {% include "extendedadmin/includes/fieldset_contact_form.html" %}

    <fieldset class="grp-module grp-aligned availability collapse closed">
        <h4 class="grp-collapse-handler">{% trans "Availability" %}</h4>
        <div class="grp-row grp-cells-1{% if contact_form.is_temporary.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    &nbsp;
                </div>
                <div class="c-2">
                    {{ contact_form.is_temporary }}
                    <label class="vCheckboxLabel"
                           for="id_institutionalcontact_set-{{ prefix }}-is_temporary">{{ contact_form.is_temporary.label }}</label>
                    {% if contact_form.is_temporary.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.is_temporary.errors|join:", " }}</li>
                        </ul>
                    {% endif %}
                    {% if contact_form.is_temporary.help_text %}
                        <p class="grp-help">{{ contact_form.is_temporary.help_text }}</p>{% endif %}
                </div>
            </div>
        </div>
        <div class="grp-row grp-cells-1{% if contact_form.validity_start_dd.errors or contact_form.validity_start_mm.errors or contact_form.validity_start_yyyy.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    <label
                            {% if contact_form.validity_start_dd.field.required or contact_form.validity_start_mm.field.required or contact_form.validity_start_yyyy.field.required %}
                                class="required"{% endif %}>{% trans "From" %}</label>
                </div>
                <div class="c-2">
                    <span class="grp-inline-fields">{{ contact_form.validity_start_dd }}</span>
                    <span class="grp-inline-fields">{{ contact_form.validity_start_mm }}</span>
                    <span class="grp-inline-fields">{{ contact_form.validity_start_yyyy }}</span>
                    {% if contact_form.validity_start_dd.errors or contact_form.validity_start_mm.errors or contact_form.validity_start_yyyy.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.validity_start_dd.errors|join:", " }}</li>
                            <li>{{ contact_form.validity_start_mm.errors|join:", " }}</li>
                            <li>{{ contact_form.validity_start_yyyy.errors|join:", " }}</li>
                        </ul>
                    {% endif %}

                    {% if contact_form.validity_start_dd.help_text or contact_form.validity_start_mm.help_text or contact_form.validity_start_yyyy.help_text %}
                        <p class="grp-help">
                            {{ contact_form.validity_start_dd.help_text }} {{ contact_form.validity_start_mm.help_text }} {{ contact_form.validity_start_yyyy.help_text }}
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>
        <div class="grp-row grp-cells-1{% if contact_form.validity_end_dd.errors or contact_form.validity_end_mm.errors or contact_form.validity_end_yyyy.errors %} grp-errors{% endif %}">
            <div class="l-2c-fluid l-d-4">
                <div class="c-1">
                    <label
                            {% if contact_form.validity_end_dd.field.required or contact_form.validity_end_mm.field.required or contact_form.validity_end_yyyy.field.required %}
                                class="required"{% endif %}>{% trans "Till" %}</label>
                </div>
                <div class="c-2">
                    <span class="grp-inline-fields">{{ contact_form.validity_end_dd }}</span>
                    <span class="grp-inline-fields">{{ contact_form.validity_end_mm }}</span>
                    <span class="grp-inline-fields">{{ contact_form.validity_end_yyyy }}</span>
                    {% if contact_form.validity_end_dd.errors or contact_form.validity_end_mm.errors or contact_form.validity_end_yyyy.errors %}
                        <ul class="errorlist">
                            <li>{{ contact_form.validity_end_dd.errors|join:", " }}</li>
                            <li>{{ contact_form.validity_end_mm.errors|join:", " }}</li>
                            <li>{{ contact_form.validity_end_yyyy.errors|join:", " }}</li>
                        </ul>
                    {% endif %}

                    {% if contact_form.validity_end_dd.help_text or contact_form.validity_end_mm.help_text or contact_form.validity_end_yyyy.help_text %}
                        <p class="grp-help">
                            {{ contact_form.validity_end_dd.help_text }} {{ contact_form.validity_end_mm.help_text }} {{ contact_form.validity_end_yyyy.help_text }}
                        </p>
                    {% endif %}
                </div>
            </div>
        </div>
    </fieldset>
    {{ contact_form.id }}
</div>
