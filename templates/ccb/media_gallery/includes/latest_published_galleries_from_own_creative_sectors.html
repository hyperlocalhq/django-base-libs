{% load i18n base_tags image_mods_tags favorites %}
{% comment %}<!--
Usage in any template:
    {% load base_tags %}

    Simple:
    {% include_parsed "media_gallery/includes/latest_published_galleries.html" %}

    Customized:
    {% include_parsed "media_gallery/includes/latest_published_galleries.html" with 5 as amount %}

-->{% endcomment %}

{% with amount|default:5 as amount %}
    {% get_objects newest_from_own_creative_sectors media_gallery.MediaGallery amount as newest_objects %}
    {% if newest_objects %}
        <div class="row slider portfolio">
            <div class="wrapper">
                {% for gallery in newest_objects %}
                    {% with content_object=gallery.content_object first_media_file_path=gallery.mediafile_set.first.path|modified_path:"portfolio_slide" %}
                        {% if first_media_file_path %}
                            <div class="col-xs-12 slide">
                                <a class="content" href="{{ content_object.get_url_path }}portfolio/">
                                    <span class="image-hover-bg">
                                        <img src="{{ UPLOADS_URL }}{{ first_media_file_path }}" alt="{{ content_object.get_title|escape }}" />
                                        {% if gallery.photo_author %}<span class="photo-credits-over">{% trans "Photo" %}: {{ gallery.photo_author }}</span>{% endif %}
                                    </span>
                                    <h2>{{ content_object.get_title }}</h2>
                                </a>
                                <div class="button-group">
                                    {% if request.user.is_authenticated %}
                                        {% adding2favorites for content_object using "generic/favorite_icon.html" %}
                                    {% else %}
                                        <a rel="nofollow" href="{% url 'login' %}?goto_next={{ request.path }}" class="fawesome fa-favorite button"><span class="sr-only">{% trans "Add to favorites" %}</span></a>
                                    {% endif %}
                                </div>
                            </div>
                        {% endif %}
                    {% endwith %}
                {% endfor %}
            </div>
        </div>
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/slider.js"></script>
    {% else %}
        <p class="intro">{% trans "There are no portfolios." %}</p>
    {% endif %}
{% endwith %}
