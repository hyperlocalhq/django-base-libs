{% extends "media_gallery/portfolio_base.html" %}
{% load i18n base_tags babel auth_extended infoblocks image_mods_tags %}
{% load favorites %}

{% block open_graph %}
    <meta property="og:title" content="{{ gallery.get_title }}"/>
    <meta property="og:type" content="album"/>
    {% if gallery.cover_image %}
        <meta property="og:image" content="{{ website_url|slice:":-1" }}{{ UPLOADS_URL }}{{ gallery.cover_image.path }}"/>
    {% elif gallery.mediafile_set.all.0.get_list_image_url %}
        <meta property="og:image" content="{{ website_url|slice:":-1" }}{{ gallery.mediafile_set.all.0.get_list_image_url }}"/>
    {% else %}
        <meta property="og:image" content="{{ website_url|slice:":-1" }}{{ STATIC_URL }}site/img/default/ccb_logo.gif"/>
    {% endif %}
    <meta property="og:url" content="{{ gallery.get_url }}"/>
    <meta property="og:site_name" content="{{ site_settings.site.name }}"/>
    <meta property="og:description" content="{{ gallery.get_title }} {% trans "of" %} {{ gallery.content_object }}"/>
{% endblock %}


{% block sidebar %}
    
    {{ block.super }}
    
    <div class="button-group">
        {% if request.user.is_authenticated %}
            {% adding2favorites for gallery %}
        {% else %}
            <a href="/login/?goto_next={{ request.path }}" class="fawesome fa-favorite button switch text"><span class="text">{% trans "Favorite" %}</span></a>
        {% endif %}

        {% if perms.media_gallery.change_media_gallery %}
            <a class="fawesome fa-folder-open button text" href="{{ request.path }}manage/" >
                <span class="text">{% trans "Manage Project" %}</span>
            </a>
        {% endif %}
        <br/><br/>
    </div>

{% endblock %}

{% block details %}
    <h2>{{ gallery.title }}</h2>

    {% if gallery.cover_image %}
        <img src="{{ UPLOADS_URL }}{{ gallery.cover_image.path|modified_path:"article" }}" alt=""/>
    {% endif %}
    
    {{ gallery.description|linebreaks }}
    
    {% block gallery_detail %}
    {% endblock %}
    
{% endblock %}



{% block breadcrumbs_details %}
    <li><a href="{{ object.get_url_path }}portfolio/">{% trans "Portfolio" %}</a></li>
    <li>{{ gallery.title }}</li>
{% endblock %}
