{% extends base_template|default:"base_sidebar.html" %}
{% load i18n base_tags cms_tags menu_tags navigation_tags infoblocks uni_form_tags image_mods_tags memos individual_relations groups_networks browsing favorites crispy_forms_tags %}

{% block extrahead %}
    {% if view_type == "map" %}
        <script type="text/javascript">
            //<![CDATA[
            var aGeopositions = [];
            //]]>
        </script>
    {% endif %}
{% endblock %}

{% block title %}{% page_attribute "page_title" %} - {{ category.title }}{% endblock %}

{% block header_image %}
    {% load slideshows_tags %}
    {% if category.slug == "architektur" %}
        {% slideshow "architecture" using "slideshows/header.html" %}
    {% elif category.slug == "bildende-kunst" %}
        {% slideshow "visual_arts" using "slideshows/header.html" %}
    {% elif category.slug == "design" %}
        {% slideshow "design" using "slideshows/header.html" %}
    {% elif category.slug == "eventbranche" %}
        {% slideshow "event_industry" using "slideshows/header.html" %}
    {% elif category.slug == "film-rundfunk" %}
        {% slideshow "film_broadcast" using "slideshows/header.html" %}
    {% elif category.slug == "fotografie" %}
        {% slideshow "photography" using "slideshows/header.html" %}
    {% elif category.slug == "games-interactive" %}
        {% slideshow "games_interactive" using "slideshows/header.html" %}
    {% elif category.slug == "literatur-verlage" %}
        {% slideshow "literature_publishing" using "slideshows/header.html" %}
    {% elif category.slug == "mode-textil" %}
        {% slideshow "fashion_textile" using "slideshows/header.html" %}
    {% elif category.slug == "musik" %}
        {% slideshow "music" using "slideshows/header.html" %}
    {% elif category.slug == "tanz-theater" %}
        {% slideshow "theatre_dance" using "slideshows/header.html" %}
    {% elif category.slug == "werbung-pr" %}
        {% slideshow "advertising_pr" using "slideshows/header.html" %}
    {% endif %}
{% endblock %}

{% block headline %}
    <h1>{{ category.title }}</h1>
{% endblock %}

{% block search_bar %}
    <div class="row">
        <div class="col-xs-12">
            <div class="header-search">
                <div class="fawesome fa-search"><span class="text hidden-xs">{% trans 'Search' %}</span></div>
                <div class="button-group hidden-xs">
                    <div class="fawesome fa-list button active" data-body-class="list" data-body-class-group="profiles"></div>
                    <div class="fawesome fa-grid button" data-body-class="grid" data-body-class-group="profiles"></div>
                </div>
                <div class="result">
                    {% load babel %}{{ current_page.paginator.count|numberfmt }}
                    <span class="text">{% trans 'Profiles' %}</span>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block sidebar %}
    <nav>
        <ul class="accordion navi-box">
            <li class="accordion-inside accordion-trigger opened">
                <div class="accordion-trigger head">{% trans "Architecture" %}</div>
                <ul class="accordion navi-box">
                    {% show_sub_menu 3 3 1 "cms/includes/menu_cms.html" %}
                </ul>
            </li>
            <li></li>
        </ul>
    </nav>

    {% crispy form "ccb_form" %}
{% endblock %}

{% block details %}
    <h2>{% page_attribute "page_title" %}</h2>
    {% if object_list %}
        {% include "utils/abc_filters.html" %}

        <div class="row profile-grid profile-list">

            {% for object in object_list %}

                <div class="col-xs-12 col-sm-6 col-md-4">
                    <div class="wrapper">
                        <a class="content" href="{{ object.get_url_path }}">
                            {% if object.image %}
                                <img src="{{ UPLOADS_URL }}{{ object.image|modified_path:"profile" }}" alt="{{ object.get_title|escape }}"/>
                            {% else %}
                                {% if object.is_institution %}
                                    <img src="{{ STATIC_URL }}site/img/placeholder/institution.png" alt="{{ object.get_title|escape }}"/>
                                {% else %}
                                    <img src="{{ STATIC_URL }}site/img/placeholder/profile.png" alt="{{ object.get_title|escape }}"/>
                                {% endif %}
                            {% endif %}
                            <div class="text">
                                <h2>{{ object.get_title|escape }}</h2>
                                <h3>
                                    {% if object.occupation %}object.occupation{% endif %}
                                    {% if object.get_creative_sectors %}
                                        <span class="feature">
                                            {% for cat in object.get_creative_sectors %}
                                                {{ cat.get_title|escape }}{% if not forloop.last %}, {% endif %}
                                            {% endfor %}
                                        </span>
                                    {% endif %}
                                </h3>
                                <ul>
                                    <li>201 <span class="feature">{% trans "Follower" %}</span></li>
                                    <li>8 <span class="feature">{% trans "Curated lists" %}</span></li>
                                </ul>
                            </div>
                        </a>
                        <div class="button-group">
                            {% if request.user.is_authenticated %}
                                {% if object.is_addable_to_memos %}
                                    {% adding2memos for object using "memos/memo_icon.html" %}
                                {% endif %}
                                {% if object.is_addable_to_favorites or object.is_removable_from_favorites %}
                                    {% with object|get_context_item as context_item %}
                                        {% adding2favorites for context_item using "generic/favorite_contact_icon.html" %}
                                    {% endwith %}
                                {% endif %}
                                {% if object.is_contactable %}
                                    <a href="{{ object.get_url_path }}message/" class="fawesome fa-email button"><span class="sr-only">{% trans "Send a mail" %}</span></a>
                                {% endif %}
                            {% else %}
                                {% adding2memos for object using "memos/memo_icon.html" %}
                                <a href="/login/?goto_next={{ request.path }}" class="fawesome fa-contact button"><span class="sr-only">{% trans "Contact" %}</span></a>
                                <a href="/login/?goto_next={{ person.get_url_path }}message/"  class="fawesome fa-email button"><span class="sr-only">{% trans "Send a mail" %}</span></a>
                            {% endif %}
                        </div>
                    </div>
                </div>

            {% endfor %}

        </div>
        {% include "utils/includes/pagination.html" %}

    {% else %}
        <p>{% trans "No objects found within the selected conditions." %}</p>
    {% endif %}
{% endblock %}

{% block breadcrumbs %}
    {% if not show %}
        <li>{% trans "People" %}</li>
    {% endif %}
    {% if show == "/memos" %}
        <li><a href="/{{ URL_ID_PEOPLE }}/">{% trans "People" %}</a></li>
        <li>{% trans "Memos" %}</li>
    {% endif %}
    {% if show == "/contacts" %}
        <li><a href="/{{ URL_ID_PEOPLE }}/">{% trans "People" %}</a></li>
        <li>{% trans "Contacts" %}</li>
    {% endif %}
    {% if show == "/relationships" %}
        <li><a href="/{{ URL_ID_PEOPLE }}/">{% trans "People" %}</a></li>
        <li>{% trans "Confirmed Contacts" %}</li>
    {% endif %}
{% endblock %}

{% block javascript %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/pagination.js"></script>
{% endblock %}

{% block content_old %}
    {% block tabs %}
        <div id="tabs">
            {#% children_of "people" using "navigation/children_in_tabs.html" %#}
            {% navigation_links "members" using "navigation/includes/navigation_links_in_tabs.html" %}
        </div>
        <hr class="hidden"/>
    {% endblock %}
    {% if object_list %}
        {% include_parsed "utils/includes/sorting_and_pagination.html" with "under-tabs" as css_class %}
        {% include "utils/abc_filters.html" %}
    {% endif %}
    {% include "people/includes/list_type_links.html" %}
    {% if object_list %}
        {% if view_type == "map" %}
            <noscript>{% infoblock "js_warning" %}</noscript>
            <div id="dyn_map" class="to_show">
                <div id="gmap" style="width: 584px; height: 272px; position: relative; float: left;"></div>
            </div>
        {% endif %}
        <div id="object_list">
            {% for member in object_list %}
                {% if view_type == "icons" %}
                    {% include_parsed "network/lists/member_icons.html" with "vcard" as extra_css_classes %}
                {% endif %}
                {% if view_type == "map" %}
                    {% include_parsed "network/lists/member_mapped.html" with "vcard" as extra_css_classes %}
                {% endif %}
            {% endfor %}
        </div>
        {% include "utils/includes/sorting_and_pagination.html" %}
    {% else %}
        <p class="nothing">
            {% trans "No objects found within the selected conditions." %}
        </p>
    {% endif %}
{% endblock %}

{% block extrabody_old %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/generic.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/individual_relations.js"></script>
    {% if view_type == "map" %}
        <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?language={{ LANGUAGE_CODE }}&amp;region=DE"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/styledinfowindow.js"></script>
    {% endif %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing.js"></script>
    {% if view_type == "map" %}
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing_map.js"></script>
    {% endif %}
{% endblock %}

