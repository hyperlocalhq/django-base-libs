{% load i18n base_tags auth_extended babel %}

{% if object.has_fees or object.has_opening_hours %}
    <div class="fieldset not-editable" >
        <fieldset disabled>
            <h2>{% trans "Fees &amp; Opening Hours" %}</h2>

            {% if object.has_fees %}
                <dl class="input-fields">
                    <dt>{% trans "Fees" %}</dt>
                    <dd>
                        <div class="text-field">{{ object.fees|linebreaksbr }}</div>
                    </dd>
                </dl>
                <dd class="clearfix"></dd>
            {% endif %}

            {% if object.has_opening_hours %}
                {% regroup object.get_opening_hours by times as opening_hours %}
                <dl class="input-fields">
                    {% for same_hours in opening_hours %}
                        <dt>{% for day in same_hours.list %}{% if forloop.first %}{{ day.weekday }}{% endif %}
                            {% if forloop.last %}{% if forloop.counter0 %}-{{ day.weekday }}{% endif %}
                            {% endif %}{% endfor %}</dt>
                        <dd>
                            <div class="text-field">
                                {% if same_hours.list.0.open %}
                                    {{ same_hours.list.0.open|time:"H:i" }}
                                    {% if same_hours.list.0.break_close %}
                                        - {{ same_hours.list.0.break_close|time:"H:i" }}
                                        / {{ same_hours.list.0.break_open|time:"H:i" }}
                                        - {{ same_hours.list.0.close|time:"H:i" }}
                                    {% else %}
                                        - {{ same_hours.list.0.close|time:"H:i" }}
                                    {% endif %}
                                {% else %}
                                    {% trans "closed" %}
                                {% endif %}
                            </div>
                        </dd>
                        <dd class="clearfix"></dd>
                    {% endfor %}
                </dl>

                {% if object.exceptions %}
                    <dl class="input-fields">
                        <dt>{% trans "Exceptions" %}</dt>
                        <dd>
                            <div class="text-field">
                                {{ object.get_rendered_exceptions }}
                            </div>
                        </dd>
                        <dd class="clearfix"></dd>
                    </dl>
                {% endif %}
            {% endif %}

        </fieldset>
    </div>
{% endif %}
