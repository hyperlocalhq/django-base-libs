{% extends base_template|default:"base_redesign.html" %}
{% load i18n base_tags auth_extended navigation_tags uni_form_tags infoblocks image_mods_tags individual_relations groups_networks browsing favorites crispy_forms_tags %}

{% block extrahead %}
    {% if view_type == "map" %}
        <script type="text/javascript">
            //<![CDATA[
            var aGeopositions = [];
            //]]>
        </script>
    {% endif %}
{% endblock %}

{% block title %}{% trans "Institutions" %}{% endblock %}

{% block body_class %}list{% endblock %}

{% block content %}
    <div class="header">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <h1>{% trans "Institutions" %}</h1>
                </div>
            </div>
        </div>
        <div class="menu tabs">
            <div class="container">
                <div class="row">
                    <div class="hidden-xs col-sm-4 col-md-3 headline">
                        <h2>{% trans "Institutions" %}</h2>
                    </div>
                    <div class="navi">
                        <nav>
                            <ul>
                                {% children_of "institutions" using "navigation/children_in_tabs.html" %}
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        
        <div class="row">
            <div class="col-xs-12">
                <div class="header-search">
                    <div class="fawesome fa-search" data-type="institution"><span class="text hidden-xs">{% trans 'Search' %}</span></div>
                    <div class="button-group hidden-xs">
                        <div class="fawesome fa-list button active" data-body-class="list" data-body-class-group="profiles"></div>
                        <div class="fawesome fa-grid button" data-body-class="grid" data-body-class-group="profiles"></div>
                    </div>
                    <div class="result">
                        {% load babel %}{{ current_page.paginator.count|numberfmt }}
                        <span class="text">{% trans 'Institutions' %}</span>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row">
            <div class="col-xs-12 col-sm-4 col-md-3">
                {% crispy form "ccb_form" %}                
            </div>
            <div class="col-xs-12 col-sm-8 col-md-9">
                {% if object_list %}
                    {% include "utils/includes/sorting.html" %}
                    {% include "utils/abc_filters.html" %}
                
                    <div class="row profile-grid profile-list">
                        
                        {% for object in object_list %}
                        
                            <div class="col-xs-12 col-sm-6 col-md-4">
                                <div class="wrapper">
                                    <a class="content" href="{{ object.get_url_path }}">
                                        {% if object.image %}
                                            <img src="{{ UPLOADS_URL }}{{ object.image|modified_path:"profile" }}" alt="{{ object.title|escape }}"/>
                                        {% else %}
                                            <img src="{{ STATIC_URL }}site/img/placeholder/institution.png" alt="{{ object.title|escape }}"/>
                                        {% endif %}
                                        <div class="text">
                                            <h2>{{ object.title|escape }}</h2>
                                            <h3>
                                                {% if object.title2 %}{{ object.title2 }}{% endif %}
                                                {% if object.get_creative_sectors %}
                                                    <span class="feature">
                                                        {% for cat in object.get_creative_sectors %}
                                                            {{ cat.get_title|escape }}{% if not forloop.last %}, {% endif %}
                                                        {% endfor %}
                                                    </span>
                                                {% endif %}
                                            </h3>
                                            <ul>
                                                <li>201 <span class="feature">{% trans "Follower" %}</span></li>
                                                <li>8 <span class="feature">{% trans "Curated lists" %}</span></li>
                                            </ul>
                                        </div>
                                    </a>
                                </div>
                            </div>

                        {% endfor %}
                        
                    </div>
                    {% include "utils/includes/pagination.html" %}
                    
                {% else %}
                    <p>{% trans "No objects found within the selected conditions." %}</p>
                {% endif %} 
                
            </div>
        </div>
        
    </div>
    
{% endblock %}

{% block breadcrumbs %}
    {% if not show %}
        <li>{% trans "Institutions" %}</li>
    {% endif %}
    {% if show == "/favorites" %}
        <li><a href="/{{ URL_ID_INSTITUTIONS }}/">{% trans "Institutions" %}</a></li>
        <li>{% trans "Favorites" %}</li>
    {% endif %}
    {% if show == "/own-institutions" %}
        <li><a href="/{{ URL_ID_INSTITUTIONS }}/">{% trans "Institutions" %}</a></li>
        <li>{% trans "Own institutions" %}</li>
    {% endif %}
{% endblock %}

{% block javascript %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/pagination.js"></script>
{% endblock %}



{% block headline_old %}
    <h1>{% trans "Institutions" %}</h1>
{% endblock %}

{% block sidebar-a_old %}
    <div class="sidebar-box nav_expanded" id="block_filter_{{ LANGUAGE_CODE }}">
        <h5>
            <a href="#" class="open_but">
                <b>{% trans "Filter" %}</b>
                <span class="pic"></span>
            </a>
        </h5>

        <form method="get" id="object_list_filter_form" class="uniForm hidable">
            <div class="object_search_form">
                {{ form.creative_sector|as_uni_field }}
                {% comment %}<!--
                {{ form.institution_type|as_uni_field }}
                {{ form.locality_type|as_uni_field }}
                -->{% endcomment %}
                {{ form.context_category|as_uni_field }}
                <div class="col one-line last">
                    <input type="submit" class="button_good right" value="{% trans "Search" %}"/>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block content_old %}
    {% if object_list %}
        {% include_parsed "utils/includes/sorting_and_pagination.html" with "under-tabs" as css_class %}
        {% include "utils/abc_filters.html" %}
    {% endif %}
    {% include "institutions/includes/list_type_links.html" %}
    {% if object_list %}
        {% if view_type == "map" %}
            <noscript>{% infoblock "js_warning" %}</noscript>
            <div id="dyn_map" class="to_show">
                <div id="gmap" style="width: 584px; height: 272px; position: relative; float: left;"></div>
            </div>
        {% endif %}
        <div id="object_list">
            {% for institution in object_list %}
                {% if view_type == "icons" %}
                    {% include_parsed "institutions/lists/institution_icons.html" with "vcard" as extra_css_classes %}
                {% endif %}
                {% if view_type == "map" %}
                    {% include_parsed "institutions/lists/institution_mapped.html" with "vcard" as extra_css_classes %}
                {% endif %}
            {% endfor %}
        </div>
        {% include "utils/includes/sorting_and_pagination.html" %}
    {% else %}
        <p class="nothing">
            {% trans "No objects found within the selected conditions." %}
        </p>
    {% endif %}
{% endblock %}

{% block extrabody_old %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/generic.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/groups_networks.js"></script>
    {% if view_type == "map" %}
        <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?language={{ LANGUAGE_CODE }}&amp;region=DE"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/styledinfowindow.js"></script>
    {% endif %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing.js"></script>
    {% if view_type == "map" %}
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing_map.js"></script>
    {% endif %}
{% endblock %}
