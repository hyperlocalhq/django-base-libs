{% load i18n base_tags auth_extended babel %}


{% if object.has_opening_hours or object.is_appointment_based or object.is_editable %}
    <div class="fieldset {% if object.is_editable %}editable switch{% else %}not-editable{% endif %}" data-edit-url="{% url 'edit_profile' object_type='institution' slug=object.slug %}opening_hours/">
        <fieldset disabled>
            <h2>{% trans "Opening hours" %}</h2>
        
            {% if object.has_opening_hours %}
                {% regroup object.get_opening_hours by times as opening_hours %}
                
                <dl class="input-fields">
                     {% for same_hours in opening_hours %}
                        <dt>
                            {% for day in same_hours.list %}
                                {% if forloop.first %}{{ day.weekday }}{% endif %}
                                {% if forloop.last %}{% if forloop.counter0 %}-{{ day.weekday }}{% endif %}{% endif %}
                            {% endfor %}
                        </dt>
                        <dd><div class="text-field">
                            {% if same_hours.list.0.open %}
                                {{ same_hours.list.0.open|time:"H:i" }}
                                {% if same_hours.list.0.break_close %}
                                    - {{ same_hours.list.0.break_close|time:"H:i" }}
                                    / {{ same_hours.list.0.break_open|time:"H:i" }}
                                    - {{ same_hours.list.0.close|time:"H:i" }}
                                {% else %}
                                    - {{ same_hours.list.0.close|time:"H:i" }}
                                {% endif %}
                            {% else %}
                                {% trans "closed" %}
                            {% endif %}
                        </div></dd>
                        <dd class="clearfix"></dd>
                     {% endfor %}
                </dl>
                
                {% if object.exceptions %}
                    <dl class="input-fields">
                        <dt></dt>
                        <dd><div class="text-field">{{ object.get_rendered_exceptions }}</div></dd>
                        <dd class="clearfix"></dd>
                    </dl>
                {% endif %}
                
            {% endif %}
            
            {% if object.is_appointment_based %}
                <dl class="input-fields">
                    <dt></dt>
                    <dd><div class="text-field">{% trans "Visiting by appointment." %}</div></dd>
                    <dd class="clearfix"></dd>
                </dl>
            {% endif %}
    
        </fieldset>
    </div>    
{% endif %}
