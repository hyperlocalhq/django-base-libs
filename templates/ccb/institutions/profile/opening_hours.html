{% load i18n base_tags auth_extended babel %}


{% if object.are_opening_hours_displayed %}
    <div class="fieldset not-editable ">
        <fieldset>
            <h2>{% trans "Opening hours" %}</h2>
        
            {% if object.has_opening_hours %}
                {% regroup object.get_opening_hours by times as opening_hours %}
                
                <dl class="input-fields">
                     {% for same_hours in opening_hours %}
                        <dt>
                            {% for day in same_hours.list %}
                                {% if forloop.first %}{{ day.weekday }}{% endif %}
                                {% if forloop.last %}{% if forloop.counter0 %}-{{ day.weekday }}{% endif %}{% endif %}
                            {% endfor %}
                        </dt>
                        <dd><div class="text-field">
                            {% if same_hours.list.0.open %}
                                {{ same_hours.list.0.open|time:"H:i" }}
                                {% if same_hours.list.0.break_close %}
                                    - {{ same_hours.list.0.break_close|time:"H:i" }}
                                    / {{ same_hours.list.0.break_open|time:"H:i" }}
                                    - {{ same_hours.list.0.close|time:"H:i" }}
                                {% else %}
                                    - {{ same_hours.list.0.close|time:"H:i" }}
                                {% endif %}
                            {% else %}
                                {% trans "closed" %}
                            {% endif %}
                        </div></dd>
                     {% endfor %}
                </dl>
                
                {% if object.exceptions %}
                    <dl class="input-fields">
                        <dt></dt>
                        <dd><div class="text-field">{{ object.get_rendered_exceptions }}</div></dd>
                    </dl>
                {% endif %}
                
            {% endif %}
            
            {% if object.is_appointment_based %}
                <dl class="input-fields">
                    <dt></dt>
                    <dd><div class="text-field">{% trans "Visiting by appointment." %}</div></dd>
                </dl>
            {% endif %}
    
        </fieldset>
    </div>    
{% endif %}


{% comment %}
<h6 class="section-header">
    {% trans "Opening hours" %}
</h6>
<div class="section-details">

    {% if object.has_opening_hours %}
        <div class="timeboard">
            {% regroup object.get_opening_hours by times as opening_hours %}
            {% for same_hours in opening_hours %}
                {% if forloop.first %}
                    <dl>{% endif %}
            <dt>{% for day in same_hours.list %}{% if forloop.first %}{{ day.weekday }}{% endif %}{% if forloop.last %}
                {% if forloop.counter0 %}-{{ day.weekday }}{% endif %}{% endif %}{% endfor %}</dt>
            <dd>
                {% if same_hours.list.0.open %}
                    {{ same_hours.list.0.open|time:"H:i" }}
                    {% if same_hours.list.0.break_close %}
                        - {{ same_hours.list.0.break_close|time:"H:i" }}
                        / {{ same_hours.list.0.break_open|time:"H:i" }}
                        - {{ same_hours.list.0.close|time:"H:i" }}
                    {% else %}
                        - {{ same_hours.list.0.close|time:"H:i" }}
                    {% endif %}
                {% else %}
                    {% trans "closed" %}
                {% endif %}
            </dd>
            {% if forloop.last %}</dl>{% endif %}
            {% endfor %}
            {% if object.exceptions %}
                <dl>
                    <dd>
                        {{ object.get_rendered_exceptions }}
                    </dd>
                </dl>
            {% endif %}
        </div>
    {% endif %}
    {% if object.is_appointment_based %}
        <dl>
            <dd>{% trans "Visiting by appointment." %}</dd>
        </dl>
    {% endif %}
</div>
{% endcomment %}