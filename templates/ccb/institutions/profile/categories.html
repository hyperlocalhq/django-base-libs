{% load i18n base_tags auth_extended %}

<div class="fieldset {% if_has_perm "institutions.change_institution" object %}editable switch{% else %}not-editable{% end_if_has_perm %}" data-edit-url="{% url 'edit_profile' object_type='institution' slug=object.slug %}categories/">
    <fieldset disabled>
        <h2>{% trans "Categories" %}</h2>

        {% if object.get_categories %}
            <dl class="input-fields">
                <dt>
                    {% with object.get_categories|length as count %}
                        {% ifequal count 1 %}
                            {% trans "Category" %}
                        {% else %}
                            {% trans "Categories" %}
                        {% endifequal %}
                    {% endwith %}
                </dt>
                <dd>
                    <div class="text-field">
                        {% for cat in object.get_categories %}
                            <div>{{ cat.title|escape }}</div>
                        {% endfor %}
                    </div>
                </dd>
                <dd class="clearfix"></dd>
            </dl>
        {% endif %}
        
        {% if object.institution_types.count %}
            <dl class="input-fields">
                <dt>
                    {% if object.institution_types.count == 1 %}
                        {% trans "Institution type" %}
                    {% else %}
                        {% trans "Institution types" %}
                    {% endif %}
                </dt>
                <dd>
                    <div class="text-field">
                        {% for cat in object.institution_types.all %}
                            <div>{{ cat.title|escape }}</div>
                        {% endfor %}
                    </div>
                </dd>
                <dd class="clearfix"></dd>
            </dl>    
        {% endif %}
        
    </fieldset>
</div>


{% comment %}
<h6 class="section-header">
    {% trans "Categories" %}
</h6>
<div class="section-details">

    {% if object.get_creative_sectors %}
        <dl>
            <dt>
                {% with object.get_creative_sectors|length as creative_sectors_count %}
                    {% ifequal creative_sectors_count 1 %}
                        {% trans "Creative Sector" %}
                    {% else %}
                        {% trans "Creative Sectors" %}
                    {% endifequal %}
                {% endwith %}
            </dt>
            {% for cat in object.get_creative_sectors %}
                {% if forloop.first %}
                    <dd>{% endif %}
            {{ cat.get_title|escape }}{% if not forloop.last %}, {% endif %}
            {% if forloop.last %}</dd>{% endif %}
            {% endfor %}
        </dl>
    {% endif %}
    {% if object.get_context_categories %}
        <dl>
            <dt>
                {% with object.get_context_categories|length as context_categories_count %}
                    {% ifequal context_categories_count 1 %}
                        {% trans "Context Category" %}
                    {% else %}
                        {% trans "Context Categories" %}
                    {% endifequal %}
                {% endwith %}
            </dt>
            {% for cat in object.get_context_categories %}
                {% if forloop.first %}
                    <dd>{% endif %}
            {{ cat.get_title|escape }}{% if not forloop.last %}, {% endif %}
            {% if forloop.last %}</dd>{% endif %}
            {% endfor %}
        </dl>
    {% endif %}
    {% if object.get_categories %}
        <dl>
            <dt>
                {% with object.get_categories|length as categories_count %}
                    {% ifequal categories_count 1 %}
                        {% trans "Category" %}
                    {% else %}
                        {% trans "Categories" %}
                    {% endifequal %}
                {% endwith %}
            </dt>
            {% for cat in object.get_categories %}
                {% if forloop.first %}
                    <dd>{% endif %}
            {{ cat.title|escape }}{% if not forloop.last %}, {% endif %}
            {% if forloop.last %}</dd>{% endif %}
            {% endfor %}
        </dl>
    {% endif %}
    {% if object.institution_types.count %}
        <dl>
            <dt>
                {% trans "Institution types" %}
            </dt>
            {% for cat in object.institution_types.all %}
                {% if forloop.first %}
                    <dd>{% endif %}
            {{ cat.title|escape }}{% if not forloop.last %}, {% endif %}
            {% if forloop.last %}</dd>{% endif %}
            {% endfor %}
        </dl>
    {% endif %}
    {% if object.get_locality_type %}
        <dl>
            <dt>{% trans "Location" %}</dt>
            <dd>
                {{ object.get_locality_type.title|escape }}
            </dd>
        </dl>
    {% endif %}
</div>
{% endcomment %}