{% extends base_template|default:"base_sidebar.html" %}
{% load base_tags i18n uni_form_tags crispy_forms_tags %}

{% block title %}{% trans "Login" %}{% endblock %}

{% block headline %}
    <h1>{% trans "Login" %}</h1>
{% endblock %}

{% block details %}

    {% crispy form "ccb_form" %}
    
    <form>
        <div class="fieldset editable">
            <fieldset>
                <h2>{% trans 'Register' %}</h2>
                <p>
                    {% trans "Haven't you got an account yet?" %}
                </p>

                <div class="button-group form-buttons">
                    <input class="button primary" type="button" onclick="window.redirect('/register/')"
                        value="{% filter upper %}{% trans 'Create Account' %}{% endfilter %}"/>
                </div>
            </fieldset>
        </div>
    </form>
{% endblock %}

{% block breadcrumbs %}
    <li>{% trans "Login" %}</li>
{% endblock %}


{% block sidebar-a_old %}&nbsp;{% endblock %}
{% block sidebar-b_old %}&nbsp;{% endblock %}

{% block content_old %}
    <form action="/{{ LANGUAGE_CODE }}/facebook/link/" method="post" class="uniForm">{% csrf_token %}
        <fieldset class="inlineLabels">
            <p class="disclaimer">
                {% trans "Are you on Facebook?" %}<br/>
                {% trans "Login with Facebook will be available soon." %}
            </p>

            <div class="buttonHolder">
                <input type="hidden" name="access_token" value=""/>
                <input type="hidden" name="uid" value=""/>
                <input type="hidden" name="goto_next" value="{% ifequal goto_next root_dir %}/dashboard/{% else %}{% if goto_next %}{{ goto_next }}{% else %}/dashboard/{% endif %}{% endifequal %}" />
            </div>
        </fieldset>
    </form>

    {#% crispy form %#}
    <form action="/{{ LANGUAGE_CODE }}/login/" method="post" class="uniForm">{% csrf_token %}
        <fieldset class="inlineLabels">
            <!--{{ request.session.set_test_cookie }}-->
            {% if form.non_field_errors %}
                <div id="errorMsg">
                    <p>{{ form.non_field_errors|join:" " }}</p>
                </div>
            {% endif %}
            <h3>{% trans "login" %}</h3>
            {{ form.email_or_username|as_uni_field }}
            {{ form.password|as_uni_field }}
            <p>
                <a href="/password_reset/">{% trans "Forgotten your password?" %}</a>
            </p>

            <div class="buttonHolder">
                {{ form.login_as|as_uni_field }}
                <input type="hidden" name="this_is_the_login_form" value="1"/>
                <input type="hidden" name="post_data" value="{{ post_data }}"/>
                <input type="hidden" name="goto_next" value="{% ifequal goto_next root_dir %}/dashboard/{% else %}{% if goto_next %}{{ goto_next }}{% else %}/dashboard/{% endif %}{% endifequal %}" />
                <input class="primaryAction" type="submit"
                    value="{% filter upper %}{% trans 'Log in' %}{% endfilter %}"/>
            </div>
        </fieldset>
    </form>
    <form class="uniForm">
        <fieldset class="inlineLabels">
            <p class="disclaimer">
                {% trans "Haven't you got an account yet?" %}
            </p>

            <div class="buttonHolder">
                <input class="primaryAction" type="button" onclick="window.redirect('/register/')"
                    value="{% filter upper %}{% trans 'Create Account' %}{% endfilter %}"/>
            </div>
        </fieldset>
    </form>
{% endblock %}
