{% extends base_template|default:"base_redesign.html" %}
{% load i18n base_tags navigation_tags auth_extended uni_form_tags image_mods_tags individual_relations groups_networks browsing favorites crispy_forms_tags %}


{% block title %}{% trans "Infolinks" %}{% endblock %}

{% block content %}
    <div class="header">
        <div class="container">
            <div class="row">
                <div class="col-xs-12">
                    <h1>{% trans "Infolinks" %}</h1>
                </div>
            </div>
        </div>
        <div class="menu">
            <div class="container">
                <div class="row">
                    <div class="hidden-xs col-sm-4 col-md-3 headline">
                        <h2>{% trans "Infolinks" %}</h2>
                    </div>
                    <div class="navi">
                        <nav>
                            <ul>
                                {% children_of "documents" using "navigation/children_in_tabs.html" %}
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container">
        
        <div class="row">
            <div class="col-xs-12 col-sm-4 col-md-3">
                {% crispy form "ccb_form" %}
            </div>
            <div class="col-xs-12 col-sm-8 col-md-9">
                {% if object_list %}
                    {% include "utils/abc_filters.html" %}
                    <div class="row event-list">
                        {% for object in object_list %}
                            <div class="col-xs-12">
                                <div class="wrapper">
                                    <a class="content" href="{{ object.get_url_path }}">
                                        {% if object.image %}
                                            <img src="{{ UPLOADS_URL }}{{ object.image|modified_path:"list" }}" alt="{{ object.get_title|escape }}"/>
                                        {% else %}
                                            <img src="{{ STATIC_URL }}site/img/placeholder/institution.png" alt="{{ object.get_title|escape }}"/>
                                        {% endif %}
                                        <div class="text">
                                            <h3>{{ object.document_type.get_title|escape }}</h3>
                                            <h2>{{ object.get_title|escape }}</h2>
                                            <p></p>
                                        </div>
                                    </a>
                                    {% if object.url_link %}
                                        <a class="website" href="{{ object.url_link|escape }}" target="_blank">{{ object.url_link|truncatechars:50 }}</a>
                                    {% endif %}
                                    <div class="button-group">
                                    </div>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                    {% include "utils/includes/pagination.html" %}
                
                {% else %}
                    <p>{% trans "No objects found within the selected conditions." %}</p>
                {% endif %}
            </div>
        </div>
    </div>

{% endblock %}

{% block breadcrumbs %}
    {% if not show %}
        <li>{% trans "Infolinks" %}</li>
    {% endif %}
    {% if show == "/favorites" %}
        <li><a href="/{{ URL_ID_DOCUMENTS }}/">{% trans "Infolinks" %}</a></li>
        <li>{% trans "Favorites" %}</li>
    {% endif %}
    {% if show == "/own-documents" %}
        <li><a href="/{{ URL_ID_DOCUMENTS }}/">{% trans "Infolinks" %}</a></li>
        <li>{% trans "Own infolinks" %}</li>
    {% endif %}
{% endblock %}

{% block javascript %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/event-list.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/pagination.js"></script>
{% endblock %}
