{% load i18n base_tags auth_extended %}

{% if object.are_contacts_displayed and object.get_contacts %}
    <div
        class="fieldset {% if_has_perm "marketplace.change_job_offer" object %}editable switch{% else %}not-editable{% end_if_has_perm %}"
        data-edit-url="{% url 'edit_profile' object_type='job' slug=object.get_secure_id %}contact/0/">
        <fieldset disabled>
            <h2>{% trans "Contact Data" %}</h2>
            {% if object.offering_institution_title or object.offering_institution %}
                <dl class="input-fields">
                    <dt>{% trans "Institution" %}</dt>
                    <dd><div class="text-field">
                        {% if object.offering_institution %}
                            <a href="{{ object.offering_institution.get_url_path }}">{{ object.offering_institution.get_title }}</a>
                        {% else %}
                            {{ object.offering_institution_title }}
                        {% endif %}
                    </div></dd>
                    <dd class="clearfix"></dd>
                </dl>
            {% endif %}
            
            {% with object.postal_address as address %}
                {% if address.street_address or address.postal_code or address.country %}
                    <dl class="input-fields">
                        <dt>{% trans "Address" %}</dt>
                        <dd><div class="text-field">
                            <div>{{ object.get_title|escape }}</div>                            
                            {% if address.street_address %}
                                <div>{{ address.street_address|escape }}</div>
                            {% endif %}
                            {% if address.street_address2 %}
                                <div>{{ address.street_address2|escape }}</div>
                            {% endif %}
                            {% if address.street_address3 %}
                                <div>{{ address.street_address3|escape }}</div>
                            {% endif %}
                            {% if address.postal_code or address.city %}
                                <div>{{ address.postal_code|escape }} {{ address.city|escape }}</div>
                            {% endif %}
                            {% if address.country %}
                                <div>{{ address.country.get_name }}</div>
                            {% endif %}
                            {% comment %}
                            {% if address.get_geoposition.latitude and address.get_geoposition.longitude %}
                                <br/><span class="map-link"><a href="{{ object.get_url_path }}map/">({% trans "Show on the map" %})</a></span>
                            {% endif %}
                            {% endcomment %}
                        </div></dd>
                        <dd class="clearfix"></dd>
                    </dl>
                {% endif %}
            {% endwith %}
            
            {% if object.contact_person or object.contact_person_name %}
                <dl class="input-fields">
                    <dt>{% trans "Contact Person" %}</dt>
                    <dd><div class="text-field">
                        {% if object.contact_person %}
                            <a href="{{ object.contact_person.get_url }}">{{ object.contact_person.get_title }}</a>
                        {% else %}
                            {{ object.contact_person_name }}
                        {% endif %}
                    </div></dd>
                    <dd class="clearfix"></dd>
                </dl>
            {% endif %}
            
            {% if object.get_emails %}
                <dl class="input-fields">
                    <dt>{% trans "E-mail" %}</dt>
                    {% if request.user.is_authenticated or object.publish_emails %}
                        <dd><div class="text-field">
                            {% for email in object.get_emails %}
                                <div><a href="mailto:{{ email.address }}">{{ email.address }}</a></div>
                            {% endfor %}
                        </div></dd>
                    {% else %}
                        <dd><div class="text-field"><a href="/login/?goto_next={{ request.path }}">{% trans "Login to see e-mail." %}</a></div></dd>
                    {% endif %}
                    <dd class="clearfix"></dd>
                </dl>
            {% endif %}
            
            {% if object.get_phones %}
                <dl class="input-fields">
                    {% for phone in object.get_phones %}
                        <dt>{% if phone.type %}{{ phone.type }}{% else %}{% trans 'Phone' %}{% endif %}</dt>
                        <dd>
                            <div class="text-field">
                                <a href="tel:+{{ phone.country }}{{ phone.area }}{{ phone.number }}">+{{ phone.country }}-{{ phone.area }}-{{ phone.number }}</a>
                            </div>
                        </dd>
                        <dd class="clearfix"></dd>
            {% endfor %}
                </dl>
            {% endif %}
                    
            {% if object.get_urls %}
                <dl class="input-fields">
                    {% for url in object.get_urls %}
                        <dt>{% if url.type %}{{ url.type }}{% else %}{% trans 'Website' %}{% endif %}</dt>
                        <dd>
                            <div class="text-field">
                                <a href="{{ url.link|escape }}" onclick="open_new_window(event)" target="_blank">{{ url.link }}</a>
                                {% if object.is_commercial %}(€){% endif %}
                            </div>
                        </dd>
                        <dd class="clearfix"></dd>
                {% endfor %}
                </dl>
            {% endif %}
                    
            {% if object.get_ims %}
                <dl class="input-fields">
                    {% for im in object.get_ims %}
                        <dt>{{ im.type }}</dt>
                        <dd><div class="text-field">{{ im.address }}</div></dd>
                        <dd class="clearfix"></dd>
                    {% endfor %}
                </dl>
            {% endif %}
            
        </fieldset>
    </div>
{% endif %}


{% comment %}
<h6 class="section-header">
    {% trans "contact data" %}
</h6>
<div class="section-details">

    {% with object.postal_address as address %}
        {% if object.offering_institution_title or object.offering_institution or address.street_address or address.postal_code or address.country %}
            <div class="adr">
                {% if object.offering_institution or object.offering_institution_title %}
                    <dl>
                        <dt>{% trans "Institution/Company" %}</dt>
                        <dd>
                            {% if object.offering_institution %}
                                <a href="{{ object.offering_institution.get_url_path }}">{{ object.offering_institution.get_title }}</a>
                            {% else %}
                                {{ object.offering_institution_title }}
                            {% endif %}
                        </dd>
                    </dl>
                {% endif %}
                <dl>
                    <dt>{% trans "Address" %}</dt>
                    <dd>

                        <span class="summary hidden">{{ object.get_title|escape }}<br/> </span>
            
                        <span class="location">
                            {% if address.street_address %}
                                <span class="street-address">{{ address.street_address|escape }}, </span>
                            {% endif %}
                            {% if address.street_address2 %}
                                <span class="street-address">{{ address.street_address2|escape }}, </span>
                            {% endif %}
                            {% if address.street_address3 %}
                                <span class="street-address">{{ address.street_address3|escape }}, </span>
                            {% endif %}
                            {% if address.postal_code or address.city %}
                                <span class="postal-code">{{ address.postal_code|escape }} </span>
                                <span class="locality">{{ address.city|escape }}, </span>
                            {% endif %}
                            {% if address.country %}
                                <span class="country-name">{{ address.country.get_name }}</span>
                            {% endif %}
                            {% if address.get_geoposition.latitude and address.get_geoposition.longitude %}
                                <br/><span class="map-link"><a
                                href="{{ object.get_url_path }}map/">({% trans "Show on the map" %})
                            </a></span>
                            {% endif %}
                        </span>
                    </dd>
                </dl>
            </div>
        {% endif %}
        {% if object.contact_person or object.contact_person_name %}
            <dl>
                <dt>{% trans "Contact Person" %}</dt>
                <dd>
                    {% if object.contact_person %}
                        <a href="{{ object.contact_person.get_url }}">{{ object.contact_person.get_title }}</a>
                    {% else %}
                        {{ object.contact_person_name }}
                    {% endif %}
                </dd>
            </dl>
        {% endif %}
        {% if object.get_emails %}
            {% if request.user.is_authenticated or object.publish_emails %}
                {% for email in object.get_emails %}
                    {% if forloop.first %}
                        <dl>
                    {% endif %}
                <dd class="tel">
                    <span class="type">{% trans "E-mail" %}</span>:
                    <span class="value"><a href="mailto:{{ email.address }}">{{ email.address }}</a></span></dd>
                {% if forloop.last %}
                    </dl>
                {% endif %}
                {% endfor %}
            {% else %}
                <dl>
                    <dd class="tel">
                        <a href="/login/?goto_next={{ request.path }}">
                            {% trans "Login to see e-mail." %}
                        </a>
                    </dd>
                </dl>
            {% endif %}
        {% endif %}
        {% if object.get_phones %}
            {% for phone in object.get_phones %}
                {% if forloop.first %}
                    <dl>
                {% endif %}
            <dd class="tel">
                {% if phone.type %}
                    <span class="type">{{ phone.type }}</span>:
                {% endif %}
                <span class="value">+{{ phone.country }}-{{ phone.area }}-{{ phone.number }}</span></dd>
            {% if forloop.last %}
                </dl>
            {% endif %}

            {% endfor %}
        {% endif %}
        {% if object.get_urls %}
            {% for url in object.get_urls %}
                {% if forloop.first %}
                    <dl>
                {% endif %}

            {% with url.link|slice:":40" as sliced %}
                {% if url.type %}
                    <dt>{{ url.type }}</dt>
                    <dd>
                        <a class="url link-{{ url.type.slug }}" href="{{ url.link|escape }}"
                            onclick="open_new_window(event)">
                            {{ sliced }}{% ifnotequal url.link sliced %}...{% endifnotequal %}</a>
                        {% if object.is_commercial %}(€){% endif %}
                    </dd>
                {% else %}
                    <dd>
                        <a class="url" href="{{ url.link|escape }}" onclick="open_new_window(event)">
                            {{ sliced }}{% ifnotequal url.link sliced %}...{% endifnotequal %}</a>
                        {% if object.is_commercial %}(€){% endif %}
                    </dd>
                {% endif %}
            {% endwith %}
            {% if forloop.last %}
                </dl>
            {% endif %}
            {% endfor %}
        {% endif %}
        {% if object.get_ims %}
            <dl>
                {% for im in object.get_ims %}
                    <dd>{{ im.type }}: {{ im.address }}</dd>
                {% endfor %}
            </dl>
        {% endif %}
    {% endwith %}
</div>
{% endcomment %}
