{% load i18n base_tags babel %}

<dl>
    <dt>{% trans "Position" %}:</dt>
    <dd>{{ object.position }}</dd>
</dl>
<dl>
    <dt>{% trans "Job Type" %}:</dt>
    <dd>{{ object.job_type.title }}</dd>
</dl>
<dl>
    <dt>{% trans "Qualification" %}:</dt>
    <dd>{% for q in object.qualifications.all %}{% if not forloop.first and not forloop.last %}, {% endif %}
        {% if forloop.last and not forloop.first %} {% trans "or" %} {% endif %}{% if forloop.first %}
        {{ q.title|capfirst }}
    {% else %}{{ q.title|lower }}{% endif %}{% endfor %}</dd>
</dl>
<dl>
    <dt>{% trans "Description" %}:</dt>
    <dd>{{ object.description|urlize|linebreaks|mark_first_and_last:"p" }}</dd>
</dl>
{% if object.published_till %}
    <dl>
        <dt>{% trans "Published till" %}:</dt>
        <dd>{{ object.published_till|datefmt:"medium" }}</dd>
    </dl>
{% endif %}

{% with object.postal_address as address %}
    {% if object.offering_institution_title or object.offering_institution or address.street_address or address.postal_code or address.country %}
        {% if object.offering_institution or object.offering_institution_title %}
            <dl>
                <dt>{% trans "Institution/Company" %}:</dt>
                <dd>
                    {% if object.offering_institution %}
                        <a href="{{ object.offering_institution.get_url_path }}">{{ object.offering_institution.get_title }}</a>
                    {% else %}
                        {{ object.offering_institution_title }}
                    {% endif %}
                </dd>
            </dl>
        {% endif %}
        <dl>
            <dt>{% trans "Address" %}:</dt>
            <dd>

                <span>{{ object.offering_institution.get_title|escape }}<br/> </span>
    
                <span>
                    {% if address.street_address %}
                        <span>{{ address.street_address|escape }}, </span>
                    {% endif %}
                    {% if address.street_address2 %}
                        <span>{{ address.street_address2|escape }}, </span>
                    {% endif %}
                    {% if address.street_address3 %}
                        <span>{{ address.street_address3|escape }}, </span>
                    {% endif %}
                    {% if address.postal_code %}
                        <span>{{ address.postal_code|escape }} </span>
                        <span>{{ address.city|escape }}, </span>
                    {% endif %}
                    {% if address.country %}
                        <span>{{ address.country.get_name }}</span>
                    {% endif %}
                </span>
            </dd>
        </dl>
    {% endif %}
    {% if object.contact_person or object.contact_person_name %}
        <dl>
            <dt>{% trans "Contact Person" %}:</dt>
            <dd>
                {% if object.contact_person %}
                    <a href="{{ object.contact_person.get_url }}">{{ object.contact_person.get_title }}</a>
                {% else %}
                    {{ object.contact_person_name }}
                {% endif %}
            </dd>
        </dl>
    {% endif %}
    {% if object.get_phones %}
        {% for phone in object.get_phones %}
            {% if forloop.first %}
                <dl>
            {% endif %}
        <dd>
            {% if phone.type %}
                <span>{{ phone.type }}</span>:
            {% endif %}
            <span>+{{ phone.country }}-{{ phone.area }}-{{ phone.number }}</span></dd>
        {% if forloop.last %}
            </dl>
        {% endif %}

        {% endfor %}
    {% endif %}
    {% if object.get_emails %}
        {% for email in object.get_emails %}
            {% if forloop.first %}
                <dl>
            {% endif %}
        <dd>
            <span>{% trans "E-mail" %}</span>:
            <span><a href="mailto:{{ email.address }}">{{ email.address }}</a></span></dd>
        {% if forloop.last %}
            </dl>
        {% endif %}
        {% endfor %}
    {% endif %}
    {% if object.get_urls %}
        {% for url in object.get_urls %}
            {% if forloop.first %}
                <dl>
            {% endif %}

        {% with url.link|slice:":40" as sliced %}
            {% if url.type %}
                <dt>{{ url.type }}:</dt>
            {% endif %}
            <dd>
                <a href="{{ url.link|escape }}">{{ url.link|escape }}</a>
            </dd>
        {% endwith %}
        {% if forloop.last %}
            </dl>
        {% endif %}
        {% endfor %}
    {% endif %}
    {% if object.get_ims %}
        <dl>
            {% for im in object.get_ims %}
                <dd>{{ im.type }}: {{ im.address }}</dd>
            {% endfor %}
        </dl>
    {% endif %}
{% endwith %}

{% if object.job_sectors.count %}
    <dl>
        <dt>
            {% with object.job_sectors.count as job_sectors_count %}
                {% ifequal job_sectors_count 1 %}
                    {% trans "Job Sector" %}:
                {% else %}
                    {% trans "Job Sectors" %}:
                {% endifequal %}
            {% endwith %}
        </dt>
        {% for cat in object.job_sectors.all %}
            {% if forloop.first %}
                <dd>{% endif %}
        {{ cat.title|escape }}{% if not forloop.last %}, {% endif %}
        {% if forloop.last %}</dd>{% endif %}
        {% endfor %}
    </dl>
{% endif %}
{% if object.tags %}
    <dl>
        <dt>{% trans "Tags" %}:</dt>
        <dd>{{ object.tags }}</dd>
    </dl>
{% endif %}
{% if object.get_locality_type %}
    <dl>
        <dt>{% trans "Location" %}:</dt>
        <dd>
            {{ object.get_locality_type.title|escape }}
        </dd>
    </dl>
{% endif %}

