{% extends base_template|default:"base_sidebar.html" %}
{% load i18n base_tags cms_tags menu_tags auth_extended navigation_tags crispy_forms_tags infoblocks site_specific bulletin_board_tags %}

{% block title %}{% page_attribute "page_title" %} - {{ category.title }}{% endblock %}

{% block extrahead %}
    {% if not my_list %}
        <link rel="alternate" type="application/rss+xml" title="Projektboerse RSS" href="{{ website_url|slice:":-1" }}{% url "bulletin_rss" %}{% filter force_escape %}{% append_to_get sort_by="" no_path %}{% endfilter %}" />
    {% endif %}
{% endblock %}

{% block body_class %}list{% endblock %}

{% block breadcrumbs %}
    {% if my_list %}
        <li><a href="{% url "bulletin_list" %}">{% page_attribute "page_title" %}</a></li>
        <li>{% trans "My Bulletins" %}</li>
    {% else %}
        <li>{% page_attribute "page_title" %}</li>
    {% endif %}
{% endblock %}

{% block header_image %}
    {% load slideshows_tags %}
    {% if category.slug == "architektur" %}
        {% slideshow "architecture" using "slideshows/header.html" %}
    {% elif category.slug == "bildende-kunst" %}
        {% slideshow "visual_arts" using "slideshows/header.html" %}
    {% elif category.slug == "design" %}
        {% slideshow "design" using "slideshows/header.html" %}
    {% elif category.slug == "eventbranche" %}
        {% slideshow "event_industry" using "slideshows/header.html" %}
    {% elif category.slug == "film-rundfunk" %}
        {% slideshow "film_broadcast" using "slideshows/header.html" %}
    {% elif category.slug == "fotografie" %}
        {% slideshow "photography" using "slideshows/header.html" %}
    {% elif category.slug == "games-interactive" %}
        {% slideshow "games_interactive" using "slideshows/header.html" %}
    {% elif category.slug == "literatur-verlage" %}
        {% slideshow "literature_publishing" using "slideshows/header.html" %}
    {% elif category.slug == "mode-textil" %}
        {% slideshow "fashion_textile" using "slideshows/header.html" %}
    {% elif category.slug == "musik" %}
        {% slideshow "music" using "slideshows/header.html" %}
    {% elif category.slug == "tanz-theater" %}
        {% slideshow "theatre_dance" using "slideshows/header.html" %}
    {% elif category.slug == "werbung-pr" %}
        {% slideshow "advertising_pr" using "slideshows/header.html" %}
    {% endif %}
{% endblock %}

{% block headline %}
    <h1>{{ category.title }}</h1>
{% endblock %}

{% block search_bar %}
    <div class="row">
        <div class="col-xs-12">
            <div class="header-search">
                <div class="fawesome fa-search"><span class="text hidden-xs">{% trans 'Search' %}</span></div>
                <div class="button-group hidden-xs">
                    <div class="fawesome fa-list button active" data-body-class="list" data-body-class-group="profiles"></div>
                    <div class="fawesome fa-grid button" data-body-class="grid" data-body-class-group="profiles"></div>
                </div>
                <div class="result">
                    {% load babel %}{{ current_page.paginator.count|numberfmt }}
                    <span class="text">{% trans 'Bulletins' %}</span>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block sidebar %}
    <nav>
        <ul class="accordion navi-box">
            <li class="accordion-inside accordion-trigger opened">
                <div class="accordion-trigger head">{% trans "Architecture" %}</div>
                <ul class="accordion navi-box">
                    {% show_sub_menu 3 3 1 "cms/includes/menu_cms.html" %}
                </ul>
            </li>
            <li></li>
        </ul>
    </nav>

    {% crispy form "ccb_form" %}
{% endblock %}

{% block details %}
    <h2>{% page_attribute "page_title" %}</h2>
    <!--<div>
        <p class="item">
            <a href="{% url "bulletin_rss" %}{% filter force_escape %}{% append_to_get sort_by="" no_path %}{% endfilter %}" class="btn btn-primary">RSS abonnieren</a>
            {% if request.user.is_authenticated %}
                <a href="{% url "add_bulletin" %}" class="btn btn-primary">Inserat erstellen</a>
            {% endif %}
        </p>
    </div>-->
    <div class="toolbox ">
        {% if request.user.is_authenticated %}<a class="add" href="{% url "add_bulletin" %}">{% trans "Create Bulletin" %}</a>{% endif %}
        {% if not my_list %}<a href="{% url "bulletin_rss" %}">{% trans "Subscribe to RSS Feed" %}</a>{% endif %}
    </div>
    {% if object_list %}
        <div class="row profile-grid profile-list">
            {% for bulletin in object_list %}
                {% include_parsed "bulletin_board/lists/bulletin_list_item.html" with "vevent" as extra_css_classes %}
            {% endfor %}
        </div>
        {% include "utils/includes/pagination.html" %}
    {% else %}
        <p class="nothing">{% trans "No objects found within the selected conditions." %}</p>
    {% endif %}
{% endblock %}

{% block extrabody %}
    <script src="{{ STATIC_URL }}site/js/website/generic.js"></script>
    <script src="{{ STATIC_URL }}site/js/website/listing.js"></script>
{% endblock %}
