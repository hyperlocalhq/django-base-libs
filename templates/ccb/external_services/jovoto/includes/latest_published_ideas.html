{% extends "utils/includes/base_latest_objects.html" %}
{% load i18n babel base_tags site_specific image_modifications babel %}
{% comment %}<!--
Usage in any template:
    {% load base_tags %}
    
    Simple:
    {% include_parsed "jovoto/includes/latest_published_ideas.html" %}
    
    Customized:
    {% include_parsed "jovoto/includes/latest_published_ideas.html" with 5 as amount %}
    
-->{% endcomment %}

{% block block_title %}<h5>{% trans "New Ideas" %}</h5>
    <a href="/logo_contest/ideas/?order_by=published_date_desc">{% trans "more..." %}</a>{% endblock %}

{% block block_content %}
    {% with amount|default:3 as amount %}
        {% get_objects latest_published jovoto.Idea amount as newest_objects %}
        {% if newest_objects %}
            <ul>
                {% for idea in newest_objects %}
                    <li>
                        <a href="{{ idea.get_url_path }}">
                            {% if idea.media0_thumb %}
                                <img class="newest_objects" name="Jovoto" alt="{{ idea.name|escape }}"
                                     src="{{ idea.get_media0_thumb_path }}"/>
                            {% endif %}
                        </a>
                        <h5>
                            <a href="{{ idea.get_url_path }}">
                                {{ idea.name|escape }}
                            </a>
                        </h5>

                        <p>{{ idea.author_username }}</p>

                        <p>{{ idea.pubdate|datefmt:"long" }}</p>

                        {% if idea.rating %}
                            {% with idea.rating as rating %}
                                {% with idea.ext_id as ext_id %}
                                    <p>{% include "external_services/jovoto/profile/starrating.html" %}</p><br/>
                                {% endwith %}
                            {% endwith %}
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <ul>
                <li>{% trans "There are no ideas." %}</li>
            </ul>
        {% endif %}
    {% endwith %}
{% endblock %}
