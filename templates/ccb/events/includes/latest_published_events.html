{% load i18n base_tags site_specific babel image_mods_tags %}
{% comment %}<!--
Usage in any template:
    {% load base_tags %}

    Simple:
    {% include_parsed "events/includes/latest_published_events.html" %}

    Customized:
    {% include_parsed "events/includes/latest_published_events.html" with 5 as amount %}

-->{% endcomment %}

{% with amount|default:4 as amount %}
    {% get_latest_published_objects_cs events.Event amount as newest_objects %}
    {% if newest_objects %}
        <div class="row event-grid">
            {% for event in newest_objects %}
                <div class="col-xs-12 col-sm-6 col-md-3">
                    <a class="content tap-hover tap-hover-trigger" href="{{ event.get_url_path }}">
                        <img src="{{ UPLOADS_URL }}{{ event.image|modified_path:"event_row" }}" alt="{{ event.get_title|escape }}"/>
                        <h2>event.get_title|escape</h2>
                        {% with event.get_nearest_occurrence as date %}
                            <p><time datetime="{{ date|date:'Y-m-d' }}">{{ date|date:'D, d. m. Y' }}</time>{% if event.venue %}{{ event.venue.title }}{% else %}event.venue_title{% endif %}</p>
                        {% endwith %}
                        {% if event.photo_author %}<span class="photo-credits-over">{% trans "Photo" %}: {{ event.photo_author }}</span>{% endif %}
                    </a>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p class="intro">{% trans "There are no public events." %}</p>
    {% endif %}
{% endwith %}
