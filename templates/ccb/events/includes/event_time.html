{% load i18n base_tags babel %}
{% ifequal forloop.first forloop.last %}{% endifequal %}
{% ifnotequal object.eventtime_set.count 1 %}
    <a href="{{ time.event.get_url_path }}{{ time.get_secure_id }}/">
{% endifnotequal %}

{% if time.start_dd %}
    {{ time.start|datefmt:"long" }}
{% else %}
    {% if time.start_mm %}
        {{ time.get_start_mm_display }}
    {% endif %}
    {{ time.start_yyyy }}
{% endif %}
{% if time.has_start_time %}
    {{ time.start|time:"H:i" }}
{% endif %}

{% if time.is_end_date_defined %}
    {% ifnotequal time.start time.end %}
        -
        {% ifnotequal time.start|date time.end|date %}
            {% if time.end_dd %}
                {{ time.end|datefmt:"long" }}
            {% else %}
                {% if time.end_mm %}
                    {{ time.get_end_mm_display }}
                {% endif %}
                {{ time.end_yyyy }}
            {% endif %}
        {% endifnotequal %}
        {% if time.has_end_time %}
            {{ time.end|time:"H:i" }}
        {% endif %}
    {% endifnotequal %}
{% endif %}
{% ifnotequal object.eventtime_set.count 1 %}
    </a>
{% endifnotequal %}

