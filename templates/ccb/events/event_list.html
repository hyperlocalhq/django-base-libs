{% extends base_template|default:"base.html" %}
{% load events i18n base_tags auth_extended navigation_tags uni_form_tags infoblocks %}


{% block extrahead %}
    <link rel="alternate" type="application/rss+xml" title="{% trans "RSS Feed of CCB Events" %}"
        href="{{ website_url }}{{ LANGUAGE_CODE }}{{ request.path }}feed/rss/


            {% filter force_escape %}{% append_to_get page=0,paginate_by=0,sort_by=0,view_type=0 no_path %}{% endfilter %}">
    <link rel="alternate" type="application/atom+xml" title="{% trans "Atom Feed of CCB Events" %}"
        href="{{ website_url }}{{ LANGUAGE_CODE }}{{ request.path }}feed/atom/


            {% filter force_escape %}{% append_to_get page=0,paginate_by=0,sort_by=0,view_type=0 no_path %}{% endfilter %}">
    {% if view_type == "map" %}
        <script type="text/javascript">
            //<![CDATA[
            var aGeopositions = [];
            //]]>
        </script>
    {% endif %}
{% endblock %}

{% block title %}Events{% endblock %}

{% block headline %}
    <h1>{% trans "Events in Berlin" %}</h1>
{% endblock %}

{% block sidebar-a %}
    <div class="sidebar-box nav_expanded" id="block_filter_{{ LANGUAGE_CODE }}">
        <h5>
            <a href="#" class="open_but">
                <b>{% trans "Filter" %}</b>
                <span class="pic"></span>
            </a>
        </h5>

        <form method="get" id="object_list_filter_form" class="uniForm">
            <div class="object_search_form">
                {{ form.creative_sector|as_uni_field }}
                {{ form.event_type|as_uni_field }}
                {{ form.locality_type|as_uni_field }}
                {{ form.keywords|as_uni_field }}
                {{ form.is_featured|as_uni_field }}
                <div class="col one-line last">
                    <input type="submit" class="primaryAction" value="{% trans "Search" %}"/>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block content %}
    {% block tabs %}
        <div id="tabs">
            {% children_of "events" using "navigation/children_in_tabs.html" %}
        </div>
    {% endblock %}
    <form method="get" id="object_list_filter_form" class="clearfix">
        {% url "event_list_global" as base_url %}
        {% include "events/includes/list_period_quicklinks.html" %}
    </form>
    {% if object_list %}
        {% include_parsed "utils/includes/sorting_and_pagination.html" with "under-tabs" as css_class %}
    {% endif %}
    {% include "events/includes/list_type_links.html" %}
    {% if object_list %}
        {% if view_type == "map" %}
            <noscript>{% infoblock "js_warning" %}</noscript>
            <div id="dyn_map" class="to_show">
                <div id="gmap" style="width: 584px; height: 272px; position: relative; float: left"></div>
            </div>
        {% endif %}
        <div id="object_list">
            {% for event in object_list %}
                {% if view_type == "icons" %}
                    {% include_parsed "events/lists/event_icons.html" with "vevent" as extra_css_classes %}
                {% endif %}
                {% if view_type == "listed" %}
                    {% if forloop.first %}
                        <table class="events">
                    {% endif %}

                {% include_parsed "events/lists/event_listed.html" with "vevent" as extra_css_classes %}

                {% if forloop.last %}
                    </table>
                {% endif %}
                {% endif %}
                {% if view_type == "map" %}
                    {% include_parsed "events/lists/event_mapped.html" with "vevent" as extra_css_classes %}
                {% endif %}
            {% endfor %}
        </div>
        {% include "utils/includes/sorting_and_pagination.html" %}
    {% else %}
        <p class="nothing">{% trans "No objects found within the selected conditions." %}</p>
    {% endif %}
{% endblock %}

{% block breadcrumbs %}
    <div class="breadcrumbs">
        <a href="/">{% trans "Home" %}</a>
        {% if not show %}
            <span class="b-sep"><span>::</span></span><span>{% trans "Events" %}</span>
        {% endif %}
        {% if show == "/memos" %}
            <span class="b-sep"><span>::</span></span>
            <a href="/{{ URL_ID_EVENTS }}/">{% trans "Events" %}</a>
            <span class="b-sep"><span>::</span></span><span>{% trans "Memos" %}</span>
        {% endif %}
        {% if show == "/favorites" %}
            <span class="b-sep"><span>::</span></span>
            <a href="/{{ URL_ID_EVENTS }}/">{% trans "Events" %}</a>
            <span class="b-sep"><span>::</span></span><span>{% trans "Favorites" %}</span>
        {% endif %}
        {% if show == "/own-events" %}
            <span class="b-sep"><span>::</span></span>
            <a href="/{{ URL_ID_EVENTS }}/">{% trans "Events" %}</a>
            <span class="b-sep"><span>::</span></span><span>{% trans "Own events" %}</span>
        {% endif %}
    </div>
{% endblock %}

{% block extrabody %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/generic.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/ui.datepicker-de.js"></script>
    {% if view_type == "map" %}
        <script type="text/javascript"
            src="http://maps.google.com/maps/api/js?language={{ LANGUAGE_CODE }}&amp;region=DE"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/styledinfowindow.js"></script>
    {% endif %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing.js"></script>
    {% if view_type == "map" %}
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing_map.js"></script>
    {% endif %}
{% endblock %}
