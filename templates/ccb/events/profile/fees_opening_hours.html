{% load i18n base_tags auth_extended babel %}

{% if object.are_fees_displayed or object.are_opening_hours_displayed %}
    {% if object.are_contacts_displayed and object.get_contacts %}
        <div
            class="fieldset {% if_has_perm "events.change_event" object %}editable switch{% else %}not-editable{% end_if_has_perm %}"
            data-edit-url="{% url 'edit_profile' object_type='event' slug=object.slug %}fees_opening_hours/">
            <fieldset disabled>
                <h2>{% trans "Fees &amp; Opening Hours" %}</h2>

                {% if object.has_fees %}
                    <dl class="input-fields">
                        <dt>{% trans "Fees" %}</dt>
                        <dd>
                            <div class="text-field">{{ object.fees|linebreaksbr }}</div>
                        </dd>
                    </dl>
                    <dd class="clearfix"></dd>
                {% endif %}

                {% if object.has_opening_hours %}
                    {% regroup object.get_opening_hours by times as opening_hours %}
                    <dl class="input-fields">
                        {% for same_hours in opening_hours %}
                            <dt>{% for day in same_hours.list %}{% if forloop.first %}{{ day.weekday }}{% endif %}
                                {% if forloop.last %}{% if forloop.counter0 %}-{{ day.weekday }}{% endif %}
                                {% endif %}{% endfor %}</dt>
                            <dd>
                                <div class="text-field">
                                    {% if same_hours.list.0.open %}
                                        {{ same_hours.list.0.open|time:"H:i" }}
                                        {% if same_hours.list.0.break_close %}
                                            - {{ same_hours.list.0.break_close|time:"H:i" }}
                                            / {{ same_hours.list.0.break_open|time:"H:i" }}
                                            - {{ same_hours.list.0.close|time:"H:i" }}
                                        {% else %}
                                            - {{ same_hours.list.0.close|time:"H:i" }}
                                        {% endif %}
                                    {% else %}
                                        {% trans "closed" %}
                                    {% endif %}
                                </div>
                            </dd>
                            <dd class="clearfix"></dd>
                        {% endfor %}
                    </dl>

                    {% if object.exceptions %}
                        <dl class="input-fields">
                            <dt>{% trans "Exceptions" %}</dt>
                            <dd>
                                <div class="text-field">
                                {{ object.get_rendered_exceptions }}</dd>
                            <dd class="clearfix"></dd>
                        </dl>
                    {% endif %}
                {% endif %}

            </fieldset>
        </div>
    {% endif %}
{% endif %}


{% comment %}
<h6 class="section-header">
    {% trans "Fees &amp; Opening Hours" %}
</h6>
<div class="section-details">
    {% if object.has_fees %}
        <dl>
            <dt>{% trans "Fees" %}</dt>
            <dd>{{ object.fees|linebreaksbr }}</dd>
        </dl>
    {% endif %}
    {% if object.has_opening_hours %}
        {% regroup object.get_opening_hours by times as opening_hours %}
        {% for same_hours in opening_hours %}
            {% if forloop.first %}
                <dl>{% endif %}
        <dt>{% for day in same_hours.list %}{% if forloop.first %}{{ day.weekday }}{% endif %}{% if forloop.last %}
            {% if forloop.counter0 %}-{{ day.weekday }}{% endif %}{% endif %}{% endfor %}</dt>
        <dd>
            {% if same_hours.list.0.open %}
                {{ same_hours.list.0.open|time:"H:i" }}
                {% if same_hours.list.0.break_close %}
                    - {{ same_hours.list.0.break_close|time:"H:i" }}
                    / {{ same_hours.list.0.break_open|time:"H:i" }}
                    - {{ same_hours.list.0.close|time:"H:i" }}
                {% else %}
                    - {{ same_hours.list.0.close|time:"H:i" }}
                {% endif %}
            {% else %}
                {% trans "closed" %}
            {% endif %}
        </dd>
        {% if forloop.last %}</dl>{% endif %}
        {% endfor %}
        {% if object.exceptions %}
            <dl>
                <dt>{% trans "Exceptions" %}</dt>
                <dd>
                    {{ object.get_rendered_exceptions }}
                </dd>
            </dl>
        {% endif %}
    {% endif %}
</div>
{% endcomment %}
