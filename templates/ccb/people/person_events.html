{% extends base_template|default:"people/details_base.html" %}
{% load events i18n base_tags nav_menu auth_extended babel infoblocks %}

{% block extrahead %}
    {{ block.super }}
    <link rel="alternate" type="application/rss+xml" title="{% blocktrans with object.get_title as person_title %}RSS Feed of Events by {{ person_title }}{% endblocktrans %}" href="{{ website_url|slice:"0:-1" }}{{ request.path }}feed/rss/{{ LANGUAGE_CODE }}/{% filter force_escape %}{% append_to_get page=0,paginate_by=0,sort_by=0,view_type=0 no_path %}{% endfilter %}">
    <link rel="alternate" type="application/atom+xml" title="{% blocktrans with object.get_title as person_title %}Atom Feed of Events by {{ person_title }}{% endblocktrans %}" href="{{ website_url|slice:"0:-1" }}{{ request.path }}feed/atom/{{ LANGUAGE_CODE }}/{% filter force_escape %}{% append_to_get page=0,paginate_by=0,sort_by=0,view_type=0 no_path %}{% endfilter %}">
    {% if view_type == "map" %}
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false&amp;language={{ LANGUAGE_CODE }}&amp;region=DE"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/styledinfowindow.js"></script>
        <script type="text/javascript">
        //<![CDATA[
            var aGeopositions = [];
        //]]>
        </script>
    {% endif %}
{% endblock %}


{% block details %}
    {% include "site_specific/count_of.html" %}
    {% if object_list %}
        {% include "utils/includes/sorting_and_pagination.html" %}
        {% if view_type == "map" %}
            <noscript>{% infoblock "js_warning" %}</noscript>
            <div id="dyn_map" class="to_show">
                <div id="gmap" style="width: 512px; height: 512px; position: relative;"></div>
            </div>
        {% endif %}
        <div id="object_list">
            {% for event in object_list %}
                {% if view_type == "icons" %}
                    {% include_parsed "events/lists/event_icons.html" with "vevent" as extra_css_classes %}
                {% endif %}
                {% if view_type == "listed" %}
                    {% if forloop.first %}
                    <table class="events">
                    {% endif %}
                    
                    {% include_parsed "events/lists/event_listed.html" with "vevent" as extra_css_classes %}
                    
                    {% if forloop.last %}
                    </table>
                    {% endif %}
                {% endif %}
                {% if view_type == "map" %}
                    {% include_parsed "events/lists/event_mapped.html" with "vevent" as extra_css_classes %}
                {% endif %}
            {% endfor %}
        </div>
        
        {% include "utils/includes/sorting_and_pagination.html" %}

    {% else %}
        <p class="nothing">{% blocktrans with object.get_title as person_title %}There were no events of {{ person_title }} found within the selected conditions.{% endblocktrans %}</p>
    {% endif %}
{% endblock %}

{% block breadcrumbs_details %}
    <span class="b-sep"><span>::</span></span><span>{% trans "Events" %}</span>
{% endblock %}

{% block extrabody %}
	<script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing.js"></script>
    {% if view_type == "map" %}
        <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/listing_map.js"></script>
    {% endif %}
{% endblock %}
