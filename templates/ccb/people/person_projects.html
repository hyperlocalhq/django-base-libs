{% extends "people/details_base.html" %}
{% comment %}<!-- UNUSED -->{% endcomment %}

{% load i18n base_tags %}

{% block details %}
    <div class="content_facts">

        {% if object.image %}
            <img src="{{ object.image }}" alt="{{ object.get_title|escape }}"/>
        {% endif %}

        {% if object.get_description %}
            <div class="description">
                <p>{{ object.get_description }}</p>
            </div>
        {% endif %}

        <div class="{% if object.has_opening_hours %}address_field{% else %}address_field_large{% endif %}">
            <h3 class="right_h3">{% trans "details" %}</h3>

            <div id="address">
                {% for contact in object.get_contacts %}
                    {% if forloop.first %}
                        <h4 class="first">{{ contact.location_title }}</h4>
                    {% else %}
                        <h4 class="other">{{ contact.location_title }}</h4>
                    {% endif %}
                    <h4>address</h4>

                    <address class="adr">
                        {% for institution in object.get_institutions %}
                            {% if forloop.first %}{% endif %}
                            <a href="{{ institution.get_url_path }}">{{ institution.get_title|escape }}</a>
                            {% if forloop.last %}<br/>{% else %},<br/> {% endif %}
                        {% endfor %}
                        {% with contact.postal_address as address %}
                            {% if address.street_address %}
                                <span class="street-address">{{ address.street_address|escape }}</span>
                            {% endif %}
                            {% if address.street_address2 %}
                                <span class="street-address">{{ address.street_address2|escape }}</span>
                            {% endif %}
                            {% if address.street_address3 %}
                                <span class="street-address">{{ address.street_address3|escape }}</span>
                            {% endif %}
                            {% if address.postal_code %}
                                <span class="postal-code">{{ address.postal_code|escape }}</span>
                                <span class="locality">{{ address.city|escape }}</span>
                            {% endif %}
                            {% if address.country %}
                                <span class="country-name">{{ address.country.get_name }}</span>
                            {% endif %}
                        {% endwith %}
                    </address>

                    {% if contact.get_phones or contact.get_urls or contact.get_emails or contact.get_ims %}
                        <h4>{% trans "Contact" %}</h4>
                        {% for phone in contact.get_phones %}
                            {% if forloop.first %}
                                <dl> {% endif %}
                        {% if phone.type %}
                            <dt>{{ phone.type }}:</dt>{% endif %}
                        <dd>+{{ phone.country }}-{{ phone.area }}-{{ phone.number }}</dd>
                        {% if forloop.last %} </dl> {% endif %}

                            {% if phone.type %}
                                <div class="tel" style="display:none">
                                    {% ifequal phone.type.slug "phone" %}
                                        <abbr class="type" title="work">{{ phone.type }}</abbr>
                                    {% else %}
                                        {% ifequal phone.type.slug "fax" %}
                                            <abbr class="type" title="fax">{{ phone.type }}</abbr>
                                        {% else %}
                                            {% ifequal phone.type.slug "mobile" %}
                                                <abbr class="type" title="cell">{{ phone.type }}</abbr>
                                            {% else %}
                                                <abbr class="type" title="home">{{ phone.type }}</abbr>
                                            {% endifequal %}
                                        {% endifequal %}
                                    {% endifequal %}
                                    <span class="value">+{{ phone.country }}-{{ phone.area }}-{{ phone.number }}</span>
                                </div>
                            {% endif %}
                        {% endfor %}

                        {% for url in contact.get_urls %}
                            {% if forloop.first %}
                                <h4>{% trans "WEBSITE" %}</h4> {% endif %}
                            <dl>
                                {% if url.type %}
                                    <dt>{{ url.type }}:</dt>
                                    <dd>
                                        <a class="url" href="{{ url.link|escape }}" onclick="open_new_window(event)">
                                            {% with url.link|slice:"0:26"|escape as sliced %}{{ sliced }}
                                                {% with url.link|escape as not_sliced %}
                                                    {% ifnotequal sliced not_sliced %}
                                                        ...{% endifnotequal %}{% endwith %}{% endwith %}</a>
                                    </dd>
                                {% else %}
                                    <dd>
                                        <a class="url" href="{{ url.link|escape }}" onclick="open_new_window(event)">
                                            {% with url.link|slice:"0:38"|escape as sliced %}{{ sliced }}
                                                {% with url.link|escape as not_sliced %}
                                                    {% ifnotequal sliced not_sliced %}
                                                        ...{% endifnotequal %}{% endwith %}{% endwith %}</a>
                                    </dd>
                                {% endif %}
                            </dl>
                        {% endfor %}
                        {% for im in contact.get_ims %}
                            <h4>{{ im.type }}:</h4>
                            <dl>
                                <dd>{{ im.address }}</dd>
                            </dl>
                        {% endfor %}
                    {% endif %}
                {% endfor %}


                {% if object.gender %}
                    <h4>{% trans "gender" %}</h4>
                    <dl>
                        <dd>{{ object.get_gender_display }}</dd>
                    </dl>
                {% endif %}

                {% if object.get_birthday %}
                    <h4>{% trans "birthday" %}</h4>
                    <dl>
                        <dd>{{ object.get_birthday|date:_("DATE_FORMAT") }}</dd>
                    </dl>
                {% endif %}

                {% if object.nationality %}
                    <h4>{% trans "nationality" %}</h4>
                    <dl>
                        <dd>{{ object.nationality.get_name }}</dd>
                    </dl>
                {% endif %}

                {% if object.degree %}
                    <h4>{% trans "degree" %}</h4>
                    <dl>
                        <dd>{{ object.degree }}</dd>
                    </dl>
                {% endif %}

                {% if object.occupation %}
                    <h4>{% trans "occupation" %}</h4>
                    <dl>
                        <dd>{{ object.occupation }}</dd>
                    </dl>
                {% endif %}

                {% if object.interests %}
                    <h4>{% trans "interests" %}</h4>
                    <dl>
                        <dd>{{ object.interests }}</dd>
                    </dl>
                {% endif %}


                {% for language in object.get_spoken_languages %}
                    {% if forloop.first %}
                        <h4>{% trans "spoken languages" %}</h4>
                        <dl>
                        <dd> {% endif %}
                {{ language.get_name }}{% if forloop.last %}</dd></dl>{% else %}, {% endif %}
                {% endfor %}

                {% if object.preferred_language %}
                    <h4>{% trans "preferred language" %}</h4>
                    <dl>
                        <dd>{{ object.preferred_language.get_name }}</dd>
                    </dl>
                {% endif %}
            </div>
        </div>
    </div>
    <div id="content_info"></div>
{% endblock %}
