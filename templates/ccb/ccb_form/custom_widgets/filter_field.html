{% load crispy_forms_filters %}
{% load l10n %}

{% with html_name=field.html_name value=field.value|add:"0" choices=field.field.choices attrs=field.field.widget.attrs %}
<li class="accordion-inside accordion-trigger" id="{{ html_name }}">
    <input type="hidden" name="{{ html_name }}" value="{% if value|add:"0" != 0 %}{{ value }}{% endif %}" />
    <div class="child accordion-trigger">{{ field.label }}</div>
    <ul class="accordion">
        {% for choice_value, choice_instance in choices %}
            {% if choice_instance.level == 0 %}
                <li data-level="{{ choice_instance.level }}"><a href="javascript:void(0);" data-value="{{ choice_value }}" {% if value == choice_value|add:"0" or value == choice_value %}class="active"{% endif %}>{{ choice_instance.title }}</a></li>
            {% else %}
                <li data-level="{{ choice_instance.level }}"><a href="javascript:void(0);" data-value="{{ choice_value }}" {% if value == choice_value|add:"0" or value == choice_value %}class="active"{% endif %}>{% if choice_instance.level == 1 %} - {% endif %}{{ choice_instance.title }}</a></li>
            {% endif %}
        {% endfor %}
    </ul>
</li>
{% endwith %}
    
{% comment %}
<dd>
    {% include 'ccb_form/layout/field_errors.html' %}
    <ul class="accordion boxes adjust-level">
        {% with html_name=field.html_name value=field.value choices=field.field.choices attrs=field.field.widget.attrs %}
            {% for choice_value, choice_instance in choices %}
                <li data-level="{{ choice_instance.level }}">
                    <div class="input-field box {{ field_class }} {{ inline_class }}">
                        <input
                            id="id_{{ html_name }}_{{ forloop.counter }}"
                            name="{{ html_name }}"
                            type="checkbox"
                            {% if choice_value in value or choice_value|stringformat:"s" in value or choice_value|stringformat:"s" == value|stringformat:"s" %}
                                checked="checked"{% endif %}
                            value="{{ choice_value|unlocalize }}" {{ attrs|flatatt }}
                        />
                        <label for="id_{{ html_name }}_{{ forloop.counter }}">
                            {{ choice_instance.title }}
                        </label>
                    </div>
                </li>
            {% endfor %}
        {% endwith %}
    </ul>
    {% include 'ccb_form/layout/help_text.html' %}
</dd>
{% endcomment %}