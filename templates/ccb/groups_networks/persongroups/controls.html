{% load i18n base_tags memos groups_networks auth_extended browsing favorites %}
{% with forloop.counter as counter %}
    {% with persongroup|get_context_item as context_item %}
        <div class="toolbar">
            <ul>
                {% if user.is_authenticated %}
                    <li class="memo">{% adding2memos for persongroup %}</li>
                    <li class="favorites">{% adding2favorites for context_item %}</li>
                    {% adding_group_membership at persongroup %}
                {% else %}
                    <li class="memo">{% adding2memos for persongroup %}</li>
                    <li class="favorites">
                        <a href="/login/?goto_next={{ request.path }}"
                            title="{% trans "Add to favorites" %}">
                            <span>{% trans "Add to favorites" %} ({% trans "login request" %})</span></a>
                    </li>
                {% endif %}
                {% if request.user.is_staff %}
                    {% if_has_perm "groups_networks.change_persongroup" persongroup %}
                        <li class="admin_edit">
                            <a href="/admin/groups_networks/persongroup/{{ group.id }}/" class="edit_link"
                                onclick="open_new_window(event)"><span>{% trans "edit Group" %}</span></a>
                        </li>
                    {% end_if_has_perm %}
                {% endif %}
            </ul>
        </div>
    {% endwith %}
{% endwith %}
