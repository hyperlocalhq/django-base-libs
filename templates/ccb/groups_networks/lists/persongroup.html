{% extends "utils/lists/base_context_item.html" %}
{% load i18n base_tags babel image_mods_tags %}

{% block object_image %}
    <a href="{{ person.get_url_path }}">
        {% if persongroup.image %}
            <img alt="{{ person.get_title|escape }}" src="{{ UPLOADS_URL }}{{ persongroup.image|modified_path:"al" }}"/>
        {% else %}
            <img alt="{{ person.get_title|escape }}"
                src="{{ STATIC_URL }}site/img/website/placeholder/persongroup_m.png"/>
        {% endif %}
    </a>
{% endblock %}

{% block object_title %}
    <a class="group_hl" href="{{ persongroup.get_url_path }}">{{ persongroup.get_title|escape }}</a>
{% endblock %}

{% block object_absolute_url %}{{ persongroup.get_url_path }}{% endblock %}

{% block object_col1 %}
{% endblock %}

{% block object_col2 %}
    {% if persongroup.group_type %}
        <div class="object-type">{{ persongroup.group_type.get_title|escape }}</div>
    {% endif %}
    <div>
        {{ persongroup.access_type.get_title }}
    </div>
    <div>
        {% if persongroup.is_by_invitation and group.is_by_confirmation %}
            {% trans "By approved request or by invitation" %}
        {% else %}
            {% if persongroup.is_by_invitation %}
                {% trans "By invitation only" %}
            {% else %}
                {% trans "Anyone can join" %}
            {% endif %}
        {% endif %}
    </div>
    {% if persongroup.get_description %}
        {% with persongroup.get_description|striptags|truncatewords:"60" as filtered_desc %}
            {% with filtered_desc|truncatewords:"40" as shortened_desc %}
                <p class="description hidable">{{ shortened_desc }}
                    {% ifnotequal shortened_desc filtered_desc %}
                        <a href="{{ group.get_url_path }}">{% trans "read more" %}</a>
                    {% endifnotequal %}
                </p>
            {% endwith %}{% endwith %}
    {% endif %}
{% endblock %}

{% block object_controls %}
    {% include "groups_networks/persongroups/controls.html" %}
{% endblock %}

