{% extends "base.html" %}
{% load i18n base_tags %}

{% block extrahead %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/generic.js"></script>
{% endblock %}

{% block title %}{% trans "Send an Email" %}{% endblock %}

{% block sidebar-b %}{% endblock %}

{% block content %}
	<form method="post" action="">

	    <h3>{% trans "Write a message" %}</h3>
	    
	    {% if form %}
	    
	    	{% if not request.user.is_authenticated %}
		    	<div class="field_layout">
		            {{ form.sender_name.label_tag }}
		            {{ form.sender_name }}
		            
		            {% if form.sender_name.errors %}
				    	<div class="error">
		    				{{ form.sender_name.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>
		        
			    <div class="field_layout">
		            {{ form.sender_email.label_tag }}
		            {{ form.sender_email }}
		            
		            {% if form.sender_email.errors %}
				    	<div class="error">
		    				{{ form.sender_email.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>
  		    {% endif %}

	    	
	    	{% if display_recipients_list %}
	    	
		    	<div class="field_layout">
		            {{ form.recipients_email_list.label_tag }}
		            {{ form.recipients_email_list }}
		            
		            {% if form.recipients_email_list.errors %}
				    	<div class="error">
		    				{{ form.recipients_email_list.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>

		    {% endif %}

		    
		    {% if display_recipients_input %}

		    	<div class="field_layout">
		            {{ form.recipients_email_input.label_tag }}
		            {{ form.recipients_email_input }}
		            
		            {% if form.recipients_email_input.errors %}
				    	<div class="error">
		    				{{ form.recipients_email_input.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>
		        
		    {% endif %} 
		    
		    {% if display_en %}
		        <div class="field_layout">
		            {{ form.subject.label_tag }}
		            {{ form.subject }}
		            
		            {% if form.subject.errors %}
				    	<div class="error">
		    				{{ form.subject.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>
		        
		        <div class="field_layout">
		            {{ form.body.label_tag }}
		            {{ form.body }}
		            
		            {% if form.body.errors %}
				    	<div class="error">
		    				{{ form.body.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>
		        
		    {% endif %} 		       
		    
		    {% if display_de %}
		        <div class="field_layout">
		            {{ form.subject_de.label_tag }}
		            {{ form.subject_de }}
		            
		            {% if form.subject_de.errors %}
				    	<div class="error">
		    				{{ form.subject_de.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>
		        
		        <div class="field_layout">
		            {{ form.body_de.label_tag }}
		            {{ form.body_de }}
		            
		            {% if form.body_de.errors %}
				    	<div class="error">
		    				{{ form.body_de.errors|join:", "}}
				    	</div>
				    {% endif %}
		        </div>
		        
		    {% endif %} 		       
		    
	        
            <div class="buttons">
                <input type="hidden" name="goto_next" value="{% if goto_next %}{{ goto_next }}{% else %}{{ request.get_full_path }}{% endif %}" />
                <input type="submit" value="Nachricht senden" class="button-good" id="send_but" />
            </div>
	    {% else %}
	        <p>{% trans "Your message has been sent." %}</p>
	    {% endif %}

	</form>

{% endblock %}
