{% extends "base.html" %}
{% load base_tags i18n site_specific events %}

{% block extrahead %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/add_event.js"></script>
{% endblock %}


{% block title %}{% trans "Registration" %} - {% trans "Event" %}{% endblock %}

{% block headline %}
    <h2 class="main">{% trans "Registration" %}</h2>
    <h2 class="sub">{% trans "Event" %}</h2>
{% endblock %}

{% block sidebar-a %}
    {% include "utils/step_list.html" %}
{% endblock %}

{% block sidebar-b %}{% endblock %}

{% block content %}
    <div class="reg confirm">
        <div class="field_layout">
            <form action="" method="post">{% csrf_token %}
                <h5 class="begin">{% trans "Confirm Entered Data" %}</h5>

                <h3>{{ form_step_data.0.title }}</h3>
                <h4 class="type">
                    {% with form_step_data.0 as form0 %}
                        {% get_date_period_formatted from form0.start_yyyy form0.start_mm form0.start_dd to form0.end_yyyy form0.end_mm form0.end_dd as event_period %}
                        {{ event_period }}
                    {% endwith %}
                </h4>

                <div class="events_profile reg-block">
                    <img src="{% if form_step_data.1.image %}/helper/tmpimage/{{ form_step_data.1.image.tmp_filename }}/{{ LOGO_PREVIEW_SIZE }}/{% else %}{{ DEFAULT_FORM_LOGO_4_EVENT }}{% endif %}"
                         alt="{% trans "Image" %}"/>
                </div>
                {% ifequal LANGUAGE_CODE "de" %}
                    <div class="events_profile_txt">{{ form_step_data.1.description_de }}</div>
                {% else %}
                    <div class="events_profile_txt">{{ form_step_data.1.description_en }}</div>
                {% endifequal %}

                <div class="cleaner"></div>
                <h5>{% trans "Event Details" %}</h5>
                <div class="check">
                    <dl>
                        <dt>{% trans "Address" %}:</dt>
                        <dd>
                            <address>
                                {% if form_step_data.0.venue %}
                                    {% get_institution form_step_data.0.venue as venue %}

                                    <a href="{{ venue.get_url_path }}">{{ venue.get_title }}</a>
                                    <br/>
                                    {% with venue.get_primary_contact as venue_contact %}
                                        {{ venue_contact.street_address|escape }}
                                        <br/>
                                        {% if venue_contact.street_address2 %}
                                            {{ venue_contact.street_address2|escape }}
                                            <br/>
                                        {% endif %}
                                        {{ venue_contact.postal_code|escape }} {{ venue_contact.city|escape }}
                                        <br/>
                                        {{ venue_contact.country_name }}
                                    {% endwith %}
                                {% else %}
                                    {{ form_step_data.0.venue_title }}
                                    <br/>
                                    {{ form_step_data.0.street_address|escape }}
                                    <br/>
                                    {% if form_step_data.0.street_address2 %}
                                        {{ form_step_data.0.street_address2|escape }}
                                        <br/>
                                    {% endif %}
                                    {{ form_step_data.0.postal_code|escape }} {{ form_step_data.0.city|escape }}
                                    <br/>
                                    {{ form_step_data.0.get_country_display }}
                                {% endif %}
                            </address>
                        </dd>
                    </dl>
                    <dl>
                        {% if form_step_data.0.phone_number %}
                            <dt>{% trans "Phone" %}:</dt>
                            <dd>+{% if form_step_data.0.phone_country %}{{ form_step_data.0.phone_country }}{% else %}49{% endif %}-{{ form_step_data.0.phone_area }}-{{ form_step_data.0.phone_number }}</dd>
                        {% endif %}

                        {% if form_step_data.0.fax_number %}
                            <dt>{% trans "Fax" %}:</dt>
                            <dd>+{% if form_step_data.0.fax_country %}{{ form_step_data.0.fax_country }}{% else %}49{% endif %}-{{ form_step_data.0.fax_area }}-{{ form_step_data.0.fax_number }}</dd>
                        {% endif %}
                    </dl>
                    <dl>
                        {% if form_step_data.0.email0_address %}
                            <dt>{% trans "Email" %}:</dt>
                            <dd>{{ form_step_data.0.email0_address }}</dd>
                        {% endif %}
                        {% if form_step_data.0.email0_address %}
                            <dt>{% trans "Homepage" %}:</dt>
                            <dd>
                                <a href="{{ form_step_data.0.url0_link }}">{{ form_step_data.0.url0_link }}</a>
                            </dd>
                        {% endif %}
                    </dl>

                    <dl>
                        {% if form_step_data.2.fee0_amount %}
                            <dt>{% trans "Fees" %}:</dt>
                            <dd>{{ form_step_data.2.fee0_label_en }} ({{ form_step_data.2.fee0_label_de }}) {{ form_step_data.2.fee0_amount|to_currency }}</dd>
                            {% if form_step_data.2.fee1_amount %}
                                <dd>{{ form_step_data.2.fee1_label_en }} ({{ form_step_data.2.fee1_label_de }}) {{ form_step_data.2.fee1_amount|to_currency }}</dd>
                            {% endif %}
                            {% if form_step_data.2.fee2_amount %}
                                <dd>{{ form_step_data.2.fee2_label_en }} ({{ form_step_data.2.fee2_label_de }}) {{ form_step_data.2.fee2_amount|to_currency }}</dd>
                            {% endif %}
                            {% if form_step_data.2.fee3_amount %}
                                <dd>{{ form_step_data.2.fee3_label_en }} ({{ form_step_data.2.fee3_label_de }}) {{ form_step_data.2.fee3_amount|to_currency }}</dd>
                            {% endif %}
                            {% if form_step_data.2.fee4_amount %}
                                <dd>{{ form_step_data.2.fee4_label_en }} ({{ form_step_data.2.fee4_label_de }}) {{ form_step_data.2.fee4_amount|to_currency }}</dd>
                            {% endif %}
                            {% if form_step_data.2.fee5_amount %}
                                <dd>{{ form_step_data.2.fee5_label_en }} ({{ form_step_data.2.fee5_label_de }}) {{ form_step_data.2.fee5_amount|to_currency }}</dd>
                            {% endif %}
                        {% endif %}
                    </dl>

                    {% if form_step_data.2.mon_open or form_step_data.2.mon_is_closed or form_step_data.2.tue_open or form_step_data.2.tue_is_closed or form_step_data.2.wed_open or form_step_data.2.wed_is_closed or form_step_data.2.thu_open or form_step_data.2.thu_is_closed or form_step_data.2.fri_open or form_step_data.2.fri_is_closed or form_step_data.2.sat_open or form_step_data.2.sat_is_closed or form_step_data.2.sun_open or form_step_data.2.sun_is_closed %}
                        <dl>
                            <dt>{% trans "Opening Hours" %}:</dt>
                            <dd class="time">
                                {% if form_step_data.2.mon_open or form_step_data.2.mon_is_closed %}
                                    {% trans "Monday" %}:
                                    {% if form_step_data.2.mon_is_closed %}
                                        {% trans "closed" %}
                                    {% else %}
                                        {{ form_step_data.2.mon_open|time:_("TIME_FORMAT") }}
                                        {% if form_step_data.2.mon_break_close %}
                                            - {{ form_step_data.2.mon_break_close|time:_("TIME_FORMAT") }},
                                            {{ form_step_data.2.mon_break_open|time:_("TIME_FORMAT") }}
                                            - {{ form_step_data.2.mon_close|time:_("TIME_FORMAT") }}
                                        {% else %}
                                            - {{ form_step_data.2.mon_close|time:_("TIME_FORMAT") }}
                                        {% endif %}
                                    {% endif %}
                                    <br/>
                                {% endif %}
                                {% if form_step_data.2.tue_open or form_step_data.2.tue_is_closed %}
                                    {% trans "Tuesday" %}:
                                    {% if form_step_data.2.tue_is_closed %}
                                        {% trans "closed" %}
                                    {% else %}
                                        {{ form_step_data.2.tue_open|time:_("TIME_FORMAT") }}
                                        {% if form_step_data.2.tue_break_close %}
                                            - {{ form_step_data.2.tue_break_close|time:_("TIME_FORMAT") }},
                                            {{ form_step_data.2.tue_break_open|time:_("TIME_FORMAT") }}
                                            - {{ form_step_data.2.tue_close|time:_("TIME_FORMAT") }}
                                        {% else %}
                                            - {{ form_step_data.2.tue_close|time:_("TIME_FORMAT") }}
                                        {% endif %}
                                    {% endif %}
                                    <br/>
                                {% endif %}

                                {% if form_step_data.2.wed_open or form_step_data.2.wed_is_closed %}
                                    {% trans "Wednesday" %}:
                                    {% if form_step_data.2.wed_is_closed %}
                                        {% trans "closed" %}
                                    {% else %}
                                        {{ form_step_data.2.wed_open|time:_("TIME_FORMAT") }}
                                        {% if form_step_data.2.wed_break_close %}
                                            - {{ form_step_data.2.wed_break_close|time:_("TIME_FORMAT") }},
                                            {{ form_step_data.2.wed_break_open|time:_("TIME_FORMAT") }}
                                            - {{ form_step_data.2.wed_close|time:_("TIME_FORMAT") }}
                                        {% else %}
                                            - {{ form_step_data.2.wed_close|time:_("TIME_FORMAT") }}
                                        {% endif %}
                                    {% endif %}
                                    <br/>
                                {% endif %}

                                {% if form_step_data.2.thu_open or form_step_data.2.thu_is_closed %}
                                    {% trans "Thursday" %}:
                                    {% if form_step_data.2.thu_is_closed %}
                                        {% trans "closed" %}
                                    {% else %}
                                        {{ form_step_data.2.thu_open|time:_("TIME_FORMAT") }}
                                        {% if form_step_data.2.thu_break_close %}
                                            - {{ form_step_data.2.thu_break_close|time:_("TIME_FORMAT") }},
                                            {{ form_step_data.2.thu_break_open|time:_("TIME_FORMAT") }}
                                            - {{ form_step_data.2.thu_close|time:_("TIME_FORMAT") }}
                                        {% else %}
                                            - {{ form_step_data.2.thu_close|time:_("TIME_FORMAT") }}
                                        {% endif %}
                                    {% endif %}
                                    <br/>
                                {% endif %}

                                {% if form_step_data.2.fri_open or form_step_data.2.fri_is_closed %}
                                    {% trans "Friday" %}:
                                    {% if form_step_data.2.fri_is_closed %}
                                        {% trans "closed" %}
                                    {% else %}
                                        {{ form_step_data.2.fri_open|time:_("TIME_FORMAT") }}
                                        {% if form_step_data.2.fri_break_close %}
                                            - {{ form_step_data.2.fri_break_close|time:_("TIME_FORMAT") }},
                                            {{ form_step_data.2.fri_break_open|time:_("TIME_FORMAT") }}
                                            - {{ form_step_data.2.fri_close|time:_("TIME_FORMAT") }}
                                        {% else %}
                                            - {{ form_step_data.2.fri_close|time:_("TIME_FORMAT") }}
                                        {% endif %}
                                    {% endif %}
                                    <br/>
                                {% endif %}

                                {% if form_step_data.2.sat_open or form_step_data.2.sat_is_closed %}
                                    {% trans "Saturday" %}:
                                    {% if form_step_data.2.sat_is_closed %}
                                        {% trans "closed" %}
                                    {% else %}
                                        {{ form_step_data.2.sat_open|time:_("TIME_FORMAT") }}
                                        {% if form_step_data.2.sat_break_close %}
                                            - {{ form_step_data.2.sat_break_close|time:_("TIME_FORMAT") }},
                                            {{ form_step_data.2.sat_break_open|time:_("TIME_FORMAT") }}
                                            - {{ form_step_data.2.sat_close|time:_("TIME_FORMAT") }}
                                        {% else %}
                                            - {{ form_step_data.2.sat_close|time:_("TIME_FORMAT") }}
                                        {% endif %}
                                    {% endif %}
                                    <br/>
                                {% endif %}

                                {% if form_step_data.2.sun_open or form_step_data.2.sun_is_closed %}
                                    {% trans "Sunday" %}:
                                    {% if form_step_data.2.sun_is_closed %}
                                        {% trans "closed" %}
                                    {% else %}
                                        {{ form_step_data.2.sun_open|time:_("TIME_FORMAT") }}
                                        {% if form_step_data.2.sun_break_close %}
                                            - {{ form_step_data.2.sun_break_close|time:_("TIME_FORMAT") }},
                                            {{ form_step_data.2.sun_break_open|time:_("TIME_FORMAT") }}
                                            - {{ form_step_data.2.sun_close|time:_("TIME_FORMAT") }}
                                        {% else %}
                                            - {{ form_step_data.2.sun_close|time:_("TIME_FORMAT") }}
                                        {% endif %}
                                    {% endif %}
                                    <br/>
                                {% endif %}
                            </dd>
                        </dl>
                    {% endif %}
                </div>

                <div class="cleaner"></div>
                <h5 class="checkline">{% trans "Additional Information" %}</h5>

                <div class="check">
                    <dl>
                        <dt>{% trans "Organizer" %}:</dt>
                        <dd>
                            {% ifequal form_step_data.0.organizer_ind "1" %}
                                <address>
                                    {% if form_step_data.0.organizing_institution %}
                                        {% get_institution form_step_data.0.organizing_institution as organizing_institution %}

                                        <a href="{{ organizing_institution.get_url_path }}">{{ organizing_institution.get_title }}</a>
                                        <br/>
                                        {% with organizing_institution.get_primary_contact as organizing_institution_contact %}
                                            {{ organizing_institution_contact.street_address|escape }}
                                            <br/>
                                            {% if organizing_institution_contact.street_address2 %}
                                                {{ organizing_institution_contact.street_address2|escape }}
                                                <br/>
                                            {% endif %}
                                            {{ organizing_institution_contact.postal_code|escape }} {{ organizing_institution_contact.city|escape }}
                                            <br/>
                                            {{ organizing_institution_contact.country_name }}
                                        {% endwith %}
                                    {% else %}
                                        {{ form_step_data.0.organizer_title }}
                                        <br/>
                                        <a href="{{ form_step_data.0.organizer_url_link }}">{{ form_step_data.0.organizer_url_link }}</a>
                                    {% endif %}
                                </address>
                            {% endifequal %}
                            {% ifequal form_step_data.0.organizer_ind "0" %}
                                {% trans "Organizer is venue" %}
                            {% endifequal %}
                            {% ifequal form_step_data.0.organizer_ind "2" %}
                                {% trans "I am the orgnaizer of this event" %}
                            {% endifequal %}
                        </dd>
                    </dl>
                </div>

                {% get_context_categories form_step_data.3 as context_categories %}
                {% if context_categories %}
                    <div class="cleaner"></div>
                    <h5>{% trans "Category" %}</h5>
                    <div class="check border">
                        <dl>
                            {% if context_categories %}
                                <dt>{% trans "Context Category" %}:</dt>
                                <dd>
                                    {% for context_category in context_categories %}
                                        {{ context_category.get_title }}{% if not forloop.last %}, {% endif %}
                                    {% endfor %}
                                </dd>
                            {% endif %}
                        </dl>
                    </div>
                    <div id="line_end_fieldset_no_marge"></div>
                {% endif %}
                {% include "utils/step_buttons_reg.html" %}
                <div class="cleaner"></div>
            </form>
        </div>
    </div>
{% endblock %}

