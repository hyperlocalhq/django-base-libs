{% load i18n base_tags babel %}
{% ifequal forloop.first forloop.last %}{% endifequal %}
{% if time.label %}<span class="type">{{ time.label }}:</span>{% endif %}
{% ifnotequal object.eventtime_set.count 1 %}<a href="{{ time.event.get_url_path }}{{ time.get_secure_id }}/">{% endifnotequal %}
<abbr class="dtstart" title="{{ time.start|date:"Y-m-d\TH:i:s" }}">
{% if time.start_dd %}
    {{ time.start|datefmt:"long" }}
{% else %}
    {% if time.start_mm %}{{ time.get_start_mm_display }}{% endif %}
    {{ time.start_yyyy }}
{% endif %}
{% if time.has_start_time %}{{ time.start|time:"H:i" }}{% endif %}
</abbr>
{% if time.is_end_date_defined %}{% ifnotequal time.start time.end %}
    - 
    <abbr class="dtend" title="{{ time.end|date:"Y-m-d\TH:i:s" }}">
        {% ifnotequal time.start|date time.end|date %}
            {% if time.end_dd %}
                {{ time.end|datefmt:"long" }}
            {% else %}
                {% if time.end_mm %}{{ time.get_end_mm_display }}{% endif %}
                {{ time.end_yyyy }}
            {% endif %}
        {% endifnotequal %}
        {% if time.has_end_time %}{{ time.end|time:"H:i" }}{% endif %}
    </abbr>
{% endifnotequal %}{% endif %}
{% ifnotequal object.eventtime_set.count 1 %}</a>{% endifnotequal %}

