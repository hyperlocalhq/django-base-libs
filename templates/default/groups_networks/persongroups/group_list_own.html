{% extends "base.html" %}
{% load i18n base_tags navigation_tags auth_extended %}

{% block extrahead %}
	<script type="text/javascript" src="{{ STATIC_URL }}site/js/website/generic.js"></script>
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/groups_networks.js"></script>
{% endblock %}


{% block title %}{% trans "Groups" %}{% endblock %}

{% block headline %}
	<h2 class="main">{% trans "Groups" %}</h2>
{% endblock %}			



{% block content %}
<div class="list">
    {% block tabs %}
        <div id="tabs">
            {% children_of "groups" using "navigation/children_in_tabs.html" %}
        </div>
    {% endblock %}

    {% include "utils/sorting_view_pagination_header.html" %}
    
    {% if object_list %}
        
        {% for group in object_list %}
            <div class="info {% cycle odd,even %} expanded" onclick="redirect('{{ group.get_url_path }}');">
                <div class="info_address">
                    <h4>
                        <a class="group_hl" href="{{ group.get_url_path }}">{{ group.get_title|escape }}</a>
                   </h4>
                </div>
                <div class="info_facts">
                    {% if group.group_type %}
                        <div class="type">{{ group.group_type.get_title|escape }}</div>
                    {% endif %}
                    <div>
                        {{ group.access_type.get_title }}
                    </div>
                    <div>
                        {% if group.is_by_invitation and group.is_by_confirmation %}
                            {% trans "By approved request or by invitation" %}
                        {% else %}
                            {% if group.is_by_invitation %}
                                {% trans "By invitation only" %}
                            {% else %}
                                {% trans "Anyone can join" %}
                            {% endif %}
                        {% endif %}
                    </div>
                    {% if group.get_description %}
                        {% with group.get_description|striptags|truncatewords:"60" as filtered_desc %}{% with filtered_desc|truncatewords:"40" as shortened_desc %}
                            <p class="description hidable">{{ shortened_desc }}
                                {% ifnotequal shortened_desc filtered_desc %}
                                <a href="{{ group.get_url_path }}">{% trans "read more" %}</a>
                                {% endifnotequal %}
                            </p>
                        {% endwith %}{% endwith %}
                    {% endif %}	
                </div>
                {% include "groups_networks/persongroups/controls.html" %}
                <div class="cleaner"></div>
            </div><!-- end of info -->
        {% endfor %}
        
        {% include "utils/pagination_footer.html" %}
     
    {% else %}
        <p class="nothing">{% trans "No objects found within the selected conditions." %}</p>
    {% endif %}
    <div class="cleaner"></div>
</div>
{% endblock %}

