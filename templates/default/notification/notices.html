{% extends "base.html" %}

{% load i18n babel %}

{% block head_title %}{% trans "Notices" %}{% endblock %}

{% block extra_head %}
    <link rel="alternate" type="application/atom+xml" title="Notices Feed" href="{% url 'notification_feed_for_user' %}" />
{% endblock %}

{% block title %}{% trans "Notices" %}{% endblock %}

{% block headline %}
    <h2 class="main">{% trans "Notices" %}</h2>
{% endblock %}

{% block content %}
    
    {% if notices %}
        <a href="{% url 'notification_mark_all_seen' %}">{% trans "Mark all unseen notices seen" %}</a>
        
        {% regroup notices by added.date as notices_by_date %}
        
        {% for date in notices_by_date %}
            <h2 class="notice_date">{{ date.grouper|datefmt }}</h2>
            
            {% for notice in date.list %}
                {% if notice.is_unseen %}
                    <div class="unseen_notice">
                {% else %}
                    <div class="notice">
                {% endif %}
                    <span class="notice_type">[{% trans notice.notice_type.display %}]</span>
                    <span class="notice_message">{{ notice.message|safe }}</span>
                    <span class="notice_time">{{ notice.added|timefmt }}</span>
                </div>
            {% endfor %}
        {% endfor %}
        
    {% else %}
        <p>{% trans "No notices." %}</p>
    {% endif %}

{% endblock %}
