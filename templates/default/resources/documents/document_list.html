{% extends "base.html" %}
{% load i18n base_tags navigation_tags auth_extended %}

{% block extrahead %}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/website/generic.js"></script>
{% endblock %}


{% block title %}{% trans "Documents" %}{% endblock %}

{% block headline %}
    <h2 class="main">{% trans "Documents" %}</h2>
{% endblock %}

{% block content %}
    {% block tabs %}
        <div id="tabs">
            {% children_of "documents" using "navigation/children_in_tabs.html" %}
        </div>
    {% endblock %}
    {% if object_list %}
        {% include "utils/sorting_view_pagination_header.html" %}
        {% block breadcrumbs %}
            <div class="breadcrumbs">
                <div>
                    {% include "utils/abc_filters.html" %}
                </div>
            </div>
        {% endblock %}
        {% for document in object_list %}
            <div class="list-item {% cycle odd,even %} expanded" onclick="redirect('{{ document.get_url_path }}');">
                <div class="info-group-a">
                    <h5>
                        <a href="{{ document.get_url_path }}">{{ document.get_title|escape }}</a>
                    </h5>
                    {% include "resources/documents/controls.html" %}
                </div>
                <div class="info-group-b">
                    {% if document.document_type %}
                        <div class="object-type">{{ document.document_type.get_title|escape }}</div>
                    {% endif %}
                    {% if document.url_link %}
                        {% trans "URL" %}:
                        <a href="{{ document.url_link|escape }}" onclick="open_new_window(event)">
                            {% with document.url_link|slice:"0:35"|escape as sliced %}{{ sliced }}{% with document.url_link|escape as not_sliced %}{% ifnotequal sliced not_sliced %}...{% endifnotequal %}{% endwith %}{% endwith %}</a>
                    {% endif %}
                    {% if document.get_description %}
                        {% with document.get_description|striptags|truncatewords:"60" as filtered_desc %}{% with filtered_desc|truncatewords:"40" as shortened_desc %}
                            <span class="description hidable">{{ shortened_desc }}
                                {% ifnotequal shortened_desc filtered_desc %}
                                    <a href="{{ document.get_url_path }}">{% trans "read more" %}</a>
                                {% endifnotequal %}
                            </span>
                        {% endwith %}{% endwith %}
                    {% endif %}
                </div>
            </div>
            <div class="cleaner"></div>
        {% endfor %}

        {% include "utils/pagination_footer.html" %}

    {% else %}
        <p class="nothing">{% trans "No objects found within the selected conditions." %}</p>
    {% endif %}
{% endblock %}

