{% load base_tags i18n fb_tags image_modifications tagging_tags babel auth_extended infoblocks favorites production_tags %}
<div class="accordion sidebar-accordion">
    <div class="accordion-item">
        <h4 class="accordion-item-head open">{% trans "Venue" %}</h4>
        <div class="accordion-item-content">
            {% if location.logo %}
                <a class="location-link" href="{{ location.get_url_path }}"><img src="{{ MEDIA_URL }}{{ location.logo|modified_path:"list_logo" }}" class="logo" alt="{{ location.title|escape }}"/></a> 
            {% endif %}
            <p data-latitude="{{ location.latitude|stringformat:"%f" }}" data-longitude="{{ location.longitude|stringformat:"%f" }}">
                <a class="location-link" href="{{ location.get_url_path }}">
                <strong>{{ location.title }}</strong><br />
                {% if location.street_address %}{{ location.street_address }}<br />{% endif %}
                {% if location.street_address2 %}{{ location.street_address2 }}<br />{% endif %}
                {% if location.city %}{{ location.postal_code }} {{ location.city }}<br />{% endif %}
                </a>
            </p>
            {% if location.phone_number or location.fax_number or location.email or location.website %}
                <dl>
                    <dd class="headline">{% trans "Contact" %}</dd>
                    {% if location.phone_number %}
                        <dt class="width_50">{% trans "Phone" %}</dt>
                        <dd><a class="phone" href="tel:{% if location.phone_country %}+{{ location.phone_country }}{% endif %}{{ location.phone_area }}{{ location.phone_number }}">{% if location.phone_country %}+{{ location.phone_country }}-{% endif %}{{ location.phone_area }}-{{ location.phone_number }}</a></dd>
                    {% endif %}
                    {% if location.fax_number %}
                        <dt class="width_50">{% trans "Fax" %}</dt>
                        <dd>{% if location.fax_country %}+{{ location.fax_country }}-{% endif %}{{ location.fax_area }}-{{ location.fax_number }}</dd>
                    {% endif %}
                    {% if location.email %}
                        <dt class="width_50">{% trans "Mail" %}</dt>
                        <dd><a href="mailto:{{ location.email }}">{{ location.email }}</a></dd>
                    {% endif %}
                    {% if location.website %}
                        <dt class="width_50">{% trans "Web" %}</dt>
                        <dd><a href="{{ location.website }}" target="_blank" class="no-print">{{ location.website|humanize_url:28 }}</a><a href="{{ location.website }}" target="_blank" class="print">{{ location.website }}</a></dd>
                    {% endif %}
                </dl>
            {% endif %}
            {% if location.get_social_media %}
                <ul class="social_link_list">
                    {% for social in location.get_social_media %}
                        <li><a class="fawesome {{ social.get_class }}" href="{{ social.url }}" target="_blank"><span class="sr-only">{{ social.channel_type }}</span></a></li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
    </div>
    {% if location.stage_set.exists %}
        <div class="accordion-item">
            <h4 class="accordion-item-head">{% trans "Stages" %}</h4>
            <div class="accordion-item-content">
                {% for stage in location.stage_set.all %}
                    <p class="margin" data-latitude="{{ stage.latitude|stringformat:"%f" }}" data-longitude="{{ stage.longitude|stringformat:"%f" }}">
                        <strong>{{ stage.title }}</strong><br />
                        {% if stage.street_address %}{{ stage.street_address }}<br />{% endif %}
                        {% if stage.street_address2 %}{{ stage.street_address2 }}<br />{% endif %}
                        {% if stage.city %}{{ stage.postal_code }} {{ stage.city }}<br />{% endif %}
                    </p>

                    {% if stage.description %}
                        {{ stage.get_rendered_description }}
                    {% endif %}
                {% endfor %}
            </div>
        </div>
    {% endif %}
    {% if location.tickets_street_address or location.get_opening_hours or location.tickets_phone_number or location.tickets_fax_number or location.tickets_email or location.tickets_website %}
        <div class="accordion-item">
            <h4 class="accordion-item-head">{% trans "Tickets Box Office" %}</h4>
            <div class="accordion-item-content">
                {% if location.tickets_street_address %}
                    <p>
                        {{ location.tickets_street_address }}<br />
                        {% if location.tickets_street_address2 %}{{ location.tickets_street_address2 }}<br />{% endif %}
                        {% if location.tickets_city %}{{ location.tickets_postal_code }} {{ location.tickets_city }}<br />{% endif %}
                    </p>
                {% endif %}
                {% if location.get_opening_hours %}
                    <dl>
                        {% for times in location.get_opening_hours %}
                            <dt class="width_80">{{ times.weekday }}</dt>
                            <dd>
                                {% if times.open %}
                                    {{ times.open|time:"H:i" }} -
                                        {% if times.break_open and times.break_close %}
                                            {{ times.break_close|time:"H:i" }}, {{ times.break_open|time:"H:i" }} -
                                        {% endif %}
                                    {{ times.close|time:"H:i" }}
                                {% else %}
                                    {% trans "Closed" %}
                                {% endif %}
                            </dd>
                        {% endfor %}
                    </dl>
                {% endif %}
                {% if location.tickets_additional_info %}
                    <div>
                        {{ location.get_rendered_tickets_additional_info }}
                    </div>
                {% endif %}
                {% if location.tickets_phone_number or location.tickets_fax_number or location.tickets_email or location.tickets_website %}
                    {% if location.get_opening_hours %}<br/>{% endif %}
                    <dl>
                        {% if location.tickets_calling_prices %}
                            <dt class="width_50">{% trans "Phone" %}</dt>
                            <dd><a class="phone" href="tel:{{ location.tickets_calling_prices }}">{{ location.tickets_calling_prices }}</a></dd>
                        {% elif location.tickets_phone_number %}
                            <dt class="width_50">{% trans "Phone" %}</dt>
                            <dd><a class="phone" href="tel:{% if location.tickets_phone_country %}+{{ location.tickets_phone_country }}{% endif %}{{ location.tickets_phone_area }}{{ location.tickets_phone_number }}">{% if location.tickets_phone_country %}+{{ location.tickets_phone_country }}-{% endif %}{{ location.tickets_phone_area }}-{{ location.tickets_phone_number }}</a> {{ location.get_rendered_tickets_calling_prices }}
                            </dd>
                        {% endif %}
                        {% if location.tickets_fax_number %}
                            <dt class="width_50">{% trans "Fax" %}</dt>
                            <dd>{% if location.tickets_fax_country %}+{{ location.tickets_fax_country }}-{% endif %}{{ location.tickets_fax_area }}-{{ location.tickets_fax_number }}</dd>
                        {% endif %}
                        {% if location.tickets_email %}
                            <dt class="width_50">{% trans "Mail" %}</dt>
                            <dd><a href="mailto:{{ location.tickets_email }}">{{ location.tickets_email }}</a></dd>
                        {% endif %}
                        {% if location.tickets_website %}
                            <dt class="width_50">{% trans "Web" %}</dt>
                            <dd><a href="{{ location.tickets_website }}" class="no-print">{{ location.tickets_website|humanize_url:28 }}</a><a href="{{ location.tickets_website }}" class="print">{{ location.tickets_website }}</a></dd>
                        {% endif %}
                    </dl>
                {% endif %}
            </div>
        </div>
    {% endif %}
    <div class="accordion-item no-print">
        <h4 class="accordion-item-head">{% trans "Public transport" %}</h4>
        <div class="accordion-item-content">
            {% bvg address=location.street_address address_2=location.street_address2 postal_code=location.postal_code city=location.city %}
        </div>
    </div>
    {% if location.services.all %}
        <div class="accordion-item">
            <h4 class="accordion-item-head">{% trans "Service" %}</h4>
            <div class="accordion-item-content">
                <ul class="list">
                    {% for cat in location.services.all %}
                        <li>{{ cat.title }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    {% endif %}
    {% if location.accessibility_options.exists %}
        <div class="accordion-item">
            <h4 class="accordion-item-head">{% trans "Accessibility Options" %}</h4>
            <div class="accordion-item-content">
                <ul class="list">
                    {% for cat in location.accessibility_options.all %}
                        <li>{{ cat.title }}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    {% endif %}
    {% if location.press_contact_name or location.press_phone_number or location.press_fax_number or location.press_email or location.press_website %}
        <div class="accordion-item">
            <h4 class="accordion-item-head">{% trans "Press" %}</h4>
            <div class="accordion-item-content">
                    <dl>
                        {% if location.press_contact_name %}
                            <dd>{{ location.press_contact_name }}</dd>
                        {% endif %}
                        {% if location.press_phone_number %}
                            <dt class="width_50">{% trans "Phone" %}</dt>
                            <dd><a class="phone" href="tel:{% if location.press_phone_country %}+{{ location.press_phone_country }}{% endif %}{{ location.press_phone_area }}{{ location.press_phone_number }}">{% if location.press_phone_country %}+{{ location.press_phone_country }}-{% endif %}{{ location.press_phone_area }}-{{ location.press_phone_number }}</a></dd>
                        {% endif %}
                        {% if location.press_fax_number %}
                            <dt class="width_50">{% trans "Fax" %}</dt>
                            <dd>{% if location.press_fax_country %}+{{ location.press_fax_country }}-{% endif %}{{ location.press_fax_area }}-{{ location.press_fax_number }}</dd>
                        {% endif %}
                        {% if location.press_email %}
                            <dt class="width_50">{% trans "Mail" %}</dt>
                            <dd><a href="mailto:{{ location.press_email }}">{{ location.press_email }}</a></dd>
                        {% endif %}
                        {% if location.press_website %}
                            <dt class="width_50">{% trans "Web" %}</dt>
                            <dd><a href="{{ location.press_website }}" target="_blank" class="no-print">{{ location.press_website|humanize_url:28 }}</a><a href="{{ location.press_website }}" target="_blank" class="print">{{ location.press_website }}</a></dd>
                        {% endif %}
                    </dl>
            </div>
        </div>
    {% endif %}
</div>