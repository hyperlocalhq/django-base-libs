{% extends "base.html" %}
{% load base_tags cms_tags menu_tags sekizai_tags i18n image_modifications infobanners_tags staticfiles %}

{% block meta_tags %}
    {{ block.super }}

    {% block open_graph %}
        {% with open_graph_settings=request.current_page.open_graph_settings %}
            {% if open_graph_settings %}
                {# Open Graph settings from CMS page #}
                <meta property="og:title" content="{{ open_graph_settings.og_title }}"/>
                <meta property="og:type" content="{{ open_graph_settings.og_type }}" />
                {% if open_graph_settings.og_image %}
                    <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ MEDIA_URL }}{{ open_graph_settings.og_image|modified_path:"og" }}" />
                {% else %}
                    <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ STATIC_URL }}site/img/berlinbuehnen_opengraph.png" />
    {#                <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ MEDIA_URL }}logo_berlinbuehnen_fb_v3.png" />#}
                {% endif %}
                <meta property="og:description" content="{{ open_graph_settings.og_description|escape }}" />
            {% else %}
                {# Default Open Graph settings #}
                {% page_attribute "title" as title %}
                {% page_attribute "meta_description" as meta_description %}
                <meta property="og:title" content="{{ title|default:"Berlin Bühnen" }}" />
                <meta property="og:type" content="{{ title|yesno:"article,website" }}" />
                <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ STATIC_URL }}site/img/berlinbuehnen_opengraph.png" />
    {#            <meta property="og:image" content="{{ request.scheme }}://{{ request.get_host }}{{ MEDIA_URL }}logo_berlinbuehnen_fb_v3.png" />#}
                <meta property="og:description" content="{{ meta_description|default:site_settings.meta_description|escape }}" />
            {% endif %}
            <meta property="og:image:type" content="image/jpeg" />
            <meta property="og:image:width" content="600" />
            <meta property="og:image:height" content="600" />
        {% endwith %}
    {% endblock %}
    <meta property="og:url" content="{{ request.scheme }}://{{ request.get_host }}{{ request.path }}" />
    <meta property="og:site_name" content="Berlin Bühnen" />
    <meta property="og:locale" content="{{ OPEN_GRAPH_LOCALE }}" />
    {# <meta property="fb:app_id" content="" /> #}

{% endblock %}

{% block stylesheet %}
    {{ block.super }}

    <link href="{{ STATIC_URL }}site/css/bootstrap/bootstrap.css" rel="stylesheet" media="screen, print" type="text/css" />
    <link href="{{ STATIC_URL }}site/css/style.css" rel="stylesheet" media="screen, print" type="text/css" />
    <link href="{{ STATIC_URL }}site/css/print.css" rel="stylesheet" media="print" type="text/css" />
{% endblock %}

{% block script %}
    {{ block.super }}

    {% now "uuuu" as microseconds %}
    <script nonce="{{ microseconds|to_base64 }}">
        var images = [];
        function preload() {
            for (i = 0; i < preload.arguments.length; i++) {
                images[i] = new Image();
                images[i].src = preload.arguments[i];
            }
        }
        preload(
            "{{ STATIC_URL }}site/img/placeholder_event.png",
            "{{ STATIC_URL }}site/img/placeholder_location_grid.png"
        );
    </script>
    {% add_data "script_nonces" microseconds|to_base64 %}

    {% comment %}<!--
    <script>/*
        (function() {
        var config = {
              kitId: 'qru0sat',
              scriptTimeout: 3000
        };
        var h=document.getElementsByTagName("html")[0];h.className+=" wf-loading";var t=setTimeout(function(){h.className=h.className.replace(/(\s|^)wf-loading(\s|$)/g," ");h.className+=" wf-inactive"},config.scriptTimeout);var tk=document.createElement("script"),d=false;tk.src='//use.typekit.net/'+config.kitId+'.js';tk.type="text/javascript";tk.async="true";tk.onload=tk.onreadystatechange=function(){var a=this.readyState;if(d||a&&a!="complete"&&a!="loaded")return;d=true;clearTimeout(t);try{Typekit.load(config)}catch(b){}};var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(tk,s)
      })();*/
    </script>
    -->{% endcomment %}

    <script src="{% url "jssettings" %}"></script>
    <script src="{{ JETSON_MEDIA_URL }}js/legacy.js"></script>
    <script src="/{{ LANGUAGE_CODE }}/jsi18n/"></script>

    <script src="https://code.jquery.com/jquery-1.10.1.min.js" integrity="sha384-M7ti4rBhW6K9vKaD69Y/xNT8YW/SFBQBKbSZtEdjveDyXUpsF3gmBWZRjtr0ZbCD"
      crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-migrate-1.2.1.min.js" integrity="sha384-9tt8DlZQhE63eBuKml9tnMclfDeo/8/wstzUrBQStZZkCCvwfw78IiV+r9o600g2"
      crossorigin="anonymous"></script>
    <script src="{{ JETSON_MEDIA_URL }}js/jquery/jquery.cookie.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.ba-bbq.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.isotope.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.scrollstop.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.lazyload.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/bootstrap/bootstrap.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/modernizr.custom.52849.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.selectbox-0.2.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.sharrre-1.3.2.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.jscroll.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/jquery.mobile.custom.min.js"></script>
    <!-- <script src="{{ STATIC_URL }}site/js/jquery.headroom.min.js"></script> -->
    <script src="{{ STATIC_URL }}site/js/jquery.hammer-full.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/lscache.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/base.min.js"></script>
    <script src="{{ STATIC_URL }}site/js/affix.js"></script>

    {% now "uuuu" as microseconds %}
    <script nonce="{{ microseconds|to_base64 }}">
        // forcing django CMS to use the already included version of jQuery
        var django = {jQuery: jQuery};
        var language = {};
        language.Photo = '{% trans "Photo" %}';
    </script>
    {% add_data "script_nonces" microseconds|to_base64 %}

{% endblock %}


{% block body %}
    <img src="{{ STATIC_URL }}site/img/logo.png" alt="Berlin Bühnen" class="print" />
    <!--
        {% if request.is_phone %}This is phone.{% endif %}
        {% if request.is_tablet %}This is tablet.{% endif %}
        {% if request.is_mobile %}This is a mobile device.{% endif %}
        {% if not request.is_mobile %}This is a desktop.{% endif %}
    -->
    {% block map %}{% endblock %}

    <div id="wrapper">
        {% block header %}
            {% include "utils/header.html" %}
        {% endblock %}

        <div id="body">
            {% block content %}
            {% endblock %}
        </div>

        <a href="#top" id="to-top">
            <span class="sr-only">{% trans "Back to top" %}</span>
        </a>

        <div id="footer">
            {% block footer %}
                <div class="content">
                    <div class="container">
                        <div class="row">
                            <div id="footer-links" class="col-xs-6 col-sm-3 col-md-1 col-lg-1">
                                <h3>{% trans "Links" %}</h3>
                                <ul class="navigation">
                                    {% show_menu_below_id "meta" 0 0 1 1 %}
                                </ul>
                            </div>
                            <div id="footer-social" class="col-xs-6 col-sm-3 col-md-2 col-lg-2">
                                <h3>{% trans "Follow us" %}</h3>
                                <ul class="social_links">
                                    <li><a class="fawesome facebook" href="https://www.facebook.com/pages/berlin-buehnende/440174332664851" target="_blank"><span class="sr-only">Facebook</span></a></li>
                                    <li><a class="fawesome twitter" href="https://twitter.com/#!/berlinbuehnen" target="_blank"><span class="sr-only">Twitter</span></a></li>
                                    <li><a class="fawesome instagram" href="https://instagram.com/berlinbuehnen" target="_blank"><span class="sr-only">Instagram</span></a></li>
                                    <li><a class="fawesome newsletter" href="http://berlin-buehnen.us2.list-manage1.com/subscribe?u=d7c71420a69df471f30ab850e&id=3f2c5c590a" target="_blank"><span class="sr-only">{% trans "Newsletter" %}</span></a></li>
                                </ul>
                            </div>
                            <div class="clearfix visible-xs"></div>
                            <div class="col-xs-12 col-sm-6 col-md-3 col-lg-3">
                                {% if LANGUAGE_CODE == "de" %}
                                    <p>Ein Gemeinschaftsprojekt der <br class="hidden-xs hidden-md" />Berliner Bühnen mit</p>
                                {% else %}
                                    <p>A joint project by <br class="hidden-xs hidden-md" />the Berlin stages with</p>
                                {% endif %}
                                <a href="http://www.kulturprojekte-berlin.de/" target="_blank" class="no-print full-white"><img src="{{ STATIC_URL }}site/img/logos/kpb_logo.gif" height="70" alt="Kulturprojekte Berlin" /></a>
                                <img class="print" src="{{ STATIC_URL }}site/img/logos/kpb_black.gif" height="70" alt="Kulturprojekte Berlin" />
                            </div>
                            <div class="clearfix visible-sm"></div>
                            <div id="footer-sponsors" class="col-xs-12 col-md-5 col-lg-5">
                                <p>{% trans "Funded by" %}:</p>
                                <div class="white-bg">
                                    <a href="http://www.berlin.de/sen/wirtschaft/gruenden-und-foerdern/europaeische-strukturfonds/" target="_blank" class="full-white"><img src="{{ STATIC_URL }}site/img/logos/eu_logo.gif" height="70" alt="Europäische Union" /></a><a href="https://www.berlin.de/sen/kultur/foerderung/eu-foerderung/efre/foerderperiode-2007-2013/artikel.81646.php" target="_blank" class="full-white"><img src="{{ STATIC_URL }}site/img/logos/efre_logo.gif" height="70" alt="EFRE" /></a><a href="http://www.berlin.de/sen/kultur/" target="_blank" class="full-white"><img src="{{ STATIC_URL }}site/img/logos/be_berlin_senatsverwaltung.png" height="70" alt="be Berlin Senatsverwaltung" /></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            {% endblock %}
        </div>
    </div>

    {% block top_alert %}
        {% infobanner "top" %}
    {% endblock %}

    <span class="width-sniffer visible-xs"></span><span class="width-sniffer visible-sm"></span><span class="width-sniffer visible-md"></span><span class="width-sniffer visible-lg"></span>
{% endblock body %}
