{% load i18n base_tags %}
<div class="row">

    <div id="main-filter-options" class="filter-options btn-group clearfix" data-toggle="buttons">
        
        {% for cat in facets.categories.categories %}
            <label type="button" class="filter-option col-xs-6 col-sm-4 col-md-3" data-parent="#main-filter-suboptions" data-toggle="collapse" data-target="#filter-categories-{{ cat.pk }}" aria-expanded="false">
                <input type="radio" name="options" id="filter-toggle-categories-{{ cat.pk }}">
                <span>{{ cat.title }}</span>
            </label>
        {% endfor %}

        {% comment %}
        <label type="button" class="filter-option col-xs-6 col-sm-4 col-md-3" data-parent="#main-filter-suboptions" data-toggle="collapse" data-target="#filter-alphabetic" aria-expanded="false">
            <input type="radio" name="options" id="filter-toggle-alphabetic">
            <span>{% trans "A - Z" %}</span>
        </label>
        {% endcomment %}

        {% comment %}
        <label type="button" class="filter-option col-xs-6 col-sm-4 col-md-3" data-parent="#main-filter-suboptions" data-toggle="collapse" data-target="#filter-smartlists" aria-expanded="false">
            <input type="radio" name="options" id="filter-toggle-smartlists">
            <span>{% trans "Smart lists" %}</span>
        </label>
        {% endcomment %}

        <label type="button" class="filter-option col-xs-6 col-sm-4 col-md-3" data-parent="#main-filter-suboptions" data-toggle="collapse" data-target="#filter-location" aria-expanded="false">
            <input type="radio" name="options" id="filter-toggle-location">
            <span>{% trans "Location" %}</span>
        </label>
        
        {% for cat in facets.categories.event_characteristics %}
            {% if cat.show_as_main_category %}
                {% if cat in facets.selected.event_characteristics %}
                    <label class="singleton active col-xs-6 col-sm-4 col-md-3" data-value="event_characteristics={{ cat.pk }}">
                        <a href="{% remove_from_query "page" event_characteristics=cat.pk %}">{{ cat.title }}</a>
                    </label>
                {% else %}
                    <label class="singleton col-xs-6 col-sm-4 col-md-3">
                        <a href="{% add_to_query "page" event_characteristics=cat.pk %}">{{ cat.title }}</a>
                    </label>
                {% endif %}
            {% endif %}
        {% endfor %}
        
        {% if facets.selected.starttime|time:'H:i' == '18:00' %}
            <label class="singleton active col-xs-6 col-sm-4 col-md-3" data-value="starttime=18:00">
                <a href="{% remove_from_query "page" starttime='18:00' %}">{% trans 'Evening' %}</a>
            </label>
        {% else %}
            <label class="singleton col-xs-6 col-sm-4 col-md-3">
                <a href="{% add_to_query "page" starttime='18:00' %}">{% trans 'Evening' %}</a>
            </label>
        {% endif %}
        
        <label type="button" class="filter-option col-xs-6 col-sm-4 col-md-3" data-parent="#main-filter-suboptions" data-toggle="collapse" data-target="#filter-language" aria-expanded="false">
            <input type="radio" name="options" id="filter-toggle-language">
            <span>{% trans "Language" %}</span>
        </label>

        {% comment %}
        <label type="button" class="filter-option col-xs-6 col-sm-4 col-md-3" data-parent="#main-filter-suboptions" data-toggle="collapse" data-target="#filter-characteristics" aria-expanded="false">
            <input type="radio" name="options" id="filter-toggle-characteristics">
            <span>{% trans "Characteristics" %}</span>
        </label>
        {% endcomment %}

    </div>

    <div id="main-filter-suboptions" class="panel-group" >
        {% for cat in facets.categories.categories %}
            <div class="panel">
                <div id="filter-categories-{{ cat.pk }}" class="filter-suboptions panel-collapse collapse col-xs-12">
                    <h5>{% trans "filter by" %}:</h5>
                    <ul class="option-set">
                        {% if cat in facets.selected.categories %}
                            <li class="parent active" data-value="categories={{ cat.pk }}">
                                <a href="{% remove_from_query "page" categories=cat.pk %}">{% trans "All" %}</a>
                            </li>
                        {% else %}
                            <li class="parent">
                                <a href="{% add_to_query "page" categories=cat.pk %}">{% trans "All" %}</a>
                            </li>
                        {% endif %}
                        {% for child in cat.children.all %}
                            {% if child in facets.selected.subcategories %}
                                <li class="child active" data-value="subcategories={{ child.pk }}">
                                    <a href="{% remove_from_query "page" subcategories=child.pk %}">{{ child.title }}</a>
                                </li>
                            {% else %}
                                <li class="child">
                                    <a href="{% add_to_query "page" subcategories=child.pk %}">{{ child.title }}</a>
                                </li>
                            {% endif %}
                        {% endfor %}
                    </ul>
                </div>
            </div>
        {% endfor %}

        {% comment %}
        <div class="panel">
            <div id="filter-alphabetic" class="filter-suboptions panel-collapse collapse col-xs-12">
                <h5>{% trans "filter by" %}:</h5>
                <ul class="option-set">
                    {% for item in abc_list %}
                        {% if not forloop.first %}
                            {% if item.1 in facets.selected.abc %}
                                <li class="active" data-value="abc={{ item.0 }}">
                                    <a href="{% remove_from_query "page" abc=item.0 %}">{{ item.1 }}</a>
                            {% else %}
                                <li>
                                    <a href="{% add_to_query "page" abc=item.0 %}">{{ item.1 }}</a>
                                </li>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endcomment %}
        
        {% comment %}
        <div class="panel">
            <div id="filter-smartlists" class="filter-suboptions panel-collapse collapse col-xs-12">
                <h5>{% trans "filter by" %}:</h5>
                <ul class="option-set" id="smartlists">
                    <li{% if facets.selected.open_on_mondays %} class="active"{% endif %} data-param="open_on_mondays" data-value="1">
                        <a href="{% append_to_get open_on_mondays=1,page="" %}" data-filter-value=".is_open_on_mondays">{% trans "Open on Mondays" %}</a>
                    </li>
                    <li{% if facets.selected.free_entrance %} class="active"{% endif %} data-param="free_entrance" data-value="1">
                        <a href="{% append_to_get free_entrance=1,page="" %}" data-filter-value=".is_free_entrance">{% trans "Free entrance" %}</a>
                    </li>
                </ul>
            </div>
        </div>
        {% endcomment %}
            
        <div class="panel">
            <div id="filter-location" class="filter-suboptions panel-collapse collapse col-xs-12">
                <h5>{% trans "filter by" %}:</h5>
                <ul class="option-set">
                    {% for cat in facets.categories.locations %}
                        {% if cat in facets.selected.locations %} 
                            <li class="active" data-value="locations={{ cat.pk }}">
                                <a href="{% remove_from_query "page" locations=cat.pk %}">{{ cat.title }}</a>
                            </li>
                        {% else %}
                            <li>
                                <a href="{% add_to_query "page" locations=cat.pk %}">{{ cat.title }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>

        <div class="panel">
            <div id="filter-language" class="filter-suboptions panel-collapse collapse col-xs-12">
                <h5>{% trans "filter by" %}:</h5>
                <ul class="option-set">
                    {% for cat in facets.categories.language_and_subtitles %}
                        {% if cat in facets.selected.language_and_subtitles %}
                            <li class="active" data-value="language_and_subtitles={{ cat.pk }}">
                                <a href="{% remove_from_query "page" language_and_subtitles=cat.pk %}">{{ cat.title }}</a>
                            </li>
                        {% else %}
                            <li>
                                <a href="{% add_to_query "page" language_and_subtitles=cat.pk %}">{{ cat.title }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
            
        {% comment %}
        <div class="panel">
            <div id="filter-characteristics" class="filter-suboptions panel-collapse collapse col-xs-12">
                <h5>{% trans "filter by" %}:</h5>
                <ul class="option-set">
                    {% for cat in facets.categories.production_characteristics %}
                        {% if cat in facets.selected.production_characteristics %}
                            <li class="active" data-value="production_characteristics={{ cat.pk }}">
                                <a href="{% remove_from_query "page" production_characteristics=cat.pk %}">{{ cat.title }}</a>
                            </li>
                        {% else %}
                            <li>
                                <a href="{% add_to_query "page" production_characteristics=cat.pk %}">{{ cat.title }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}
                    {% for cat in facets.categories.event_characteristics %}
                        {% if not cat.show_as_main_category %}
                            {% if cat in facets.selected.event_characteristics %}
                                <li class="active" data-value="event_characteristics={{ cat.pk }}">
                                    <a href="{% remove_from_query "page" event_characteristics=cat.pk %}">{{ cat.title }}</a>
                                </li>
                            {% else %}
                                <li>
                                    <a href="{% add_to_query "page" event_characteristics=cat.pk %}">{{ cat.title }}</a>
                                </li>
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                </ul>
            </div>
        </div>
        {% endcomment %}
            
    </div>
</div>