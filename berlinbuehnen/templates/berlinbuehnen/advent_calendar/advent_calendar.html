{% extends "cms/default.html" %}
{% load cms_tags i18n image_modifications %}

{% block bodyclass %}advent-calendar-body{% endblock %}

{% block content %}
    <div class="content advent-calendar">
        <div class="container">
            <div class="row">

                <h1 class="bottom-line">{% trans "Advent Calendar" %}</h1>

                <div class="placeholder-intro">
                    {% placeholder "intro" %}
                </div>

                <div class="col-xs-12 print-padding">

                    <!-- the list -->
                    <div id="main_list" class="grid location-grid grid-autoload row">
                        {% if day_list %}
                            {% for day in day_list %}
                                <div class="grid-item col-xs-12 col-sm-6 col-md-4 grid-item-favorite">

                                    <!-- image -->
                                    <span class="grid-item-image img {% if day.is_present %}present{% elif day.is_past %}past{% else %}future{% endif %}">
                                        {% if day.is_past %}
                                            {% if day.image %}
                                                <img src="{{ STATIC_URL }}site/img/placeholder_advent_calendar.png" data-original="{{ MEDIA_URL }}{{ day.image.path|modified_path:"advent_calendar_image" }}" alt="{{ day.day|date:"l, j. F Y" }}"/>
                                            {% else %}
                                                <img src="{{ STATIC_URL }}site/img/placeholder_advent_calendar.png"/>
                                            {% endif %}
                                        {% else %}
                                            {% if day.preview_image %}
                                                {% if day.is_present and day.image %}
                                                    <img src="{{ STATIC_URL }}site/img/placeholder_advent_calendar.png" data-original="{{ MEDIA_URL }}{{ day.image.path|modified_path:"advent_calendar_image" }}" alt="{{ day.day|date:"l, j. F Y" }}" class="gift-image" />
                                                {% endif %}
                                                <img src="{{ STATIC_URL }}site/img/placeholder_advent_calendar.png" data-original="{{ MEDIA_URL }}{{ day.preview_image.path|modified_path:"advent_calendar_image" }}" alt="{{ day.day|date:"l, j. F Y" }}" />
                                            {% else %}
                                                <img src="{{ STATIC_URL }}site/img/placeholder_advent_calendar.png" />
                                            {% endif %}
                                        {% endif %}
                                    </span>
                                    {% if day.is_present %}
                                        <div class="gift">
                                            <div class="gift-layer">
                                                <div class="gift-close"></div>
                                                <h2>{{ day.title }}</h2>
                                                <div>{{ day.get_rendered_description }}</div>
                                            </div>
                                        </div>
                                    {% endif %}
                                    {% comment %}
                                    <h2>{{ day.day|date:"j. F" }}</h2>
                                    {% if day.is_future %}
                                        {% trans "Locked" %}
                                    {% elif day.is_present %}
                                        {% trans "Click to open" %}
                                    {% elif day.is_past %}
                                        <h3>{{ day.title }}</h3>
                                        <div class="copy">{{ day.get_rendered_description }}</div>
                                    {% endif %}
                                    {% endcomment %}
                                </div>
                            {% endfor %}
                        {% else %}
                            {% include "utils/container_empty.html" %}
                        {% endif %}
                    </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block js %}
    {{ block.super }}
    <script type="text/javascript" src="{{ STATIC_URL }}site/js/advent_calendar.js"></script>
{% endblock %}
