{% extends "productions/events/base.html" %}
{% load i18n crispy_forms_tags %}

{% block csp_scripts %}'unsafe-eval'{% endblock %}

{% block stylesheet %}
    {{ block.super }}
    <link href="{{ STATIC_URL }}site/css/fileuploader.css" media="screen" rel="stylesheet" type="text/css" />
{% endblock %}
    
{% block js %}
    {{ block.super }}
    <script src="https://code.jquery.com/ui/1.10.0/jquery-ui.js" integrity="sha384-glie7tU+lP1Wgz1lIwjutMZL7u96+FqNv4mlRaPfz1YgShmXKLgn1MEolAqasyVC" crossorigin="anonymous"></script>
    <script src="{{ STATIC_URL }}ajaxuploader/js/fileuploader.js"></script>
{% endblock %}

{% block event_tabs %}
    {% if 'new_production=1' in request.get_full_path %}
        <li><a class="txt" href="{% url "change_event_basic_info" slug=production.slug event_id=event.pk %}?new_production=1"> {% trans "Details" %} </a></li>
        <li><a class="txt" href="{% url "change_event_description" slug=production.slug event_id=event.pk %}?new_production=1"> {% trans "Description" %} </a></li>
        <li class="active"><a class="txt" href="{% url "change_event_gallery" slug=production.slug event_id=event.pk %}?new_production=1"> {% trans "Media" %} </a></li>
    {% else %}
        <li><a class="txt" href="{% url "change_event_basic_info" slug=production.slug event_id=event.pk %}"> {% trans "Details" %} </a></li>
        <li><a class="txt" href="{% url "change_event_description" slug=production.slug event_id=event.pk %}"> {% trans "Description" %} </a></li>
        <li class="active"><a class="txt" href="{% url "change_event_gallery" slug=production.slug event_id=event.pk %}"> {% trans "Media" %} </a></li>
    {% endif %}
{% endblock %}

{% block multistep_form %}
    <form id="media_item_overviews" class="relative">
        <fieldset class="fieldset-videos">
            <legend>{% trans "Video/Audio" %}</legend>
            <div class="fieldset-meta">
                <a class="btn btn-primary add" id="add_video" href="{% url "event_add_video" slug=production.slug event_id=event.pk %}">{% trans "Add video trailer" %}</a>
            </div>
            <div id="videos" data-load-url="{% url "event_video_overview" slug=production.slug event_id=event.pk %}"></div>
        </fieldset>
        <fieldset class="fieldset-live-stream">
            <legend>{% trans "Live Streaming" %}</legend>
            <div class="fieldset-meta">
                <a class="btn btn-primary add" id="add_streaming" href="{% url "event_add_streaming" slug=production.slug event_id=event.pk %}">{% trans "Add live stream" %}</a>
            </div>
            <div id="streamings" data-load-url="{% url "event_streaming_overview" slug=production.slug event_id=event.pk %}"></div>
        </fieldset>
        <fieldset class="fieldset-imagegallery">
            <legend>{% trans "Image Gallery" %}</legend>
            <div class="fieldset-meta">
                <a class="btn btn-info" href="#" id="crop_list_image">{% trans "Crop List Image" %}</a>
                <a class="btn btn-info" href="#" id="crop_cover_image">{% trans "Crop Cover Image" %}</a>
                <a class="btn btn-primary add" id="add_photo" href="{% url "event_add_image" slug=production.slug event_id=event.pk %}">{% trans "Add image" %}</a>
            </div>
            <div id="photos" data-load-url="{% url "event_image_overview" slug=production.slug event_id=event.pk %}"></div>
        </fieldset>
        <fieldset class="fieldset-pdf">
            <legend>{% trans "PDF" %}</legend>
            <div class="fieldset-meta">
                <a class="btn btn-primary add" id="add_pdf" href="{% url "event_add_pdf" slug=production.slug event_id=event.pk %}">{% trans "Add PDF document" %}</a>
            </div>
            <div id="pdfs" data-load-url="{% url "event_pdf_overview" slug=production.slug event_id=event.pk %}"></div>
        </fieldset>
    </form>
    <div id="edit_media_item"></div>
    
    {% crispy form %}
    <!-- Hidden Iframe -->
    <iframe name="hidden_iframe" id="hidden_iframe" src="about:blank" style="display:none;"></iframe>
    {% include "utils/gallery_upload_scripts.html" %}
{% endblock %}

