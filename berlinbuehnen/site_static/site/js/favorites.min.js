/* global self:false, favorite_tooltip_text:false */
!function(a,n){self.FavoriteManager={sContextItemType:"",sSlug:"",sInnerTextToAdd:favorite_tooltip_text.Add_to_My_Favorites,sTitleToAdd:favorite_tooltip_text.Add_to_My_Favorites,sInnerTextToRemove:favorite_tooltip_text.Remove_from_My_Favorites,sTitleToRemove:favorite_tooltip_text.Remove_from_My_Favorites,init:function(){},destruct:function(){self.FavoriteManager=null},toggle:function(e,t,o){return a(e).addClass("progress").css({cursor:"wait"}),a.get("/"+window.settings.LANGUAGE_CODE+"/helper/favorite/"+t+"/"+o+"/",function(t){self.FavoriteManager.showResults(t,e)},"JSON"),!1},showResults:function(t,e){var o=self.FavoriteManager,r=a(e);if(t){var i=r.children("span:first");"added"===t.action?(r.attr({title:o.sTitleToRemove}).addClass("active"),i.html(o.sInnerTextToRemove),r.attr("data-original-title",o.sInnerTextToRemove)):(r.attr({title:o.sTitleToAdd}).removeClass("active"),i.html(o.sInnerTextToAdd),r.attr("data-original-title",o.sInnerTextToAdd)),t.count!==n&&r.children(".favorites_count").text(t.count)}r.removeClass("progress").css({cursor:"pointer"})}},a(document).ready(function(){self.FavoriteManager.init()}),a(window).unload(function(){self.FavoriteManager.destruct()})}(jQuery);