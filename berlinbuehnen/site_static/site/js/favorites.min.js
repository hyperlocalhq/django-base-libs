var gettext=window.gettext||function(t){return t};!function($,t){self.FavoriteManager={sContextItemType:"",sSlug:"",sInnerTextToAdd:gettext("Add to favorites"),sTitleToAdd:gettext("Add to favorites"),sInnerTextToRemove:gettext("Remove from favorites"),sTitleToRemove:gettext("Remove from favorites"),init:function(){var t=self.FavoriteManager;$(document).on("click",".favorite",function(e){e.preventDefault(),e.stopPropagation(),t.toggle($(this).get(),$(this).data("content_type_id"),$(this).data("object_id"))})},destruct:function(){self.FavoriteManager=null},toggle:function(t,e,o){$(t).addClass("progress").css({cursor:"wait"}),$.get("/helper/favorite/"+e+"/"+o+"/",function(e){self.FavoriteManager.showResults(e,t)},"JSON")},showResults:function(e,o){var n=self.FavoriteManager,a=$(o);if(e){var r=a.children("span:first");"added"===e.action?(a.attr({title:n.sTitleToRemove}).addClass("active"),r.html(n.sInnerTextToRemove),a.attr("data-original-title",n.sInnerTextToRemove)):(a.attr({title:n.sTitleToAdd}).removeClass("active"),r.html(n.sInnerTextToAdd),a.attr("data-original-title",n.sInnerTextToAdd)),e.count!==t&&a.children(".favorites_count").text(e.count)}a.removeClass("progress").css({cursor:"pointer"})}},$(document).ready(function(){self.FavoriteManager.init()}),$(window).unload(function(){self.FavoriteManager.destruct()})}(jQuery);