var gettext=window.gettext||function(t){return t};!function($,t){self.FavoriteManager={sContextItemType:"",sSlug:"",sInnerTextToAdd:gettext("Add to favorites"),sTitleToAdd:gettext("Add to favorites"),sInnerTextToRemove:gettext("Remove from favorites"),sTitleToRemove:gettext("Remove from favorites"),init:function(){var t=self.FavoriteManager;$(document).on("click",".favorite",function(e){e.preventDefault(),e.stopPropagation();var o=$(this);return t.toggle(o.get(),o.data("content_type_id"),o.data("object_id")),!1})},destruct:function(){self.FavoriteManager=null},toggle:function(t,e,o){$(t).addClass("progress").css({cursor:"wait"}),$.get("/helper/favorite/"+e+"/"+o+"/",function(e){self.FavoriteManager.showResults(e,t)},"JSON")},showResults:function(e,o){var n=self.FavoriteManager,r=$(o);if(e){var a=r.children("span:first");"added"===e.action?(r.attr({title:n.sTitleToRemove}).addClass("active"),a.html(n.sInnerTextToRemove),r.attr("data-original-title",n.sInnerTextToRemove)):(r.attr({title:n.sTitleToAdd}).removeClass("active"),a.html(n.sInnerTextToAdd),r.attr("data-original-title",n.sInnerTextToAdd)),e.count!==t&&r.children(".favorites_count").text(e.count)}r.removeClass("progress").css({cursor:"pointer"})}},$(document).ready(function(){self.FavoriteManager.init()}),$(window).unload(function(){self.FavoriteManager.destruct()})}(jQuery);