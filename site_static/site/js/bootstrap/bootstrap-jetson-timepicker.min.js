/* 
 * bootstrap-jetson-timepicker.js 
 *
 * Copyright 2013 Thomas Helbig and Aidas Bendoraitis 
 * 
 */(function(e){function t(e){var t='<div id="popup"><div class="inner clearfix"><div id="picker" class="clearfix"><header class="clearfix"><time>HH:MM</time></header><ul class="body clearfix"><li><table class="hours"><thead><tr><th colspan="6">'+e.str_hours+"</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td><span class="h-0">00</span></td>'+'<td><span class="h-1">01</span></td>'+'<td><span class="h-2">02</span></td>'+'<td><span class="h-3">03</span></td>'+'<td><span class="h-4">04</span></td>'+'<td><span class="h-5">05</span></td>'+"</tr>"+"<tr>"+'<td><span class="h-6">06</span></td>'+'<td><span class="h-7">07</span></td>'+'<td><span class="h-8">08</span></td>'+'<td><span class="h-9">09</span></td>'+'<td><span class="h-10">10</span></td>'+'<td><span class="h-11">11</span></td>'+"</tr>"+"<tr>"+'<td><span class="h-12">12</span></td>'+'<td><span class="h-13">13</span></td>'+'<td><span class="h-14">14</span></td>'+'<td><span class="h-15">15</span></td>'+'<td><span class="h-16">16</span></td>'+'<td><span class="h-17">17</span></td>'+"</tr>"+"<tr>"+'<td><span class="h-18">18</span></td>'+'<td><span class="h-19">19</span></td>'+'<td><span class="h-20">20</span></td>'+'<td><span class="h-21">21</span></td>'+'<td><span class="h-22">22</span></td>'+'<td><span class="h-23">23</span></td>'+"</tr>"+"</tbody>"+"</table>"+"</li>"+"<li>"+'<table class="minutes">'+"<thead>"+"<tr>"+'<th colspan="3">'+e.str_minutes+"</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+'<td><span class="m-0">00</span></td>'+'<td><span class="m-5">05</span></td>'+'<td><span class="m-10">10</span></td>'+"</tr>"+"<tr>"+'<td><span class="m-15">15</span></td>'+'<td><span class="m-20">20</span></td>'+'<td><span class="m-25">25</span></td>'+"</tr>"+"<tr>"+'<td><span class="m-30">30</span></td>'+'<td><span class="m-35">35</span></td>'+'<td><span class="m-40">40</span></td>'+"</tr>"+"<tr>"+'<td><span class="m-45">45</span></td>'+'<td><span class="m-50">50</span></td>'+'<td><span class="m-55">55</span></td>'+"</tr>"+"</tbody>"+"</table>"+"</li>"+"</ul>"+'<footer class="clearfix">'+'<button class="cancel right">'+e.str_close+"</button>"+'<button class="done btn-primary">'+e.str_confirm+"</button>"+"</footer>"+"</div>"+"</div>"+"</div>";return t}e.fn.extend({timepicker:function(n){var r={default_time:"09:00",str_hours:"Hours",str_minutes:"Minutes",str_confirm:"Confirm",str_close:"Close"},i=e.extend({},r,n);return this.each(function(){var n=e(this);if(n.data("timepicker-applied"))return;e(this).parent().addClass("input-append");e('<span class="input-group-btn"><button class="btn btn-lg btn-icon btn-info pick-time" type="button"><span class="icon icon-clock"></span></button></span>').insertAfter(this).find("button").click(function(){e("body").append(t(i));e("#popup").delay(100).queue(function(){e(this).addClass("on");e(this).dequeue()});var r=e("#picker"),s=(n.val()||i.default_time).split(":"),o=parseInt(s[0],10),u=Math.round(parseInt(s[1],10)/5)*5;u>55&&(u=55);var a=e(".h-"+o,r).addClass("active"),f=e(".m-"+u,r).addClass("active");e("time",r).text(a.text()+":"+f.text());e("table.hours td>span",r).mousedown(function(){a.removeClass("active");a=e(this).addClass("active");e("time",r).text(a.text()+":"+f.text())});e("table.minutes td>span",r).mousedown(function(){f.removeClass("active");f=e(this).addClass("active");e("time",r).text(a.text()+":"+f.text())});e("button.cancel",r).click(function(){e("#popup").removeClass("on").delay(250).queue(function(){e(this).remove();e(this).dequeue()})});e("button.done",r).click(function(){n.val(a.text()+":"+f.text());n.focus();e("#popup").removeClass("on").delay(250).queue(function(){e(this).remove();e(this).dequeue()})});return!1});n.data("timepicker-applied",!0)})}})})(jQuery);