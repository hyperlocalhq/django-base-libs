/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2012 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.8.0
 *
 */(function(e,t){var n=e(t);e.fn.lazyload=function(r){function u(){var t=0;i.each(function(){var n=e(this);if(o.skip_invisible&&!n.is(":visible"))return;if(!e.abovethetop(this,o)&&!e.leftofbegin(this,o))if(!e.belowthefold(this,o)&&!e.rightoffold(this,o))n.trigger("appear");else if(++t>o.failure_limit)return!1})}var i=this,s,o={threshold:0,failure_limit:0,event:"scrollstop",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null};if(r){if(undefined!==r.failurelimit){r.failure_limit=r.failurelimit;delete r.failurelimit}if(undefined!==r.effectspeed){r.effect_speed=r.effectspeed;delete r.effectspeed}e.extend(o,r)}s=o.container===undefined||o.container===t?n:e(o.container);0===o.event.indexOf("scroll")&&s.bind(o.event,function(e){return u()});this.each(function(){var t=this,n=e(t);t.loaded=!1;n.one("appear",function(){if(!this.loaded){if(o.appear){var r=i.length;o.appear.call(t,r,o)}var s;n.data("background")?s=n.data("background"):s=n.data(o.data_attribute);e("<img />").bind("load",function(){n.hide();n.data("background")?n.css("backgroundImage","url("+n.data("background")+")"):n.attr("src",n.data(o.data_attribute));n[o.effect](o.effect_speed);t.loaded=!0;var r=e.grep(i,function(e){return!e.loaded});i=e(r);if(o.load){var s=i.length;o.load.call(t,s,o)}}).attr("src",s);n.find(".spinner").removeClass("loading")}});0!==o.event.indexOf("scroll")&&n.bind(o.event,function(e){t.loaded||n.trigger("appear")})});n.bind("resize",function(e){u()});u();return this};e.belowthefold=function(r,i){var s;i.container===undefined||i.container===t?s=n.height()+n.scrollTop():s=e(i.container).offset().top+e(i.container).height();return s<=e(r).offset().top-i.threshold};e.rightoffold=function(r,i){var s;i.container===undefined||i.container===t?s=n.width()+n.scrollLeft():s=e(i.container).offset().left+e(i.container).width();return s<=e(r).offset().left-i.threshold};e.abovethetop=function(r,i){var s;i.container===undefined||i.container===t?s=n.scrollTop():s=e(i.container).offset().top;return s>=e(r).offset().top+i.threshold+e(r).height()};e.leftofbegin=function(r,i){var s;i.container===undefined||i.container===t?s=n.scrollLeft():s=e(i.container).offset().left;return s>=e(r).offset().left+i.threshold+e(r).width()};e.inviewport=function(t,n){return!e.rightofscreen(t,n)&&!e.leftofscreen(t,n)&&!e.belowthefold(t,n)&&!e.abovethetop(t,n)};e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return!e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})})(jQuery,window);