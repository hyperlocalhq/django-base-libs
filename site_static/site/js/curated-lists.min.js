$(function(){$(".add_to_own_curated_lists").each(function(){var t=$(this),e=t.data("content_type_id"),n=t.data("object_id"),o="/"+settings.lang+"/helper/user-curated-lists/?content_type_id="+e+"&object_id="+n;$.get(o,function(e){var n=$('<select placeholder="Add to curated list" multiple></select>').wrap('<div class="add_to_own_curated_lists input-field select"></div>');for(i=0,ilen=e.length;i<ilen;i++){var o=e[i],l=o.owner,a=$('<optgroup label="'+l.title+'"></optgroup>');for(j=0,jlen=o.lists.length;j<jlen;j++){var d=o.lists[j];$option=$('<option value="'+d.token+'">'+d.title+"</option>"),d.item_included&&$option.attr("selected",!0),a.append($option)}$option=$('<option value="new-for-'+l.type+"."+l.id+'">New Curated List...</option>'),a.append($option),n.append(a)}n=n.parent(),n.replaceAll(t).each(function(){var t=$(this).find("select");t.data("previous",t.val()),new window.form_elements.SelectBox(t)}),n.on("changed",function(){var t=$(this).find("select"),e=t.val().filter(function(e){return-1===t.data("previous").indexOf(e)}),i=t.data("previous").filter(function(e){return-1===t.val().indexOf(e)});console.log({newChoice:e.toString(),deletedChoice:i.toString()}),t.data("previous",t.val())})},"json")})});