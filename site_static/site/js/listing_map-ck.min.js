(function(e){e.fn.autoscroll=function(){e("html,body").animate({scrollLeft:this.offset().left,scrollTop:this.offset().top},500);return this}})(jQuery);var oMap;(function(e,t){function n(){u&&u.close();self.aGeopositions=[];for(var e=0,t=a.length;e<t;e++)a[e].setMap(null);a=[]}function r(){var t=self.aGeopositions||[],n=long_min=500,r=long_max=-500,s=[],f;for(i=0,iLen=t.length;i<iLen;i++){if(i<10){f=window.settings.STATIC_URL+"site/img/gmap/markers_1-10.png";iMarkerImgY=-34*i}else if(i<26){f=window.settings.STATIC_URL+"site/img/gmap/markers_11-26.png";iMarkerImgY=-34*(i-10)}else{f=window.settings.STATIC_URL+"site/img/gmap/markers_1-10.png";iMarkerImgY=-340}iLat=t[i].latitude;iLong=t[i].longitude;r<iLat&&(r=iLat);iLat<n&&(n=iLat);long_max<iLong&&(long_max=iLong);iLong<long_min&&(long_min=iLong);var l=new google.maps.LatLng(iLat,iLong),c=new google.maps.MarkerImage(f,new google.maps.Size(20,34),new google.maps.Point(0,-iMarkerImgY),new google.maps.Point(10,34)),h=new google.maps.MarkerImage(window.settings.STATIC_URL+"site/img/gmap/marker_shadow.png",new google.maps.Size(37,34),new google.maps.Point(0,0),new google.maps.Point(8,25)),p=new google.maps.Marker({position:l,map:oMap,shadow:h,icon:c});p.list_index=i;(function(e,t){google.maps.event.addListener(e,"click",function(){u=new StyledInfoWindow({position:e.getPosition(),map:oMap,content:t})})})(p,t[i].content);p.categories=t[i].categories;a.push(p);s.push(l);e(".location:eq("+i+")").data("marker_obj",p).click(function(){oMap.setCenter(e(this).data("marker_obj").getPosition());google.maps.event.trigger(e(this).data("marker_obj"),"click");e("body").addClass("map_visible");setTimeout(function(){google.maps.event.trigger(oMap,"resize")},600);return!1})}document.location.search&&o(oMap,s)}function s(t,n){var r=n.filter;e(a).each(function(){var e=this,t=!0,n=r.length,s,o,u;for(s=0;s<n;s++){u=r[s];o=new RegExp("\\b"+u+"\\b");if(!e.categories.match(o)){t=!1;break}}e.setVisible(t)})}function o(e,t){var n=new google.maps.LatLngBounds;for(var r=0,i=t.length;r<i;r++)n.extend(t[r]);var s=n.getNorthEast();n.extend(new google.maps.LatLng(s.lat()-.005,s.lng()-.005));var o=n.getNorthEast();n.extend(new google.maps.LatLng(o.lat()+.005,o.lng()+.005));e.fitBounds(n)}var u,a=[],f=null;e(document).ready(function(){var t=e("body");if(t.length){var i={zoom:13,mapTypeControl:!1,zoomControl:!0,streetViewControl:!0,center:new google.maps.LatLng(52.515306,13.363863),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU},zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL}},o=document.getElementById("gmap");o&&(oMap=new google.maps.Map(o,i));t.bind("before_list_load",n).bind("after_list_load",r).bind("map_filter",s);t.trigger("after_list_load")}})})(jQuery);