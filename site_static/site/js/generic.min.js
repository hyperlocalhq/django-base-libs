!function($,e){self.FavoriteManager={sContextItemType:"",sSlug:"",sInnerTextToAdd:trans.Favorite,sTitleToAdd:trans["Add to favorites"],sInnerTextToRemove:trans.Favorite,sTitleToRemove:trans["Remove from favorites"],init:function(){var e=self.FavoriteManager,t=window.website.path.substr(1).split("/");e.sContextItemType=t[0];var o=window.settings.lang;if(settings.URL_ID_INSTITUTION==e.sContextItemType)e.sSlug=t[1],$("#activity_"+o+" .navi_add-institution-to-favorites_"+o+",#activity_"+o+" .navi_remove-institution-from-favorites_"+o).click(function(){return $("#adding_to_favorites_0").click(),!1});else if(settings.URL_ID_DOCUMENT==e.sContextItemType){e.sSlug=t[1];var o=window.settings.lang;$("#activity_"+o+" .navi_add-document-to-favorites_"+o+",#activity_"+o+" .navi_remove-document-from-favorites_"+o).click(function(){return $("#adding_to_favorites_0").click(),!1})}},destruct:function(){self.FavoriteManager=null},toggle:function(e,t,o){return $("#adding_to_favorites_"+e).addClass("progress").css({cursor:"wait"}),$.get("/"+window.settings.lang+"/helper/favorite/"+t+"/"+o+"/",function(t){self.FavoriteManager.showResults(t,e)},"JSON"),!1},showResults:function(t,o){var n=self.FavoriteManager,s=$(".adding_to_favorites_"+o);s.each(function(){var o=$(this);if(t){$oSpan=o.children("span").not(".dont-toggle-text").first();var s=o.children("span.counter");if("added"==t.action){if(o.attr({title:n.sTitleToRemove}).addClass("active").addClass("on"),$oSpan.hasClass("sr-only")?$oSpan.html(n.sTitleToRemove):$oSpan.html(n.sInnerTextToRemove),s.length){var a=parseInt(s.text());a++,s.text(a)}}else if(o.attr({title:n.sTitleToAdd}).removeClass("active").removeClass("on"),$oSpan.hasClass("sr-only")?$oSpan.html(n.sTitleToAdd):$oSpan.html(n.sInnerTextToAdd),s.length){var a=parseInt(s.text());a--,0>a&&(a=0),s.text(a)}t.count!=e&&o.children(".favorites_count").text(t.count)}o.removeClass("progress").css({cursor:"pointer"})});var a=window.settings.lang;$("#activity_"+a).load(location.pathname+" #activity_"+a,n.init)}},self.FavoriteContactManager={sInnerTextToAdd:trans["Add contact"],sTitleToAdd:trans["Add contact"],sInnerTextToRemove:trans["It's your contact"],sTitleToRemove:trans["Remove contact"],init:function(){},destruct:function(){self.FavoriteContactManager=null},toggle:function(e,t,o){return $("#adding_to_favorites_"+e).addClass("progress").css({cursor:"wait"}),$.get("/"+window.settings.lang+"/helper/favorite/"+t+"/"+o+"/",function(t){self.FavoriteContactManager.showResults(t,e)},"JSON"),!1},showResults:function(e,t){var o=self.FavoriteContactManager,n=$("#adding_to_favorites_"+t);e&&($oSpan=n.children("span:first"),"added"==e.action?(n.attr({title:o.sTitleToRemove}).addClass("active"),$oSpan.html(o.sInnerTextToRemove)):(n.attr({title:o.sTitleToAdd}).removeClass("active"),$oSpan.html(o.sInnerTextToAdd))),n.removeClass("progress").css({cursor:"pointer"})}},self.MemoManager={sInnerTextToAdd:trans["Add to Memo"],sTitleToAdd:trans["Add to Memo"],sInnerTextToRemove:trans["Remove Memo"],sTitleToRemove:trans["Remove Memo"],init:function(){},destruct:function(){self.MemoManager=null},toggle:function(e,t,o){return $("#adding_to_memos_"+e).addClass("progress").css({cursor:"wait"}),$.get("/"+window.settings.lang+"/helper/memo/"+t+"/"+o+"/",function(t){self.MemoManager.showResults(t,e)},"JSON"),!1},showResults:function(e,t){var o=self.MemoManager;$oEl=$("#adding_to_memos_"+t),e&&($("ul.toolbar .memos .item_count").text(e.memo_count),0==e.memo_count?$("ul.toolbar .memos").addClass("hidden"):$("ul.toolbar .memos").removeClass("hidden"),$oSpan=$oEl.children("span:first"),"added"==e.action?($oEl.attr({title:o.sTitleToRemove}).addClass("active"),$oSpan.html(o.sInnerTextToRemove)):($oEl.attr({title:o.sTitleToAdd}).removeClass("active"),$oSpan.html(o.sInnerTextToAdd),-1!=location.pathname.indexOf("/memos/")&&$oSpan.parents(".info:first").fadeOut("normal").slideUp("normal",function(){$(this).remove(),$(".info:odd").removeClass("odd even").addClass("odd"),$(".info:even").removeClass("odd even").addClass("even")}))),$oEl.removeClass("progress").css({cursor:"pointer"})}},$(document).ready(function(){self.FavoriteManager.init(),self.FavoriteContactManager.init(),self.MemoManager.init()}),$(window).unload(function(){self.FavoriteManager.destruct(),self.FavoriteContactManager.destruct(),self.MemoManager.destruct()})}(jQuery);