{% load i18n cms_admin %}
{% if permission_set %}
	<div class="grp-module grp-table">
		<div class="grp-module grp-thead">
		    <div class="grp-tr">
                <div class="grp-th">{% trans 'Page' %}</div>
                <div class="grp-th">{% trans 'User' %}</div>
                <div class="grp-th">{% trans 'Group' %}</div>
                <div class="grp-th">{% trans 'Can edit' %}</div>
                <div class="grp-th">{% trans 'Can add' %}</div>
                <div class="grp-th">{% trans 'Can delete' %}</div>
                <div class="grp-th">{% trans 'Can publish' %}</div>
                <div class="grp-th">{% trans 'Can change permissions' %}</div>
                <div class="grp-th">{% trans 'Can move' %}</div>
                <div class="grp-th">{% trans 'Can view' %}</div>
                <div class="grp-th">{% trans 'Grant on' %}</div>
            </div>
        </div>
		<div class="grp-module grp-tbody">
			{% for meta, permission in permission_set %}
			    <div class="grp-tr {% cycle 'row1' 'row2' %}">
					<div class="grp-td page">
						{% if meta.0 %}
							{% if meta.1 %}<a href= "/admin/cms/globalpagepermission/{{ permission.id }}/">{% trans '(global)' %}</a>
							{% else %}{% trans '(global)' %}
							{% endif %}
						{% else %}
							{% ifequal permission.page_id page.id %}
								{% trans '(current)' %}
							{% else %}
								{% if meta.1 %}<a href= "/admin/cms/page/{{ permission.page.id }}/">{{ permission.page }}</a>
								{% else %}{{ permission.page }}
								{% endif %}
							{% endifequal %}
						{% endif %}
					</div>			
					<div class="grp-td user">{{ permission.user|default_if_none:"-" }}</div>
					<div class="grp-td group">{{ permission.group|default_if_none:"-" }}</div>
					<div class="grp-td can_change">{{ permission.can_change|boolean_icon }}</div>
					<div class="grp-td can_add">{{ permission.can_add|boolean_icon }}</div>
					<div class="grp-td can_delete">{{ permission.can_delete|boolean_icon }}</div>
					<div class="grp-td can_publish">{{ permission.can_publish|boolean_icon }}</div>
					<div class="grp-td can_change_permissions">{{ permission.can_change_permissions|boolean_icon }}</div>
					<div class="grp-td can_move_page">{{ permission.can_move_page|boolean_icon }}</div>
					<div class="grp-td can_view">{{ permission.can_view|boolean_icon }}</div>
					<div class="grp-td grant_on">{% if meta.0 %}{% trans 'All' %}
						{% else %}{{ permission.get_grant_on_display }}
					{% endif%}</div>			
				</div>
			{% endfor %}
		</div>
	</div>
{% else %}
	<div class="grp-module grp-table">
    	<div class="grp-module grp-tbody">
    	    <div class="grp-tr">
    	        <div class="grp-td">{% trans "Page doesn't inherit any permissions." %}</div>
            </div>
        </div>
    </div>
{% endif %}
