{% load i18n base_tags %}
<div id="address" {% if not forloop.last %}class="address_field"{% endif %}>
    <dl>
        <dt>
            {% if contact.location_title %}
                {{ contact.location_title }}
            {% else %}
                {{ contact.location_type }}
            {% endif %}
        </dt>
        <dd>
            {% if contact.institution %}
                <a href="{{ contact.institution.get_url_path }}">{{ contact.institution.get_title|escape }}</a>
                <br/>
            {% endif %}
            {% with contact.postal_address as address %}
                {% if address.street_address %}
                    <span class="street-address">{{ address.street_address|escape }}, </span>
                {% endif %}
                {% if address.street_address2 %}
                    <span class="street-address">{{ address.street_address2|escape }}, </span>
                {% endif %}
                {% if address.street_address3 %}
                    <span class="street-address">{{ address.street_address3|escape }}, </span>
                {% endif %}
                {% if address.postal_code %}
                    <span class="postal-code">{{ address.postal_code|escape }}</span>
                    <span class="locality">{{ address.city|escape }}, </span>
                {% endif %}
                {% if address.country %}
                    <span class="country-name">{{ address.country.get_name }}</span>
                {% endif %}
            {% endwith %}
        </dd>
    </dl>
</div>
