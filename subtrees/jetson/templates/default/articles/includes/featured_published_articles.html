{% load i18n base_tags image_mods_tags %}
{% comment %}<!--
Usage in any template:
    {% load base_tags %}
    
    Simple:
    {% include_parsed "articles/includes/featured_published_articles.html" %}
    
    Customized:
    {% include_parsed "articles/includes/featured_published_articles.html" with 5 as amount %}
    
-->{% endcomment %}

{% with amount|default:3 as amount %}
    {% get_objects featured_published articles.Article amount as featured_objects %}
    {% if featured_objects %}
        {% for article in featured_objects %}
            {% if forloop.first %}
                <div class="article">
            {% endif %}
        <a href="{{ article.get_url_path }}">
            {% if article.image %}
                <img alt="{{ article.get_title|escape }}"
                     src="{{ UPLOADS_URL }}{{ article.image|modified_path:"news_tn" }}"/>
            {% endif %}
        </a>
        <h3>
            <a href="{{ article.get_url_path }}">
                {{ article.get_title }}
            </a>
        </h3>
        <div{% if article.image %} class="img_block"{% endif %}>
            {{ article.get_rendered_description|default:article.get_rendered_content|safe }} <span>... <a href="{{ article.get_url_path }}">weiter</a> </span>
        </div>
        {% if forloop.last %}
            </div>
        {% endif %}
        {% endfor %}
    {% endif %}
{% endwith %}

